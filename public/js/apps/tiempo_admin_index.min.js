"use strict";(function(){var e,o,i;o=0,e=function(t,e){var o,i,a,r,n;if(i="",!1!==t){for(i+="<option value=''></option>",a=0,r=(n=app.vars[t]).length;a<r;a++){o=n[a],i+="<option value='".concat(o.id,"'>").concat(o.name,"</option>")}}$(e).html(i)},i=function(){var t;return t=$("#coltiempohoras .w1").height(),$("#tiempoadminnewform .w1").not($("#coltiempohoras .w1")).height(t)},$("#tiempoadminnewform").on("change",".tiempo_tipo",function(){var t;switch(t=$(this).data("rowindex"),$(this).val()){case"I":return e("actividades","#tiempo_proyecto_".concat(t));case"P":return e("proyectos","#tiempo_proyecto_".concat(t));default:return e(!1,"#tiempo_proyecto")}}),$("body").on("click",".btn-edititem",function(t){var e;return t.preventDefault(),$(this).toggle(),$(this).siblings("a").toggle(),(e=$(this).closest("tr")).find(".valu,.vale").toggle(),e.find("select.tiempo_tipo").trigger("change"),e.find("select.tiempo_proyecto").val(e.find("select.tiempo_proyecto").data("default"))}).on("click",".btn-saveitem",function(t){var e,o,i,a,r,n,c,s,l;if(t.preventDefault(),s=(e=$(this).closest("tr")).find("select.tiempo_tipo").val(),o=e.find("select.tiempo_proyecto").val(),a=e.find("input.tiempo_horas").val(),""===s){return alert("Indique el tipo"),!1}if(""===o){return alert("Indique la actividad o proyecto"),!1}if(""===a||isNaN(parseInt(a))||parseInt(a)<1){return alert("Indique la cantidad de horas"),!1}for(n in(i=document.createElement("form")).style.display="none",$("body").append(i),i.method="post",i.action=url_for("informe-tiempo/".concat(e.data("idtiempo"))),(r=document.createElement("input")).setAttribute("type","hidden"),r.setAttribute("name","it"),r.setAttribute("value",e.data("it")),i.appendChild(r),c={tipo:s,horas:a,id_actividad:o}){l=c[n],(r=document.createElement("input")).setAttribute("type","hidden"),r.setAttribute("name","tiempo[".concat(n,"]")),r.setAttribute("value",l),i.appendChild(r)}return i.submit()}).on("click",".btn-canceledititem",function(t){return t.preventDefault(),$(this).toggle(),$(this).siblings("a").toggle(),$(this).closest("tr").find(".valu,.vale").toggle()}).on("change","select.tiempo_tipo",function(){var t;switch(t=$(this).closest("td").next().find("select"),$(this).val()){case"I":return e("actividades",t);case"P":return e("proyectos",t);default:return e(!1,t)}}).on("click","#addnewformrow",function(t){return t.preventDefault(),o+=1,$("#coltiempotipo .controls:last").after("<div class='controls'><select class='raw-select input-medium control tiempo_tipo' data-rowindex='".concat(o,"' name='tiempo[items][").concat(o,"][tipo]' id='tiempo_tipo_").concat(o,"' required='required'><option></option><option value='P'>Productivo</option><option value='I'>Improductivo</option></select></div>")),$("#coltiempoproyecto .controls:last").after("<div class='controls'><select class='raw-select control tiempo_proyecto' name='tiempo[items][".concat(o,"][id_actividad]' id='tiempo_proyecto_").concat(o,"' required='required'></select></div>")),$("#coltiempohoras .controls:last").after("<div class='controls'><input type='text' class='control input-small number' name='tiempo[items][".concat(o,"][horas]' data-min='0' id='tiempo_horas_").concat(o,"' required='required'/><a href='#' data-rowindex='").concat(o,"' class='removenewformrow'><span class='icon-moon-cancel ui-state-error-text'></span></a></div>")),i()}).on("click",".removenewformrow",function(t){var e;return e=$(this).data("rowindex"),bootbox.confirm("Â¿Esta seguro de querer borrar este registro?","Cancelar","Aceptar",function(t){if(t){return $("#tiempo_tipo_".concat(e,",#tiempo_proyecto_").concat(e,",#tiempo_horas_").concat(e)).closest(".controls").remove(),i()}})}),$(function(){return $("#btn-weekpicker-cancel").on("click",function(){return $("#tiempo_week").val("")}),$("#btn-weekpicker-save").on("click",function(){return $("#modal-weekpicker").modal("hide")}),$("#weekpicker").weekpicker({maxDate:"t",currentText:$("#tiempo_week").data("currentday"),onSelect:function(t,e,o,i,a){var r,n,c;return r=Date.create(o.getTime()),n=Date.create(i.getTime()),$("#tiempo_week").val("".concat(r.format("{year}-{MM}-{dd}"),"|").concat(n.format("{year}-{MM}-{dd}"))),c=r.format("{MM}")===n.format("{MM}")?"".concat(r.format("{Mon} {d}")," - ").concat(n.format("{d}")):"".concat(r.format("{Mon} {d}")," - ").concat(n.format("{Mon} {d}")),$("#tiempo_week_selected").html(c)}}),""===$("#tiempo_week").val()&&$("#weekpicker  .ui-datepicker-current-day").click(),$("body").on("click",".btn-editweek",function(){var c;if(!$(this).hasClass("has-weekpicker")){return c=$(this).closest("td").find(".weekpicker-edit").get(0),$(c).weekpicker({maxDate:"t",currentText:$(c).data("currentday"),onSelect:function(t,e,o,i,a){var r,n;return r=Date.create(o.getTime()),n=Date.create(i.getTime()),$(c).next().val("".concat(r.format("{year}-{MM}-{dd}"),"|").concat(n.format("{year}-{MM}-{dd}")))}}),$(this).addClass("has-weekpicker")}}),i()})}).call(void 0);