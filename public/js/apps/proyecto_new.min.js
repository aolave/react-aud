"use strict";(function(){var i,t;i=function(e){$(".hideable").hide().addClass("hide").removeClass("error"),$(".hideable").find(".errors").remove(),$(".hideable").closest("form").validate(),$(".hideable").find(":input").each(function(){return $(this).rules("remove","required")}),e&&($(e).show().removeClass("hide"),0<$(e).find(":input").length&&$(e).find(":input").each(function(){return $(this).rules("add","required")}))},$("body").on("change",".sf_admin_form_field_source :radio",function(){var e;switch($("#button-style-inline li").removeClass("active"),e=$(".sf_admin_form_field_source :radio:checked").val(),$(this).parent("li").addClass("active"),e){case"n":return i(".sf_admin_form_field_id_master_data");case"c":return i(".sf_admin_form_field_id_parent");case"r":return i(".sf_admin_form_field_id_parent_replication")}}),$("#proyecto_admin-quickform-modal").on("change",".hideable",function(){return $("#proyecto_admin-quickform-modal .hideable.hide :checked").removeAttr("checked")}),$("body").on("click","#btn-toggle-newcliente",function(e){return e.preventDefault(),$(".cliente_row").hasClass("hide")?($(".cliente_row").removeClass("hide"),$(".cliente_row:first").parent().show(),$("#proyecto_id_cliente").attr("disabled","disabled")):($(".cliente_row").addClass("hide"),$(".cliente_row:first").parent().hide(),$("#proyecto_id_cliente").removeAttr("disabled")),$("#proyecto_id_cliente").change()}),t=function(e){return $(".sf_admin_form_field_id_parent_replication .controls").html(e)},$(function(){return $(".sf_admin_form_field_source :radio:first").trigger("change"),$("body").on("change","#proyecto_id_cliente",function(){var e;return""!==(e=$(this).val())?(t('<span class="ajax-loader-snake"></span> Espere... Buscando proyectos a replicar...'),$3C.ajaxGet("proyecto/findLastByCliente/action",{id_cliente:e},function(e){var i;return e.response?(i='<table class="table">\n  <thead><tr><th style="width:80px"></th><th>Proyecto</th><th>Año auditado</th><th>Líder</th></tr></thead>\n  <tbody>\n    <tr>\n      <td><input name="proyecto[id_parent_replication]" type="radio" value="'.concat(e.response.id,'"  id="proyecto_id_parent_replication_').concat(e.response.id,'"></td>\n      <td><label for="proyecto_id_parent_replication_1">').concat(e.response.name,"</label></td>\n      <td>").concat(e.response.ano_auditado,"</td>\n      <td>").concat(e.response.UsuarioGerente.first_name," ").concat(e.response.UsuarioGerente.last_name," (").concat(e.response.UsuarioGerente.sigla,")</td>\n    </tr>\n  </tbody>\n</table>"),t(i),"r"===$(".sf_admin_form_field_source :radio:checked").val()?$(".sf_admin_form_field_id_parent_replication").find(":input").each(function(){return $(this).rules("add","required")}):void 0):t('<div class="alert alert-block alert-error _a-center">0 proyectos</div>')})):t('<div class="alert alert-block alert-error _a-center">Seleccione un cliente primero</div>')}),$("#proyecto_id_cliente").change(),$(".radio_list.form-inline").attr("id","button-style-inline"),$(".sf_admin_form_field_source .radio_list.form-inline li").addClass("btn"),$(".sf_admin_form_field_source .radio_list.form-inline li:first-child").prepend("<span class='icon-moon-document-alt-fill'></span>"),$(".sf_admin_form_field_source .radio_list.form-inline li:nth-child(2), .radio_list.form-inline li:last-child").prepend("<span class='icon-moon-copy-3'></span>")}),$.validator.addMethod("globalReplication",function(e){return"r"!==$(".sf_admin_form_field_source :radio:checked").val()?($(".sf_admin_form_field_id_cliente").removeClass("error").find(".errors").remove(),!0):0===$(".sf_admin_form_field_id_parent_replication .controls :checked").length?this.errorList.push({message:"Debe seleccionar un cliente con un proyecto a replicar.",element:document.getElementById("proyecto_id_cliente")}):void 0}),$.validator.addMethod("globalCliente",function(e){if($("#proyecto_id_cliente").is(":disabled")){if(""===_.str.trim($("#proyecto_cliente_name").val())&&this.errorList.push({message:"Debe ingresar el nombre del nuevo cliente.",element:document.getElementById("proyecto_cliente_name")}),""===_.str.trim($("#proyecto_cliente_nit").val())){return this.errorList.push({message:"Debe ingresar el numero de identificacion del nuevo cliente.",element:document.getElementById("proyecto_cliente_nit")})}}else if(!$("#proyecto_id_cliente").val()){return this.errorList.push({message:'Debe seleccionar un cliente o dar clic en el boton "Nuevo Cliente" e ingresar los datos del nuevo cliente.',element:document.getElementById("proyecto_id_cliente")})}})}).call(void 0);
//# sourceMappingURL=http://auditbrain.local/js/apps/proyecto_new.min.js.map
