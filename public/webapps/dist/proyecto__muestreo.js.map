{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/global/ButtonEdit.tsx","webpack:///./src/global/EditorPreview.tsx","webpack:///./src/global/InputAutoNumeric.tsx","webpack:///./src/global/Tooltip.tsx","webpack:///./src/proyecto__hoja_trabajo/Attachments.tsx","webpack:///./src/proyecto__muestreo/App.tsx","webpack:///./src/proyecto__muestreo/AppMuestreoMas.tsx","webpack:///./src/proyecto__muestreo/AppMuestreoMum.tsx","webpack:///./src/proyecto__muestreo/TableMuestra.tsx","webpack:///./src/proyecto__muestreo/index.tsx","webpack:///./src/proyecto__muestreo/utils_mas.ts","webpack:///./src/proyecto__muestreo/utils_mum.ts","webpack:///./src/proyecto__muestreo/utis.ts","webpack:///external \"React\"","webpack:///external \"ReactDOM\""],"names":[],"mappings":"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","file":"proyecto__muestreo.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"proyecto__muestreo\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonpwebpackLibs\"] = window[\"webpackJsonpwebpackLibs\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./src/proyecto__muestreo/index.tsx\",\"vendors~proyecto__muestreo\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import Button from 'semantic-ui-react/dist/commonjs/elements/Button'\r\nimport Icon from 'semantic-ui-react/dist/commonjs/elements/Icon/Icon'\r\nimport cx from 'classnames'\r\n\r\nconst ButtonEdit = (props: any) => {\r\n  let { children, ...buttonProps } = props\r\n  buttonProps.className = cx(buttonProps.className, 'action')\r\n  buttonProps = { icon: true, basic: true, compact: true, size: 'mini', title: 'Editar', ...buttonProps }\r\n\r\n  if (typeof children == 'undefined') {\r\n    children = <Icon name='pencil square' color='green' size='large' />\r\n  }\r\n\r\n  return (\r\n    <Button {...buttonProps} type='button'>\r\n      {children}\r\n    </Button>\r\n  )\r\n}\r\n\r\nexport default ButtonEdit\r\n","import { PureComponent, Fragment, createRef, SyntheticEvent } from 'react'\r\n\r\nimport Modal from 'semantic-ui-react/dist/commonjs/modules/Modal/Modal'\r\n\r\nimport { instance as eventStack } from '@semantic-ui-react/event-stack'\r\nimport keyboardKey from 'keyboard-key'\r\nimport CKeditor from 'ckeditor4-react'\r\nimport cx from 'classnames'\r\n\r\nimport ButtonEdit from './ButtonEdit'\r\nimport { AttachmentListPanel, cleanAttachmentFrom } from '../proyecto__hoja_trabajo/Attachments'\r\n\r\ndeclare var app: any\r\n\r\nconst CKEDITOR_OPTIONS: any = {\r\n  basic: {\r\n    height: 150,\r\n    toolbar: [\r\n      { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ], items: [ 'Bold', 'Italic' ] },\r\n      {\r\n        name: 'paragraph',\r\n        groups: [ 'list', 'indent', 'blocks', 'align', 'bidi' ],\r\n        items: [ 'NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'TextColor' ]\r\n      }\r\n    ],\r\n    autoParagraph: false,\r\n    removePlugins: 'elementspath, uploadfile, uploadfileab, resize',\r\n    extraPlugins: 'openlink'\r\n  }\r\n}\r\n\r\nexport default class EditorPreview extends PureComponent<EditorPreviewProps, EditorPreviewState> {\r\n  private ckeditorComp: React.RefObject<CKeditorComp>\r\n\r\n  private previewRef = createRef<HTMLDivElement>()\r\n\r\n  private autosaveId: NodeJS.Timeout\r\n\r\n  static AUTOSAVE_DELAY: number = 60\r\n\r\n  static defaultProps = {\r\n    open: false,\r\n    autosave: false,\r\n    required: false,\r\n    editable: true,\r\n    openOnClickPreview: true,\r\n    ckeditorOptions: {}\r\n  }\r\n\r\n  constructor(props: EditorPreviewProps) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      isModalEditOpen: this.props.open,\r\n      isAutosaving: false,\r\n      isLoading: true,\r\n      attachments: null,\r\n      isLoadingAttachments: false\r\n    }\r\n  }\r\n\r\n  handleEscape = (e: Event) => {\r\n    if (keyboardKey.getCode(e) !== keyboardKey.Escape) return\r\n\r\n    if (typeof CKEDITOR !== 'undefined' && CKEDITOR.dialog.getCurrent() != null) {\r\n      // si existe un CKEditor dialog abierto, no cerrar el modal.\r\n      return\r\n    }\r\n\r\n    this.onClose()\r\n  }\r\n\r\n  onChange = () => {\r\n    if (this.props.inline) {\r\n      this.props.onSave((this.ckeditorComp as any).editor, false, false)\r\n    }\r\n\r\n    if (!this.props.autosave) {\r\n      return\r\n    }\r\n\r\n    if (!this.autosaveId) {\r\n      this.autosaveId = setTimeout(this.autosave, EditorPreview.AUTOSAVE_DELAY * 1000)\r\n    }\r\n  }\r\n\r\n  onClickEdit = (ev: SyntheticEvent) => {\r\n    ev.preventDefault()\r\n    this.setState({ isModalEditOpen: true, isLoading: true })\r\n  }\r\n\r\n  onSave = () => {\r\n    if (this.autosaveId) {\r\n      clearTimeout(this.autosaveId)\r\n      this.autosaveId = null\r\n    }\r\n\r\n    if ($.isFunction(this.props.onSave)) {\r\n      this.props.onSave((this.ckeditorComp as any).editor, true, false, () => {\r\n        this.setState({ isAutosaving: false })\r\n        this.fetchAttachments()\r\n      })\r\n\r\n      this.setState({ isModalEditOpen: false })\r\n    } else {\r\n      this.setState({ isModalEditOpen: false, isAutosaving: false })\r\n      this.fetchAttachments()\r\n    }\r\n  }\r\n\r\n  onCancel = () => {\r\n    this.setState({ isModalEditOpen: false })\r\n    if ($.isFunction(this.props.onClose)) {\r\n      this.props.onClose()\r\n    }\r\n  }\r\n\r\n  onClose = () => {\r\n    if (this.autosaveId) {\r\n      clearInterval(this.autosaveId)\r\n      this.autosaveId = null\r\n    }\r\n\r\n    this.setState({ isModalEditOpen: false })\r\n    if ($.isFunction(this.props.onClose)) {\r\n      this.props.onClose()\r\n    }\r\n  }\r\n\r\n  onModalMount = () => {\r\n    eventStack.sub('keydown', this.handleEscape, { pool: 'default' })\r\n\r\n    if (this.state.attachments == null) {\r\n      this.fetchAttachments()\r\n    }\r\n  }\r\n\r\n  autosave = () => {\r\n    this.setState({ isAutosaving: true })\r\n    let ckeditor = this.ckeditorComp as any\r\n    if (ckeditor != null) {\r\n      this.props.onSave(ckeditor.editor, false, true, () => this.setState({ isAutosaving: false }))\r\n      this.fetchAttachments()\r\n    }\r\n\r\n    if (this.autosaveId) {\r\n      clearInterval(this.autosaveId)\r\n      this.autosaveId = null\r\n    }\r\n  }\r\n\r\n  assertRequired() {\r\n    if (!this.props.editable) {\r\n      return false\r\n    }\r\n    if (!this.props.required) {\r\n      return false\r\n    }\r\n\r\n    const ckeditor = (this.ckeditorComp as any).editor\r\n\r\n    if (_.trim(ckeditor.getData()) != '') {\r\n      return false\r\n    }\r\n\r\n    bootbox.alert('Esta campo es requerido, por lo tanto no puede quedar vacío.')\r\n\r\n    return true\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps: EditorPreviewProps) {\r\n    if (nextProps.open && !this.state.isModalEditOpen) {\r\n      this.setState({ isModalEditOpen: true })\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    $(this.previewRef.current).find('a[href]').each(function() {\r\n      $(this).attr('target', '_blank')\r\n    })\r\n  }\r\n\r\n  onClickPreview = (ev: SyntheticEvent) => {\r\n    if (this.props.onClickPreview) {\r\n      this.props.onClickPreview(ev)\r\n    }\r\n\r\n    if (this.props.openOnClickPreview) {\r\n      this.setState({ isModalEditOpen: true })\r\n    }\r\n  }\r\n\r\n  parseCkeditorOptions() {\r\n    let { ckeditorOptions } = this.props\r\n\r\n    if (typeof ckeditorOptions == 'string') {\r\n      ckeditorOptions = CKEDITOR_OPTIONS[ckeditorOptions]\r\n    }\r\n\r\n    if (typeof this.props.ckeditorUploadOptions !== 'undefined') {\r\n      const defaultUrl = 'proyecto/' + app.vars.idproyecto + '/adjunto/upload'\r\n      const { url = defaultUrl, model, modelId } = this.props.ckeditorUploadOptions\r\n\r\n      if (modelId === null || modelId === undefined) {\r\n        ckeditorOptions.removePlugins = 'elementspath,uploadimage,pastebase64,uploadfile,uploadfileab'\r\n      } else {\r\n        ckeditorOptions.uploadUrl = url_for(`${url}?model=${model}&model_id=${modelId}`)\r\n        ckeditorOptions.imageUploadUrl = url_for(`${url}?model=${model}&model_id=${modelId}`)\r\n        ckeditorOptions.filebrowserUploadUrl = url_for(`${url}?model=${model}&model_id=${modelId}&n=attachment`)\r\n      }\r\n    }\r\n\r\n    return ckeditorOptions\r\n  }\r\n\r\n  fetchAttachments() {\r\n    if (typeof this.props.ckeditorUploadOptions === 'undefined') {\r\n      return\r\n    }\r\n\r\n    const { model, modelId } = this.props.ckeditorUploadOptions\r\n\r\n    this.setState({ isLoadingAttachments: true })\r\n    $.getJSON(url_for(`proyecto/${app.vars.idproyecto}/adjunto/json`), {\r\n      model: model,\r\n      model_id: modelId\r\n    }).done((res) => {\r\n      this.setState({ attachments: res.response, isLoadingAttachments: false })\r\n    })\r\n  }\r\n\r\n  onUpdateAttachment = () => {\r\n    this.fetchAttachments()\r\n  }\r\n\r\n  onDeleteAttachment = (adjunto: ProyectoAttachment, cb: () => void) => {\r\n    this.setState({ isLoadingAttachments: true })\r\n\r\n    const data = cleanAttachmentFrom(this.props.data, adjunto)\r\n\r\n    if ($.isFunction(cb)) {\r\n      cb()\r\n    }\r\n\r\n    let ckeditor: { editor: CKEDITOR.editor } = this.ckeditorComp as any\r\n    if (ckeditor) {\r\n      ckeditor.editor.setData(data)\r\n      this.autosave()\r\n    }\r\n  }\r\n\r\n  getCkeditorOptions() {\r\n    const self = this\r\n\r\n    let ckeditorOptions = Object.assign(\r\n      {\r\n        height: 200,\r\n        toolbar: [\r\n          { name: 'clipboard', items: [ 'Cut', 'Copy', 'Paste', '-', 'Undo', 'Redo' ] },\r\n          { name: 'links', items: [ 'Link', 'pasolink', 'muestreolink', 'Attachments' ] },\r\n          { name: 'insert', items: [ 'Table', 'SpecialChar' ] },\r\n          { name: 'tools', items: [ 'Maximize' ] },\r\n          { name: 'basicstyles', items: [ 'Bold', 'Italic', 'Underline' ] },\r\n          {\r\n            name: 'paragraph',\r\n            items: [\r\n              'NumberedList',\r\n              'BulletedList',\r\n              '-',\r\n              'Outdent',\r\n              'Indent',\r\n              '-',\r\n              'JustifyLeft',\r\n              'JustifyCenter',\r\n              'JustifyRight',\r\n              'JustifyBlock',\r\n              '-',\r\n              'TextColor'\r\n            ]\r\n          },\r\n          { name: 'styles', items: [ 'Styles', 'Format' ] }\r\n        ],\r\n        autoParagraph: false,\r\n        enterMode: CKEDITOR.ENTER_BR,\r\n        removePlugins: 'elementspath',\r\n        extraPlugins:\r\n          'uploadimage,pastebase64,uploadfileab,openlink,attach,justify,colorbutton,pastefromexcel,colordialog,pasolink',\r\n        openlink_modifier: 0,\r\n        onAttachmentUpload: function(response: string, editor: CKEDITOR.editor) {\r\n          response = response\r\n            .replace('<pre>', '')\r\n            .replace('<pre style=\"word-wrap: break-word; white-space: pre-wrap;\">', '')\r\n            .replace('</pre>', '')\r\n          var rs = JSON.parse(response)\r\n          console.log(rs)\r\n          _.forEach(rs, function(r) {\r\n            if (r.uploaded) {\r\n              editor.insertHtml(\r\n                \"<a href='\" + r.url + \"' target='_blank' class='proyecto-attachment' >\" + r.fileName + '</a><br> '\r\n              )\r\n            } else {\r\n              alert(r.error)\r\n            }\r\n          })\r\n          CKEDITOR.dialog.getCurrent().hide()\r\n          if (self.props.onUpload) {\r\n            self.props.onUpload()\r\n          }\r\n          self.fetchAttachments()\r\n          const ckeditor_comp = self.ckeditorComp as any\r\n          if (ckeditor_comp) {\r\n            self.props.onSave(ckeditor_comp.editor, false, false)\r\n          }\r\n        }\r\n      },\r\n      this.parseCkeditorOptions()\r\n    )\r\n\r\n    ckeditorOptions.on = Object.assign(\r\n      {\r\n        fileUploadRequest: function(ev: any) {\r\n          const loader = ev.data.fileLoader\r\n          loader.on('abort', function() {\r\n            $.unblockUI()\r\n          })\r\n          loader.on('error', function() {\r\n            console.log(loader)\r\n            $.unblockUI()\r\n          })\r\n          $.blockUI({\r\n            message:\r\n              '<div class=\"ajax-loader-snake-32  _a-center\"></div><h3 class=\"loading-block-text\">Cargando archivo al servidor.<br> Por favor Espere ...</h3>'\r\n          })\r\n        },\r\n        fileUploadResponse: function() {\r\n          $.unblockUI()\r\n          this.fire('change')\r\n        },\r\n        paste: (evt: any) => {\r\n          evt.data.dataValue = evt.data.dataValue.replace(/(min-)?width:.+?;/g, '') // remove width\r\n        }\r\n      },\r\n      ckeditorOptions.on || {}\r\n    )\r\n\r\n    return ckeditorOptions\r\n  }\r\n\r\n  renderFooter() {\r\n    const { footer } = this.props\r\n\r\n    if (footer === 'AttachmentList') {\r\n      return (\r\n        <AttachmentListPanel\r\n          isLoading={this.state.isLoadingAttachments}\r\n          attachments={this.state.attachments}\r\n          onUpdateItem={this.onUpdateAttachment}\r\n          onDeleteItem={this.onDeleteAttachment}\r\n        />\r\n      )\r\n    }\r\n\r\n    return footer\r\n  }\r\n\r\n  renderModal() {\r\n    if (!this.state.isModalEditOpen) {\r\n      return\r\n    }\r\n\r\n    let classNames = cx([ 'editor-preview-modal', this.props.className ? this.props.className + '-modal' : false ])\r\n\r\n    return (\r\n      <Modal\r\n        className={classNames}\r\n        open\r\n        closeIcon\r\n        closeOnDimmerClick={false}\r\n        dimmer='inverted'\r\n        onClose={this.onClose}\r\n        closeOnEscape={false}\r\n        onMount={this.onModalMount}\r\n        size='large'\r\n      >\r\n        <Modal.Content>{this.renderEditor()}</Modal.Content>\r\n        {this.props.editable ? (\r\n          <Modal.Actions>\r\n            {this.props.leftActions}\r\n            <button className='ui button negative' onClick={this.onCancel}>\r\n              Cancelar\r\n            </button>\r\n            <button className='ui button primary' onClick={this.onSave}>\r\n              Guardar\r\n            </button>\r\n          </Modal.Actions>\r\n        ) : (\r\n          <Modal.Actions>\r\n            {this.props.leftActions}\r\n            <button className='ui button negative' onClick={this.onCancel}>\r\n              Cerrar\r\n            </button>\r\n          </Modal.Actions>\r\n        )}\r\n      </Modal>\r\n    )\r\n  }\r\n\r\n  renderEditor() {\r\n    let label\r\n    if (this.props.label || this.props.labelTitle) {\r\n      label =\r\n        '<div class=\"editor-label\"> <strong class=\"editor-label-title\">' +\r\n        (this.props.labelTitle || '') +\r\n        '</strong> ' +\r\n        (this.props.label || '') +\r\n        ' </div>'\r\n    }\r\n\r\n    return (\r\n      <Fragment>\r\n        {label && <div dangerouslySetInnerHTML={{ __html: label }} />}\r\n        <div style={{ minHeight: '200px' }}>\r\n          <div className='loading'>\r\n            <div className={this.state.isAutosaving ? '' : 'ui-helper-hidden'}>\r\n              <span className='ajax-loader-snake' /> Guardando...\r\n            </div>\r\n          </div>\r\n          <div className={cx('ui dimmer inverted', { active: this.state.isLoading })}>\r\n            <div className='ui loader'>Cargando...</div>\r\n          </div>\r\n          <CKeditor\r\n            ref={(c: React.RefObject<CKeditorComp>) => (this.ckeditorComp = c)}\r\n            data={this.props.data}\r\n            config={this.getCkeditorOptions()}\r\n            onChange={this.onChange}\r\n            onInstanceReady={() => this.setState({ isLoading: false })}\r\n            readOnly={!this.props.editable}\r\n          />\r\n        </div>\r\n        {this.renderFooter()}\r\n      </Fragment>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    if (this.props.inline) {\r\n      return <div className='editor-inline'> {this.renderEditor()}</div>\r\n    }\r\n\r\n    let preview = this.props.preview == null ? this.props.data || '' : this.props.preview\r\n\r\n    let classNames = cx([ 'editor-preview', this.props.className, preview ? 'text-non-empty' : 'text-empty' ])\r\n\r\n    if (this.props.prefixPreview) {\r\n      preview = '<strong class=\"editor-preview-title\" >' + this.props.prefixPreview + '</strong> ' + preview\r\n    }\r\n\r\n    preview = preview.replace(/(min-)?width:.+?;/g, '')\r\n\r\n    return (\r\n      <Fragment>\r\n        <div className={cx('editor-preview-wrapper', this.props.wrapperClassName)} onClick={this.onClickPreview}>\r\n          <div\r\n            ref={this.previewRef}\r\n            className={classNames}\r\n            dangerouslySetInnerHTML={{ __html: preview }}\r\n            style={this.props.previewStyle}\r\n          />\r\n          {this.props.editable && (\r\n            <div className='action-list'>\r\n              <ButtonEdit onClick={this.onClickEdit} />\r\n            </div>\r\n          )}\r\n        </div>\r\n        {this.renderModal()}\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n","import ReactNumeric from 'react-numeric'\r\nimport AutoNumeric from 'autonumeric'\r\n\r\nconst defaultProps = {\r\n  decimalPlaces: 2,\r\n  decimalCharacter: ',',\r\n  decimalCharacterAlternative: '.',\r\n  digitGroupSeparator: '.',\r\n  allowDecimalPadding: false,\r\n  selectOnFocus: false\r\n}\r\n\r\nexport default function InputAutoNumeric(props: any) {\r\n  props = Object.assign({}, props, defaultProps)\r\n\r\n  if (typeof props.value != 'undefined' && _.size(props.value) > 0) {\r\n    props.value = +props.value\r\n  }\r\n\r\n  if (typeof props.isEditable == 'undefined' || props.isEditable) {\r\n    return <ReactNumeric {...props} />\r\n  } else {\r\n    return <span className='autonumeric non-editable value'>{AutoNumeric.format(props.value, props)}</span>\r\n  }\r\n}\r\n","import { SFC, ReactNode } from 'react'\r\n\r\nimport Popup from 'semantic-ui-react/dist/commonjs/modules/Popup/Popup'\r\nimport Icon from 'semantic-ui-react/dist/commonjs/elements/Icon/Icon'\r\nimport { SemanticCOLORS } from 'semantic-ui-react/dist/commonjs/generic'\r\nimport getvalue from 'get-value'\r\n\r\ndeclare var app: any\r\n\r\ntype TooltipProps = {\r\n  title?: string\r\n  text: string | ReactNode\r\n  wide?: boolean | 'very'\r\n  iconColor?: SemanticCOLORS\r\n  iconSize?: 'mini' | 'tiny' | 'small' | 'large' | 'big' | 'huge' | 'massive'\r\n}\r\n\r\nexport const GenericTooltip: SFC<TooltipProps> = (props): JSX.Element => {\r\n  let content\r\n  if (typeof props.text == 'object') {\r\n    content = <div className='content'>{props.text}</div>\r\n  } else if (typeof props.text == 'string') {\r\n    if (props.text.substr(0, 1) == '@') {\r\n      content = getvalue(app.vars.texts, props.text.substr(1))\r\n    } else {\r\n      content = props.text\r\n    }\r\n\r\n    if (!content) {\r\n      return null\r\n    }\r\n\r\n    content = <div dangerouslySetInnerHTML={{ __html: content }} />\r\n  }\r\n\r\n  return (\r\n    <Popup\r\n      size='tiny'\r\n      wide={props.wide}\r\n      trigger={<Icon color={props.iconColor} size={props.iconSize} name='question circle' className='tooltip-icon' />}\r\n      header={props.title}\r\n      content={content}\r\n    />\r\n  )\r\n}\r\n\r\nGenericTooltip.defaultProps = {\r\n  iconColor: 'blue',\r\n  iconSize: 'small',\r\n  wide: false\r\n}\r\n","import { Component } from 'react'\r\n\r\nimport Icon from 'semantic-ui-react/dist/commonjs/elements/Icon'\r\nimport Label from 'semantic-ui-react/dist/commonjs/elements/Label'\r\nimport List from 'semantic-ui-react/dist/commonjs/elements/List'\r\nimport Popup from 'semantic-ui-react/dist/commonjs/modules/Popup'\r\nimport Dimmer from 'semantic-ui-react/dist/commonjs/modules/Dimmer/Dimmer'\r\nimport Loader from 'semantic-ui-react/dist/commonjs/elements/Loader/Loader'\r\n\r\nexport class AttachmentListItem extends Component<AttachmentListItemProps> {\r\n  private static getFileExtension(filename: string): string {\r\n    return filename.split('.').pop()\r\n  }\r\n\r\n  private static getFileIconUrl(file: string): string {\r\n    const extension = AttachmentListItem.getFileExtension(file)\r\n\r\n    const file_icon = function() {\r\n      switch (extension) {\r\n        case 'xls':\r\n        case 'xlsx':\r\n        case 'xlsm':\r\n        case 'xlsxm':\r\n          return 'excel'\r\n        case 'doc':\r\n        case 'docx':\r\n          return 'word'\r\n        case 'pdf':\r\n          return 'pdf'\r\n        case 'png':\r\n        case 'jpg':\r\n        case 'jpeg':\r\n        case 'bmp':\r\n        case 'gif':\r\n          return 'image'\r\n        case 'zip':\r\n        case 'rar':\r\n          return 'zip'\r\n        default:\r\n          return 'default'\r\n      }\r\n    }\r\n\r\n    return public_path(`images/file_icons/${file_icon()}.png`)\r\n  }\r\n\r\n  changeStatus(e: React.SyntheticEvent, status: 'completado' | 'revisado') {\r\n    e.preventDefault()\r\n\r\n    const url: string = url_for(\r\n      `proyecto/${this.props.attachment.id_proyecto}/adjunto/${this.props.attachment.id}/${status}`\r\n    )\r\n    $.blockUI({\r\n      message:\r\n        '<div class=\"ajax-loader-snake-32  _a-center\"></div><h3 class=\"loading-block-text\">Marcando archivo como ' +\r\n        _.str.capitalize(status) +\r\n        '.<br> Por favor Espere ...</h3>'\r\n    })\r\n\r\n    $.ajax(url, { type: 'POST', data: {}, dataType: 'json' })\r\n      .done((res) => {\r\n        this.props.onUpdate(res.response.record)\r\n        $.unblockUI()\r\n      })\r\n      .fail(() => {\r\n        $.pnotify({ text: 'El archivo no pudo ser actualizado.', type: 'error' })\r\n        $.unblockUI()\r\n      })\r\n  }\r\n\r\n  onRemove = (ev: React.SyntheticEvent) => {\r\n    ev.preventDefault()\r\n\r\n    const url: string = url_for(\r\n      `proyecto/${this.props.attachment.id_proyecto}/adjunto/${this.props.attachment.id}/remove`\r\n    )\r\n    bootbox.warningConfirm(\r\n      '¿Esta seguro de querer borrar este archivo?<br><br>Tenga en cuenta que el sistema intentará borrar automáticamente los enlaces existentes a este archivo.',\r\n      'Cancelar',\r\n      'Aceptar',\r\n      (r) => {\r\n        if (r) {\r\n          $.blockUI({\r\n            message:\r\n              '<div class=\"ajax-loader-snake-32  _a-center\"></div><h3 class=\"loading-block-text\">Borrando archivo.<br> Por favor Espere ...</h3>'\r\n          })\r\n          $.ajax(url, { type: 'POST', data: {}, dataType: 'json' })\r\n            .done(() => {\r\n              this.props.onDelete(this.props.attachment, () => $.unblockUI())\r\n            })\r\n            .fail(() => {\r\n              $.pnotify({ text: 'El archivo no pudo ser borrado.', type: 'error' })\r\n              $.unblockUI()\r\n            })\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const { attachment } = this.props\r\n\r\n    let completadoComp\r\n    if (attachment.fecha_completado) {\r\n      completadoComp = (\r\n        <div style={{ display: 'inline-block' }}>\r\n          <strong className='title'>(P) </strong>\r\n          <div\r\n            style={{ display: 'inline-block', minWidth: 20, textAlign: 'center', marginRight: 2 }}\r\n            title={`Preparado por: ${attachment.UpdateLog[0].User.name}`}\r\n          >\r\n            {attachment.UpdateLog[0].User.sigla}&nbsp;\r\n          </div>\r\n          <div style={{ display: 'inline-block' }} title={attachment.fecha_completado}>\r\n            <span className='icon-moon-calendar' />{' '}\r\n            {Date.create(attachment.fecha_completado).format('{year}-{MM}-{dd}')}\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    let revisadoComp\r\n    if (attachment.fecha_revisado) {\r\n      revisadoComp = (\r\n        <div style={{ display: 'inline-block' }}>\r\n          <strong className='title'>(R) </strong>\r\n          <div\r\n            style={{ display: 'inline-block', minWidth: 20, textAlign: 'center', marginRight: 2 }}\r\n            title={`Revisado por: ${attachment.RevisionLog[0].User.name}`}\r\n          >\r\n            {attachment.RevisionLog[0].User.sigla}&nbsp;\r\n          </div>\r\n          <div style={{ display: 'inline-block' }} title={attachment.fecha_revisado}>\r\n            <span className='icon-moon-calendar' /> {Date.create(attachment.fecha_revisado).format('{year}-{MM}-{dd}')}\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    let revisadoLink\r\n    if (user_has_role([ 'PM', 'SR' ])) {\r\n      if (attachment.fecha_completado) {\r\n        revisadoLink = (\r\n          <button style={{ marginLeft: '8px' }} onClick={(e) => this.changeStatus(e, 'revisado')} className='act'>\r\n            <span className='icon-moon-checkmark-8' /> Revisar\r\n          </button>\r\n        )\r\n      } else {\r\n        revisadoLink = (\r\n          <Popup\r\n            trigger={\r\n              <div className='button-wrapper'>\r\n                <button style={{ marginLeft: '8px' }} className='act disabled'>\r\n                  <span className='icon-moon-checkmark-8' /> Revisar\r\n                </button>\r\n              </div>\r\n            }\r\n            content='Esta archivo adjunto debe estar primero en estado COMPLETADO, para poder ser marcado como REVISADO'\r\n            header='Marcar como Revisado | Opción deshabilitada'\r\n            className='disable-text'\r\n            on='hover'\r\n          />\r\n        )\r\n      }\r\n    }\r\n\r\n    return (\r\n      <li key={attachment.id} style={{ marginBottom: 2 }}>\r\n        <div style={{ background: '#f5f9f8', borderRadius: 6, border: '1px solid #aecec7' }}>\r\n          <div className='col-md-1' style={{ marginTop: 5, borderRight: '1px inset #d7e1e2' }}>\r\n            <img src={AttachmentListItem.getFileIconUrl(attachment.filename)} alt='Icono' />\r\n          </div>\r\n          <div className='col-md-11' style={{ padding: '3px 10px' }}>\r\n            <div\r\n              className='noqtip'\r\n              title={attachment.filename}\r\n              style={{\r\n                fontWeight: 'bold',\r\n                fontSize: '12px',\r\n                maxWidth: 400,\r\n                whiteSpace: 'nowrap',\r\n                overflow: 'hidden',\r\n                textOverflow: 'ellipsis'\r\n              }}\r\n            >\r\n              {attachment.filename}\r\n            </div>\r\n            <div style={{ fontSize: '12px' }}>\r\n              <span\r\n                style={{ fontStyle: 'italic' }}\r\n                className='noqtip'\r\n                title={`Peso del archivo: ${attachment.filesize_human}`}\r\n              >\r\n                {attachment.filesize_human}\r\n              </span>{' '}\r\n              |\r\n              <div className='attachment-actionsbar'>\r\n                <div className='section-a'>\r\n                  <a\r\n                    href={public_path(`uploads/proyecto_adjunto/${attachment.filepath}`)}\r\n                    target='_blank'\r\n                    className='act'\r\n                    style={{ color: '#777' }}\r\n                  >\r\n                    <span className='icon-moon-download' style={{ fontSize: '10px' }} /> Descargar\r\n                  </a>\r\n                </div>\r\n\r\n                {user_has_role([ 'PM', 'SR', 'JR' ]) && (\r\n                  <div className='section-a'>\r\n                    <a href='#' className='act' onClick={this.onRemove}>\r\n                      <span className='icon-tc-trash' /> Borrar\r\n                    </a>\r\n                  </div>\r\n                )}\r\n\r\n                <div className='section-a' style={{ minWidth: 90 }}>\r\n                  {attachment.fecha_completado ? (\r\n                    <Popup trigger={completadoComp} position='bottom center'>\r\n                      <Popup.Header content='Preparado por' />\r\n                      <Popup.Content>\r\n                        <table className='table nowrap'>\r\n                          <tbody>\r\n                            {attachment.UpdateLog.map((item, k) => {\r\n                              return (\r\n                                <tr key={k}>\r\n                                  <td>\r\n                                    <Icon name='user circle' color='green' /> {item.User.name} ({item.User.sigla})\r\n                                  </td>\r\n                                  <td>\r\n                                    <em>{Date.create(item.ts).format('{year}-{MM}-{dd}')}</em>\r\n                                  </td>\r\n                                </tr>\r\n                              )\r\n                            })}\r\n                          </tbody>\r\n                        </table>\r\n                      </Popup.Content>\r\n                    </Popup>\r\n                  ) : (\r\n                    user_has_role([ 'PM', 'SR', 'JR' ]) && (\r\n                      <button\r\n                        style={{ marginLeft: '8px' }}\r\n                        onClick={(e) => this.changeStatus(e, 'completado')}\r\n                        className='act'\r\n                      >\r\n                        <span className='icon-moon-checkmark-8' /> Completar\r\n                      </button>\r\n                    )\r\n                  )}\r\n                </div>\r\n\r\n                <div className='section-a'>\r\n                  {attachment.fecha_revisado && (\r\n                    <Popup trigger={revisadoComp} position='bottom center'>\r\n                      <Popup.Header content='Revisado por' />\r\n                      <Popup.Content>\r\n                        <table className='table nowrap'>\r\n                          <tbody>\r\n                            {attachment.RevisionLog.map((item, k) => {\r\n                              return (\r\n                                <tr key={k}>\r\n                                  <td>\r\n                                    <Icon name='user circle' color='olive' /> {item.User.name} ({item.User.sigla})\r\n                                  </td>\r\n                                  <td>\r\n                                    <em>{Date.create(item.ts).format('{year}-{MM}-{dd}')}</em>\r\n                                  </td>\r\n                                </tr>\r\n                              )\r\n                            })}\r\n                          </tbody>\r\n                        </table>\r\n                      </Popup.Content>\r\n                    </Popup>\r\n                  )}\r\n                  {revisadoLink}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div />\r\n          </div>\r\n          <div className='clearfix' />\r\n        </div>\r\n      </li>\r\n    )\r\n  }\r\n}\r\n\r\nexport class AttachmentListPanel extends Component<AttachmentListPanelProps> {\r\n  static defaultProps = {\r\n    isLoading: false\r\n  }\r\n  render() {\r\n    let { isLoading, attachments } = this.props\r\n\r\n    return (\r\n      <div className='attachment-list-panel dimmable' style={{ minHeight: 40 }}>\r\n        {isLoading && (\r\n          <Dimmer inverted active>\r\n            <Loader inverted active className='elastic grey' />\r\n          </Dimmer>\r\n        )}\r\n        <h3 className='panel-title'>\r\n          Adjuntos:\r\n          <Label circular color='green'>\r\n            {_.size(attachments)}\r\n          </Label>\r\n        </h3>\r\n        {_.size(attachments) > 0 && (\r\n          <List divided className='attachment-list'>\r\n            {_.map(attachments, (attachment: ProyectoAttachment, i) => {\r\n              return (\r\n                <AttachmentListItem\r\n                  key={attachment.id}\r\n                  attachment={attachment}\r\n                  onUpdate={this.props.onUpdateItem}\r\n                  onDelete={this.props.onDeleteItem}\r\n                />\r\n              )\r\n            })}\r\n          </List>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport function cleanAttachmentFrom(value: string, adjunto: ProyectoAttachment) {\r\n  const h = public_path(`uploads/proyecto_adjunto/${adjunto.filepath}`, true).replace(/\\./g, '.').replace(/\\\\/g, '/')\r\n  const t = '<a .*href=\"' + h + '\"(.+?)/a>\\\\s*(<br\\\\s?/?>)?'\r\n  const re = new RegExp(t, 'g')\r\n\r\n  return value.replace(re, '')\r\n}\r\n","import { PureComponent, Fragment, SyntheticEvent } from 'react'\r\nimport AppMuestreoMum from './AppMuestreoMum'\r\nimport AppMuestreoMas from './AppMuestreoMas'\r\n\r\ndeclare var app: any\r\n\r\ntype AppProps = {\r\n  data: any\r\n}\r\n\r\ntype AppState = {\r\n  type: MuestreoTipo\r\n}\r\n\r\nexport default class App extends PureComponent<AppProps, AppState> {\r\n  constructor(props: AppProps) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      type: props.data.config.type\r\n    }\r\n  }\r\n\r\n  selectType = (type: MuestreoTipo) => {\r\n    this.setState({ type })\r\n  }\r\n\r\n  renderSelect() {\r\n    return (\r\n      <Fragment>\r\n        <p>Dé click a continuación sobre el botón con el método de muestreo que desea utilizar.</p>\r\n        <div style={{ margin: 'auto', textAlign: 'center' }}>\r\n          <button onClick={() => this.selectType('mum')} className='btn btn-primary btn-large'>\r\n            Muestreo por Unidad Monetaria (MUM)\r\n          </button>\r\n          |\r\n          <button onClick={() => this.selectType('mas')} className='btn btn-primary btn-large'>\r\n            Muestreo Aleatorio Simple (MAS)\r\n          </button>\r\n        </div>\r\n        <div id='welcometip'>\r\n          <h3 id='welcometip-header'>\r\n            <span className='icon-moon-help' /> ¿Cual método de auditoría utilizar?\r\n          </h3>\r\n          <div id='welcometip-body'>\r\n            <h5 className='welcometip-subtitle'>Muestreo por Unidad Monetaria (MUM)</h5>\r\n            <p>\r\n              Método más usado en el muestreo de auditoría debido que selecciona principalmente los elementos con\r\n              valores más elevados. Orientado a las cifras.\r\n            </p>\r\n\r\n            <h5 className='welcometip-subtitle'>Muestreo Aleatorio Simple (MAS)</h5>\r\n            <p>\r\n              Método genérico apto para distintos tipos de población debido que las unidades de la muestra se\r\n              seleccionan aleatoriamente con probabilidades iguales. Orientado a los atributos.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </Fragment>\r\n    )\r\n  }\r\n\r\n  renderBody() {\r\n    if (this.state.type === 'mum') {\r\n      return <AppMuestreoMum data={this.props.data.config} />\r\n    } else if (this.state.type === 'mas') {\r\n      return <AppMuestreoMas data={this.props.data.config} />\r\n    } else {\r\n      return this.renderSelect()\r\n    }\r\n  }\r\n\r\n  renderTypeTitle() {\r\n    switch (this.state.type) {\r\n      case 'mum':\r\n        return (\r\n          <Fragment>\r\n            <strong>Tipo de Muestreo:</strong> MUM {this.renderSwitchTypeAction()}\r\n          </Fragment>\r\n        )\r\n      case 'mas':\r\n        return (\r\n          <Fragment>\r\n            <strong>Tipo de Muestreo:</strong> MAS {this.renderSwitchTypeAction()}\r\n          </Fragment>\r\n        )\r\n      default:\r\n        return null\r\n    }\r\n  }\r\n\r\n  renderSwitchTypeAction() {\r\n    let newType: MuestreoTipo\r\n    switch (this.state.type) {\r\n      case 'mas':\r\n        newType = 'mum'\r\n        break\r\n      case 'mum':\r\n        newType = 'mas'\r\n        break\r\n    }\r\n\r\n    const onClick = (ev: SyntheticEvent) => {\r\n      ev.preventDefault()\r\n      this.setState({ type: newType })\r\n\r\n      $.blockUI(create_blockUI_loading_message('Guardando cambios'))\r\n\r\n      $.post(url_for(`proyecto_muestreo/${app.vars.ID_MUESTREO}/config`), { type: newType }).done(() => {\r\n        $.unblockUI()\r\n      })\r\n    }\r\n\r\n    return (\r\n      <div className='pull-right sf_admin_td_actions'>\r\n        <div className='btn-group dropdown-modern'>\r\n          <a\r\n            className='btn btn-mini dropdown-toggle'\r\n            style={{ background: 'none', marginLeft: 10 }}\r\n            data-toggle='dropdown'\r\n            href='#'\r\n          >\r\n            <span className='icon-tc-ellipsis-v icon-large' style={{ verticalAlign: 'top' }} />\r\n          </a>\r\n\r\n          <ul className='dropdown-menu pull-right'>\r\n            <li>\r\n              <a href='#' onClick={onClick}>\r\n                Cambiar a {newType.toUpperCase()}\r\n              </a>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <header className='main-content-header'>\r\n          <span className='pull-right'>{this.renderTypeTitle()}</span>\r\n          <div className='pull-left'>\r\n            <span className='muestreo-title-name'>{this.props.data.name}</span>\r\n            {/* <StatusDivBlock status={this.props.data.status} /> */}\r\n            {/* <AuthorIconLogDefaultWrapper model={this.props.data} /> */}\r\n          </div>\r\n          <div className='clearfix' />\r\n        </header>\r\n        {this.renderBody()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { PureComponent, SyntheticEvent, Fragment } from 'react'\r\n\r\nimport cx from 'classnames'\r\nimport getvalue from 'get-value'\r\nimport { GenericTooltip } from '../global/Tooltip'\r\nimport EditorPreview from '../global/EditorPreview'\r\nimport { isEmpty, cacheMuestra, getCacheAllMuestra } from './utis'\r\nimport { TableMuestras, FormFichaTecnica } from './TableMuestra'\r\nimport { generarMuestras, calculateTamanoMuestra } from './utils_mas'\r\n\r\ndeclare var app: any\r\n\r\ntype AppMuestreoMasProps = {\r\n  data: any\r\n}\r\n\r\ntype AppMuestreoMasStateValueType = {\r\n  /** Nivel confianza */\r\n  Z: number\r\n  /** Porcentaje Error Tolerable */\r\n  E: number\r\n  /** Proporcion del Exito */\r\n  P: number\r\n  /** Tamaño de la muestra */\r\n  cf_1: number\r\n  /** Valor Error Tolerable */\r\n  Ev?: number\r\n\r\n  pry_1: number\r\n  pry_2: number\r\n  pry_3: 'SI' | 'NO'\r\n\r\n  conclusion_custom_mas: string\r\n}\r\n\r\ntype AppMuestreoMasState = {\r\n  step: number\r\n  values: AppMuestreoMasStateValueType\r\n  muestras: MuestraItem[]\r\n}\r\n\r\nexport default class AppMuestreoMas extends PureComponent<AppMuestreoMasProps, AppMuestreoMasState> {\r\n  private handlers: { [s: string]: any } = {}\r\n\r\n  private hasModified: boolean = false\r\n\r\n  constructor(props: AppMuestreoMasProps) {\r\n    super(props)\r\n\r\n    const muestras = getvalue(props.data, 'muestras.mas', null)\r\n\r\n    const Z = isEmpty(props.data.Z) ? 90 : parseFloat(props.data.Z)\r\n    const E = isEmpty(props.data.E) ? (muestras === null ? -1 : 5) : parseFloat(props.data.E)\r\n    const P = isEmpty(props.data.P) ? 0.9 : parseFloat(props.data.P)\r\n\r\n    const cf_1 = isEmpty(props.data.cf_1)\r\n      ? calculateTamanoMuestra(props.data.N, P, Z, this.getErrorTolerable(E))\r\n      : parseFloat(props.data.cf_1)\r\n\r\n    this.state = {\r\n      step: 1,\r\n      values: {\r\n        Z,\r\n        E,\r\n        P,\r\n        cf_1,\r\n        pry_1: props.data.pry_1,\r\n        pry_2: props.data.pry_2,\r\n        pry_3: props.data.pry_3,\r\n        Ev: props.data.Ev,\r\n        conclusion_custom_mas: props.data.conclusion_custom_mas || ''\r\n      },\r\n      muestras:\r\n        muestras == null\r\n          ? this.generarMuestras(cf_1)\r\n          : _.map(muestras, (muestra: MuestraItem) => {\r\n              if (!isEmpty(muestra.r)) {\r\n                muestra.r = parseFloat(muestra.r + '')\r\n              }\r\n              return muestra\r\n            })\r\n    }\r\n\r\n    if (muestras != null) {\r\n      _.forEach(muestras, (muestra) => cacheMuestra(muestra))\r\n    } else {\r\n      $.blockUI(create_blockUI_loading_message('Guardando cambios'))\r\n\r\n      this.sendToServer({\r\n        type: 'mas',\r\n        muestras: this.state.muestras,\r\n        fields: _.omit(this.state.values, [ 'conclusion_custom_mas' ])\r\n      }).done(() => {\r\n        $.unblockUI()\r\n      })\r\n    }\r\n  }\r\n\r\n  isReadOnly() {\r\n    return !!this.props.data.ficha_tecnica_mas_date\r\n  }\r\n\r\n  attachHandler(field: string, handler: any) {\r\n    if (!this.handlers[field]) {\r\n      this.handlers[field] = handler\r\n    }\r\n\r\n    return this.handlers[field]\r\n  }\r\n\r\n  getErrorTolerable(E: number) {\r\n    if (E == -1) {\r\n      const materialidad = parseFloat(getvalue(app, 'vars.muestreo.materialidad.total_planeacion', 0))\r\n      return 100 * materialidad / this.props.data.M\r\n    } else {\r\n      return E\r\n    }\r\n  }\r\n\r\n  generarMuestras(tamano_muestra: number) {\r\n    const muestras = generarMuestras(app.vars.muestras, tamano_muestra)\r\n    const cache = getCacheAllMuestra()\r\n    _.forEach(muestras, (muestra, k) => {\r\n      if (typeof cache[muestra.cod] != 'undefined') {\r\n        muestras[k].r = cache[muestra.cod]\r\n      }\r\n    })\r\n\r\n    return muestras\r\n  }\r\n\r\n  isValidToStep3() {\r\n    return _.all(this.state.muestras, (muestra) => muestra.r != null)\r\n  }\r\n\r\n  sendToServer(params: any) {\r\n    if (this.isReadOnly()) {\r\n      return\r\n    }\r\n\r\n    params.t = 'mas'\r\n    if (typeof params.fields !== 'undefined') {\r\n      params.fields = _.map(params.fields, (value, key) => {\r\n        return { field: key, value }\r\n      })\r\n    }\r\n    return $.post(url_for(`proyecto_muestreo/${app.vars.ID_MUESTREO}/config`), params)\r\n  }\r\n\r\n  onChangeSelect = (field: string) => {\r\n    return this.attachHandler(field, (ev: SyntheticEvent) => {\r\n      const value = (ev.target as any).value\r\n      this.setState((prevState) => {\r\n        const newValues: AppMuestreoMasStateValueType = Object.assign({}, prevState.values, {\r\n          [field]: parseFloat(value)\r\n        })\r\n\r\n        newValues.cf_1 = calculateTamanoMuestra(\r\n          this.props.data.N,\r\n          newValues.P,\r\n          newValues.Z,\r\n          this.getErrorTolerable(newValues.E)\r\n        )\r\n\r\n        newValues.Ev = this.getErrorTolerable(newValues.E) * this.props.data.M / 100\r\n\r\n        const muestras = this.generarMuestras(newValues.cf_1)\r\n\r\n        this.sendToServer({ muestras, fields: _.omit(newValues, [ 'conclusion_custom_mas' ]) })\r\n\r\n        return { values: newValues, muestras }\r\n      })\r\n    })\r\n  }\r\n\r\n  onChangeMuestra = (muestra: MuestraItem, persist: boolean) => {\r\n    if (this.isReadOnly()) {\r\n      return\r\n    }\r\n\r\n    const num = (num: any) => (isNaN(parseFloat(num)) ? 0 : parseFloat(num))\r\n\r\n    this.setState((prevState) => {\r\n      if (!this.hasModified) {\r\n        const prevValue = _.find(prevState.muestras, { cod: muestra.cod })\r\n        if (!_.isEqual(prevValue, muestra)) {\r\n          this.hasModified = true\r\n        }\r\n      }\r\n\r\n      const muestras = _.map(prevState.muestras, (_muestra) => {\r\n        return muestra.cod == _muestra.cod ? muestra : _muestra\r\n      })\r\n\r\n      if (!persist) {\r\n        return { muestras, values: prevState.values }\r\n      }\r\n\r\n      const values = { ...prevState.values }\r\n\r\n      let total_diff: number = 0\r\n      _.forEach(muestras, (muestra) => {\r\n        if (!isEmpty(muestra.v) && !isEmpty(muestra.r)) {\r\n          total_diff += muestra.v - muestra.r\r\n        }\r\n      })\r\n\r\n      const total_e = _.reduce(muestras, (acc: number, curr) => acc + num(curr.v), 0)\r\n\r\n      values.pry_1 = this.props.data.M * total_diff / total_e\r\n      values.pry_2 = 100 * values.pry_1 / this.props.data.M\r\n\r\n      const error_tolerable = this.getErrorTolerable(values.E)\r\n      const error_muestral: number = this.props.data.M * error_tolerable / 100\r\n\r\n      values.pry_3 = Math.abs(values.pry_1) > Math.abs(error_muestral) ? 'SI' : 'NO'\r\n\r\n      if (this.hasModified) {\r\n        this.sendToServer({ muestras, fields: _.omit(values, [ 'conclusion_custom_mas' ]) })\r\n        this.hasModified = false\r\n      }\r\n\r\n      return { muestras, values }\r\n    })\r\n    cacheMuestra(muestra)\r\n  }\r\n\r\n  onSaveConclusion = (editor: CKEDITOR.editor) => {\r\n    if (this.isReadOnly()) {\r\n      return\r\n    }\r\n\r\n    this.setState((prevState) => {\r\n      const values = { ...prevState.values }\r\n      values.conclusion_custom_mas = editor.getData()\r\n\r\n      this.sendToServer({ fields: { conclusion_custom: values.conclusion_custom_mas } })\r\n\r\n      return { values }\r\n    })\r\n  }\r\n\r\n  onClickNext = () => {\r\n    this.goToStep(this.state.step + 1)\r\n  }\r\n\r\n  onClickPrev = () => {\r\n    this.goToStep(this.state.step - 1)\r\n  }\r\n\r\n  goToStep = (step: number) => {\r\n    if (step == 3 && !this.isValidToStep3()) {\r\n      bootbox.alert(\r\n        'Debe ingresar el Valor según Auditoría de <u>TODAS</u> las operaciones de la muestra para continuar.'\r\n      )\r\n      return\r\n    }\r\n    this.setState({ step })\r\n  }\r\n\r\n  renderNavigation() {\r\n    const { step } = this.state\r\n    return (\r\n      <Fragment>\r\n        <nav className='nav-actions'>\r\n          {step > 1 && (\r\n            <button className='ui button primary left floated' onClick={this.onClickPrev}>\r\n              Anterior\r\n            </button>\r\n          )}\r\n          {step < 3 && (\r\n            <button className='ui button primary right floated' onClick={this.onClickNext}>\r\n              Siguiente\r\n            </button>\r\n          )}\r\n          <div className='clearfix' />\r\n        </nav>\r\n        {this.isReadOnly() && <FormFichaTecnica isReadOnly />}\r\n      </Fragment>\r\n    )\r\n  }\r\n\r\n  renderProgressBar() {\r\n    const progress = _.size(_.filter(this.state.muestras, (muestra) => !isEmpty(muestra.r)))\r\n    const total = _.size(this.state.muestras)\r\n\r\n    return (\r\n      <div className='ui grid'>\r\n        <div className='column fifteen wide'>\r\n          <div className='ui tiny green progress' data-percent={Math.floor(100 * progress / total)}>\r\n            <div className='bar' style={{ width: `${Math.floor(100 * progress / total)}%` }}>\r\n              <div className='progress' />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className='column one wide' style={{ fontSize: 12, padding: 8 }}>\r\n          {progress} / {total}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  renderStepContent() {\r\n    switch (this.state.step) {\r\n      case 1:\r\n        return this.renderStep1Content()\r\n      case 2:\r\n        return this.renderStep2Content()\r\n      case 3:\r\n        return this.renderStep3Content()\r\n    }\r\n  }\r\n\r\n  renderStep1Content() {\r\n    return (\r\n      <Fragment>\r\n        <div className='ui two column grid'>\r\n          <div className='column'>\r\n            <table className='ui table'>\r\n              <thead>\r\n                <tr>\r\n                  <th>Parámetros</th>\r\n                  <th>%</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr>\r\n                  <td>\r\n                    Error Tolerable\r\n                    <GenericTooltip text='@tooltip.muestreo.error_tolerable' title='Error Tolerable' wide />\r\n                  </td>\r\n                  <td>\r\n                    {this.isReadOnly() ? this.state.values.E == -1 ? (\r\n                      'Mat. Planeación'\r\n                    ) : (\r\n                      `${this.state.values.E}%`\r\n                    ) : (\r\n                      <select\r\n                        className='raw-select input-mini'\r\n                        value={this.state.values.E}\r\n                        onChange={this.onChangeSelect('E')}\r\n                      >\r\n                        <option value='-1'>Mat. Planeación</option>\r\n                        <option disabled>-</option>\r\n                        {_.map(_.range(3, 21), (v) => {\r\n                          return (\r\n                            <option key={v} value={v}>\r\n                              {v}%\r\n                            </option>\r\n                          )\r\n                        })}\r\n                      </select>\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td>\r\n                    Nivel de Confianza (z)\r\n                    <GenericTooltip text='@tooltip.muestreo.nivel_confianza' title='Nivel de Confianza' />\r\n                  </td>\r\n                  <td>\r\n                    {this.isReadOnly() ? (\r\n                      `${this.state.values.Z}%`\r\n                    ) : (\r\n                      <select\r\n                        className='raw-select input-mini'\r\n                        value={this.state.values.Z}\r\n                        onChange={this.onChangeSelect('Z')}\r\n                      >\r\n                        {_.map(_.range(50, 96), (v) => {\r\n                          return (\r\n                            <option key={v} value={`${v / 100}`}>\r\n                              {v}%\r\n                            </option>\r\n                          )\r\n                        })}\r\n                      </select>\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td>\r\n                    Error esperado (P)\r\n                    <GenericTooltip text='@tooltip.muestreo.error_esperado' title='Error esperado' />\r\n                  </td>\r\n                  <td>\r\n                    {this.isReadOnly() ? (\r\n                      `${this.state.values.P * 10}%`\r\n                    ) : (\r\n                      <select\r\n                        className='raw-select input-mini'\r\n                        value={this.state.values.P}\r\n                        onChange={this.onChangeSelect('P')}\r\n                      >\r\n                        {_.map(_.range(1, 10), (v) => {\r\n                          return (\r\n                            <option key={v} value={`0.${v}`}>\r\n                              {v}%\r\n                            </option>\r\n                          )\r\n                        })}\r\n                      </select>\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <div className='column'>\r\n            <table className='ui table'>\r\n              <thead>\r\n                <tr>\r\n                  <th>Resultados</th>\r\n                  <th>Valor</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr>\r\n                  <td>Valor Contable de la Población</td>\r\n                  <td className='right aligned'>{accounting.formatNumber(this.props.data.M)}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Tamaño de la Población</td>\r\n                  <td className='right aligned'>{accounting.formatNumber(this.props.data.N)}</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <div className='b3'>\r\n          <span>\r\n            Tamaño de la Muestra (<em style={{ fontFamily: 'serif' }}>n</em>)<sup className='footnote'>[1]</sup>\r\n          </span>\r\n          <div className='math-equation'>\r\n            <table>\r\n              <tbody>\r\n                <tr>\r\n                  <td rowSpan={2}>&nbsp;</td>\r\n                  <td className='math-eq-var' style={{ fontSize: 11, borderBottom: '1px solid #333' }}>\r\n                    P * Q * z<sup>2</sup> * N{' '}\r\n                  </td>\r\n                  <td rowSpan={2}>&nbsp;</td>\r\n                </tr>\r\n                <tr>\r\n                  <td className='math-eq-var' style={{ fontSize: 11 }}>\r\n                    N * E<sup>2</sup> * z<sup>2</sup> * P * Q\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <strong>{accounting.formatNumber(this.state.values.cf_1)} elementos</strong>\r\n        </div>\r\n        <div className='footnotes'>[1] {getvalue(app.vars.texts, 'tooltip.muestreo.footnote_tamanomuestra_mas')}</div>\r\n        {this.renderNavigation()}\r\n      </Fragment>\r\n    )\r\n  }\r\n\r\n  renderStep2Content() {\r\n    return (\r\n      <Fragment>\r\n        {this.renderProgressBar()}\r\n        <div>\r\n          <TableMuestras muestras={this.state.muestras} readonly={this.isReadOnly()} onChange={this.onChangeMuestra} />\r\n        </div>\r\n        {this.renderNavigation()}\r\n      </Fragment>\r\n    )\r\n  }\r\n\r\n  renderStep3Content() {\r\n    const num = (num: any) => (isNaN(parseFloat(num)) ? 0 : parseFloat(num))\r\n    const sumV = _.reduce(this.state.muestras, (acc: number, curr) => acc + num(curr.v), 0)\r\n    const sumR = _.reduce(this.state.muestras, (acc: number, curr) => acc + num(curr.r), 0)\r\n\r\n    return (\r\n      <Fragment>\r\n        <div>\r\n          <table className='ui table'>\r\n            <thead>\r\n              <tr>\r\n                <th>Resultados</th>\r\n                <th>Valor</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr>\r\n                <td>\r\n                  <div\r\n                    style={{\r\n                      display: 'inline-block',\r\n                      verticalAlign: 'top',\r\n                      marginTop: 10\r\n                    }}\r\n                  >\r\n                    Tamaño de la muestra\r\n                  </div>\r\n                  <div className='math-equation'>\r\n                    <table>\r\n                      <tbody>\r\n                        <tr>\r\n                          <td rowSpan={2}>&nbsp;</td>\r\n                          <td className='math-eq-var' style={{ fontSize: 11, borderBottom: '1px solid #333' }}>\r\n                            P * Q * z<sup>2</sup> * N{' '}\r\n                          </td>\r\n                          <td rowSpan={2}>&nbsp;</td>\r\n                        </tr>\r\n                        <tr>\r\n                          <td className='math-eq-var' style={{ fontSize: 11 }}>\r\n                            N * E<sup>2</sup> * z<sup>2</sup> * P * Q\r\n                          </td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </td>\r\n                <td className='right aligned'>{accounting.formatNumber(this.state.values.cf_1)}</td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <td>Valor error tolerable</td>\r\n                <td className='right aligned'>\r\n                  {accounting.formatNumber(this.props.data.M * this.getErrorTolerable(this.state.values.E) / 100)}\r\n                </td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <td>Valor contable de la muestra</td>\r\n                <td className='right aligned'>{accounting.formatNumber(sumV)}</td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <td>Valor errores encontrados por el auditor</td>\r\n                <td className='right aligned'>{accounting.formatNumber(sumV - sumR)}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n\r\n          <table className='ui table'>\r\n            <thead>\r\n              <tr>\r\n                <th colSpan={2}>\r\n                  Proyección de error <em>No aplica para pruebas de controles</em>\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr>\r\n                <td>Proyección de los errores en la población</td>\r\n                <td className='right aligned'>{accounting.formatNumber(this.state.values.pry_1)}</td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <td>Índice de error proyectado</td>\r\n                <td className='right aligned'>{accounting.formatNumber(this.state.values.pry_2)}%</td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <td>\r\n                  Error proyectado es <u>superior</u> al Error tolerable\r\n                </td>\r\n                <td className={cx('right aligned', 'rs-' + this.state.values.pry_3)}>{this.state.values.pry_3}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n\r\n          <div className='ui segment'>\r\n            <EditorPreview\r\n              editable={!this.isReadOnly()}\r\n              label='Conclusión:'\r\n              prefixPreview='Conclusión:'\r\n              data={this.state.values.conclusion_custom_mas}\r\n              ckeditorOptions='basic'\r\n              onSave={this.onSaveConclusion}\r\n            />\r\n          </div>\r\n        </div>\r\n        {this.renderNavigation()}\r\n\r\n        {!this.isReadOnly() && <FormFichaTecnica isReadOnly={false} />}\r\n      </Fragment>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const { step } = this.state\r\n\r\n    return (\r\n      <div id='mainpane-mas'>\r\n        {this.isReadOnly() && (\r\n          <div className='alert alert-block alert-info'>\r\n            <span className='icon-info-sign' /> <strong>NOTA:</strong> La ficha técnica perteneciente a este muestreo ya\r\n            fue generada, por lo tanto los parámetros y registros de esta muestra utilizando esta metodología\r\n            <strong> NO</strong> pueden ser modificados.\r\n          </div>\r\n        )}\r\n        <div className='ui top attached steps ordered'>\r\n          <div\r\n            className={cx({ active: step == 1, completed: step > 1 }, 'step link first')}\r\n            onClick={() => this.goToStep(1)}\r\n          >\r\n            <div className='content'>\r\n              <div className='title'>Cálculo del Tamaño de la Muestra</div>\r\n            </div>\r\n          </div>\r\n          <div\r\n            className={cx({ active: step == 2, completed: step > 2 }, 'step link ')}\r\n            onClick={() => this.goToStep(2)}\r\n          >\r\n            <div className='content'>\r\n              <div className='title'>Muestra y Evaluación de Resultados</div>\r\n            </div>\r\n          </div>\r\n          <div\r\n            className={cx({ active: step == 3, completed: step > 3 }, 'step link last')}\r\n            onClick={() => this.goToStep(3)}\r\n          >\r\n            <div className='content'>\r\n              <div className='title'>Conclusión</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className='ui segment attached'>\r\n          <div>{this.renderStepContent()}</div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { PureComponent, SyntheticEvent, Fragment } from 'react'\r\n\r\nimport cx from 'classnames'\r\nimport getvalue from 'get-value'\r\nimport { GenericTooltip } from '../global/Tooltip'\r\nimport { calculateFactorConfianza, calculateTamanoMuestra, generarMuestras, calculatePrecision } from './utils_mum'\r\nimport { isEmpty, cacheMuestra, getCacheAllMuestra } from './utis'\r\nimport EditorPreview from '../global/EditorPreview'\r\nimport { TableMuestras, TableErrores, ConclusionTooltip, FormFichaTecnica } from './TableMuestra'\r\n\r\ndeclare var app: any\r\n\r\ntype AppMuestreoMumProps = {\r\n  data: any\r\n}\r\n\r\ntype AppMuestreoMumStateValueType = {\r\n  /** Nivel confianza */\r\n  Z2: number\r\n  /** Porcentaje Error Máximo Tolerable */\r\n  E2: number\r\n  /**Error maximo tolerable */\r\n  e2__v2: number\r\n  total_error_proyectado: number\r\n  tolerancia: number\r\n  /** Factor confianza */\r\n  cg2_1: number\r\n  /** Tamaño de la muestra */\r\n  cg2_3: number\r\n  /** Intervalo */\r\n  cg2_4: number\r\n  conclusion_custom: string\r\n}\r\n\r\ntype AppMuestreoMumState = {\r\n  step: number\r\n  values: AppMuestreoMumStateValueType\r\n  muestras: MuestraItem[]\r\n}\r\n\r\nexport default class AppMuestreoMum extends PureComponent<AppMuestreoMumProps, AppMuestreoMumState> {\r\n  private handlers: { [s: string]: any } = {}\r\n\r\n  private hasModified: boolean = false\r\n\r\n  constructor(props: AppMuestreoMumProps) {\r\n    super(props)\r\n\r\n    const muestras = getvalue(props.data, 'muestras.mum', null)\r\n\r\n    const Z2 = isEmpty(props.data.Z2) ? 90 : parseFloat(props.data.Z2)\r\n    const E2 = isEmpty(props.data.E2) ? (muestras === null ? -1 : 5) : parseFloat(props.data.E2)\r\n\r\n    const error_maximo = isEmpty(props.data.e2__v2) ? props.data.M * E2 / 100 : parseFloat(props.data.e2__v2)\r\n    const factor_confianza = isEmpty(props.data.cg2_1) ? calculateFactorConfianza(Z2) : parseFloat(props.data.cg2_1)\r\n    const tamano_muestra = isEmpty(props.data.cg2_3)\r\n      ? calculateTamanoMuestra(this.props.data.M, factor_confianza, error_maximo)\r\n      : parseFloat(props.data.cg2_3)\r\n    const intervalo = isEmpty(props.data.cg2_4)\r\n      ? Math.floor(this.props.data.M / tamano_muestra)\r\n      : parseFloat(props.data.cg2_4)\r\n\r\n    this.state = {\r\n      step: 1,\r\n      values: {\r\n        Z2,\r\n        E2,\r\n        e2__v2: error_maximo,\r\n        total_error_proyectado: props.data.total_error_proyectado,\r\n        tolerancia: props.data.tolerancia,\r\n        cg2_1: factor_confianza,\r\n        cg2_3: tamano_muestra,\r\n        cg2_4: intervalo,\r\n        conclusion_custom: props.data.conclusion_custom || ''\r\n      },\r\n      muestras:\r\n        muestras == null\r\n          ? this.generarMuestras(tamano_muestra, intervalo)\r\n          : _.map(muestras, (muestra: MuestraItem) => {\r\n              if (!isEmpty(muestra.r)) {\r\n                muestra.r = parseFloat(muestra.r + '')\r\n              }\r\n              return muestra\r\n            })\r\n    }\r\n\r\n    if (muestras != null) {\r\n      _.forEach(muestras, (muestra) => cacheMuestra(muestra))\r\n    } else {\r\n      $.blockUI(create_blockUI_loading_message('Guardando cambios'))\r\n\r\n      this.sendToServer({\r\n        type: 'mum',\r\n        muestras: this.state.muestras,\r\n        fields: _.omit(this.state.values, [ 'conclusion_custom' ])\r\n      }).done(() => {\r\n        $.unblockUI()\r\n      })\r\n    }\r\n  }\r\n\r\n  isReadOnly() {\r\n    return !!this.props.data.ficha_tecnica_mum_date\r\n  }\r\n\r\n  attachHandler(field: string, handler: any) {\r\n    if (!this.handlers[field]) {\r\n      this.handlers[field] = handler\r\n    }\r\n\r\n    return this.handlers[field]\r\n  }\r\n\r\n  generarMuestras(tamano_muestra: number, intervalo: number) {\r\n    const muestras = generarMuestras(app.vars.muestras, tamano_muestra, intervalo)\r\n    const cache = getCacheAllMuestra()\r\n    _.forEach(muestras, (muestra, k) => {\r\n      if (typeof cache[muestra.cod] != 'undefined') {\r\n        muestras[k].r = cache[muestra.cod]\r\n      }\r\n    })\r\n\r\n    return muestras\r\n  }\r\n\r\n  isValidToStep3() {\r\n    return _.all(this.state.muestras, (muestra) => muestra.r != null)\r\n  }\r\n\r\n  sendToServer(params: any) {\r\n    if (this.isReadOnly()) {\r\n      return\r\n    }\r\n\r\n    params.t = 'mum'\r\n    if (typeof params.fields !== 'undefined') {\r\n      params.fields = _.map(params.fields, (value, key) => {\r\n        return { field: key, value }\r\n      })\r\n    }\r\n    return $.post(url_for(`proyecto_muestreo/${app.vars.ID_MUESTREO}/config`), params)\r\n  }\r\n\r\n  onChangeSelect = (field: string) => {\r\n    return this.attachHandler(field, (ev: SyntheticEvent) => {\r\n      const value = (ev.target as any).value\r\n      this.setState((prevState) => {\r\n        const newValues: AppMuestreoMumStateValueType = Object.assign({}, prevState.values, {\r\n          [field]: parseInt(value)\r\n        })\r\n\r\n        const materialidad = parseFloat(getvalue(app, 'vars.muestreo.materialidad.total_planeacion', 0))\r\n        newValues.e2__v2 =\r\n          newValues.E2 == -1\r\n            ? this.props.data.M * (100 * materialidad / this.props.data.M) / 100\r\n            : this.props.data.M * newValues.E2 / 100\r\n        newValues.cg2_1 = calculateFactorConfianza(newValues.Z2)\r\n        newValues.cg2_3 = calculateTamanoMuestra(this.props.data.M, newValues.cg2_1, newValues.e2__v2)\r\n        newValues.cg2_4 = Math.floor(this.props.data.M / newValues.cg2_3)\r\n\r\n        const muestras = this.generarMuestras(newValues.cg2_3, newValues.cg2_4)\r\n\r\n        this.sendToServer({ muestras, fields: _.omit(newValues, [ 'conclusion_custom' ]) })\r\n\r\n        return { values: newValues, muestras }\r\n      })\r\n    })\r\n  }\r\n\r\n  onChangeMuestra = (muestra: MuestraItem, persist: boolean) => {\r\n    if (this.isReadOnly()) {\r\n      return\r\n    }\r\n\r\n    this.setState((prevState) => {\r\n      if (!this.hasModified) {\r\n        const prevValue = _.find(prevState.muestras, { cod: muestra.cod })\r\n        if (!_.isEqual(prevValue, muestra)) {\r\n          this.hasModified = true\r\n        }\r\n      }\r\n\r\n      const muestras = _.map(prevState.muestras, (_muestra) => {\r\n        return muestra.cod == _muestra.cod ? muestra : _muestra\r\n      })\r\n\r\n      if (!persist) {\r\n        return { muestras, values: prevState.values }\r\n      }\r\n\r\n      const values = { ...prevState.values }\r\n\r\n      const muestrasErradas = _.filter(muestras, (muestra) => !isEmpty(muestra.r) && muestra.v - muestra.r != 0)\r\n\r\n      values.total_error_proyectado = _.reduce(\r\n        muestrasErradas,\r\n        (acc: number, muestra) => {\r\n          const error_proyectado =\r\n            muestra.v > values.cg2_4 ? muestra.v - muestra.r : values.cg2_4 * ((muestra.v - muestra.r) / muestra.v)\r\n\r\n          return error_proyectado + acc\r\n        },\r\n        0\r\n      )\r\n\r\n      values.tolerancia = calculatePrecision(muestras, values.cg2_4, values.cg2_1, values.Z2)\r\n\r\n      if (this.hasModified) {\r\n        this.sendToServer({ muestras, fields: _.omit(values, [ 'conclusion_custom' ]) })\r\n        this.hasModified = false\r\n      }\r\n\r\n      return { muestras, values }\r\n    })\r\n    cacheMuestra(muestra)\r\n  }\r\n\r\n  onSaveConclusion = (editor: CKEDITOR.editor) => {\r\n    if (this.isReadOnly()) {\r\n      return\r\n    }\r\n\r\n    this.setState((prevState) => {\r\n      const values = { ...prevState.values }\r\n      values.conclusion_custom = editor.getData()\r\n\r\n      this.sendToServer({ fields: { conclusion_custom: values.conclusion_custom } })\r\n\r\n      return { values }\r\n    })\r\n  }\r\n\r\n  onClickNext = () => {\r\n    this.goToStep(this.state.step + 1)\r\n  }\r\n\r\n  onClickPrev = () => {\r\n    this.goToStep(this.state.step - 1)\r\n  }\r\n\r\n  goToStep = (step: number) => {\r\n    if (step == 3 && !this.isValidToStep3()) {\r\n      bootbox.alert(\r\n        'Debe ingresar el Valor según Auditoría de <u>TODAS</u> las operaciones de la muestra para continuar.'\r\n      )\r\n      return\r\n    }\r\n    this.setState({ step })\r\n  }\r\n\r\n  renderNavigation() {\r\n    const { step } = this.state\r\n    return (\r\n      <Fragment>\r\n        <nav className='nav-actions'>\r\n          {step > 1 && (\r\n            <button className='ui button primary left floated' onClick={this.onClickPrev}>\r\n              Anterior\r\n            </button>\r\n          )}\r\n          {step < 3 && (\r\n            <button className='ui button primary right floated' onClick={this.onClickNext}>\r\n              Siguiente\r\n            </button>\r\n          )}\r\n          <div className='clearfix' />\r\n        </nav>\r\n        {this.isReadOnly() && <FormFichaTecnica isReadOnly />}\r\n      </Fragment>\r\n    )\r\n  }\r\n\r\n  renderProgressBar() {\r\n    const progress = _.size(_.filter(this.state.muestras, (muestra) => !isEmpty(muestra.r)))\r\n    const total = _.size(this.state.muestras)\r\n\r\n    return (\r\n      <div className='ui grid'>\r\n        <div className='column fifteen wide'>\r\n          <div className='ui tiny green progress' data-percent={Math.floor(100 * progress / total)}>\r\n            <div className='bar' style={{ width: `${Math.floor(100 * progress / total)}%` }}>\r\n              <div className='progress' />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className='column one wide' style={{ fontSize: 12, padding: 8 }}>\r\n          {progress} / {total}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  renderStepContent() {\r\n    switch (this.state.step) {\r\n      case 1:\r\n        return this.renderStep1Content()\r\n      case 2:\r\n        return this.renderStep2Content()\r\n      case 3:\r\n        return this.renderStep3Content()\r\n    }\r\n  }\r\n\r\n  renderStep1Content() {\r\n    return (\r\n      <Fragment>\r\n        <div className='ui two column grid'>\r\n          <div className='column'>\r\n            <table className='ui table'>\r\n              <thead>\r\n                <tr>\r\n                  <th>Parámetros</th>\r\n                  <th>%</th>\r\n                  <th>Valor</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr>\r\n                  <td>\r\n                    Nivel de Confianza\r\n                    <GenericTooltip text='@tooltip.muestreo.nivel_confianza' title='Nivel de Confianza' />\r\n                  </td>\r\n                  <td>\r\n                    {this.isReadOnly() ? (\r\n                      `${this.state.values.Z2}%`\r\n                    ) : (\r\n                      <select\r\n                        className='raw-select input-mini'\r\n                        value={this.state.values.Z2}\r\n                        onChange={this.onChangeSelect('Z2')}\r\n                      >\r\n                        {_.map(_.range(50, 96), (v) => {\r\n                          return (\r\n                            <option key={v} value={v}>\r\n                              {v}%\r\n                            </option>\r\n                          )\r\n                        })}\r\n                      </select>\r\n                    )}\r\n                  </td>\r\n                  <td className='right aligned'>{100 - this.state.values.Z2}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>\r\n                    Error Máximo Tolerable\r\n                    <GenericTooltip\r\n                      text='@tooltip.muestreo.error_maximo_tolerable'\r\n                      title='Error Máximo Tolerable'\r\n                      wide\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    {this.isReadOnly() ? this.state.values.E2 == -1 ? (\r\n                      'Mat. Planeación'\r\n                    ) : (\r\n                      `${this.state.values.E2}%`\r\n                    ) : (\r\n                      <select\r\n                        className={cx('raw-select input-mini', 'e2-' + this.state.values.E2)}\r\n                        value={this.state.values.E2}\r\n                        onChange={this.onChangeSelect('E2')}\r\n                      >\r\n                        <option value='-1'>Mat. Planeación</option>\r\n                        <option disabled>-</option>\r\n                        {_.map(_.range(1, 11), (v) => {\r\n                          return (\r\n                            <option key={v} value={v}>\r\n                              {v}%\r\n                            </option>\r\n                          )\r\n                        })}\r\n                      </select>\r\n                    )}\r\n                  </td>\r\n                  <td className='right aligned'>{accounting.formatNumber(this.state.values.e2__v2)}</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <div className='column'>\r\n            <table className='ui table'>\r\n              <thead>\r\n                <tr>\r\n                  <th>Resultados</th>\r\n                  <th>Valor</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr>\r\n                  <td>Tamaño de la Población</td>\r\n                  <td className='right aligned'>{accounting.formatNumber(this.props.data.N)}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Valor Contable de la Población</td>\r\n                  <td className='right aligned'>{accounting.formatNumber(this.props.data.M)}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Factor de Confianza</td>\r\n                  <td className='right aligned'>{accounting.formatNumber(this.state.values.cg2_1, 2)}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>\r\n                    <span style={{ display: 'inline-block', verticalAlign: 'top' }}>\r\n                      Intervalo de Muestreo\r\n                      <GenericTooltip text='@tooltip.muestreo.intervalo' title='Intervalo de Muestreo' />\r\n                    </span>\r\n                    <div className='math-equation'>\r\n                      <table>\r\n                        <tbody>\r\n                          <tr>\r\n                            <td className='math-eq-var' style={{ fontSize: 9, borderBottom: '1px solid #333' }}>\r\n                              Valor contable de la poblacion\r\n                            </td>\r\n                          </tr>\r\n                          <tr>\r\n                            <td className='math-eq-var' style={{ fontSize: 9 }}>\r\n                              Tamaño de la muestra\r\n                            </td>\r\n                          </tr>\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  </td>\r\n                  <td className='right aligned'>{accounting.formatNumber(this.state.values.cg2_4)}</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <div className='b3'>\r\n          <span>\r\n            Tamaño de la Muestra (<em style={{ fontFamily: 'serif' }}>n</em>)<sup className='footnote'>[1]</sup>\r\n          </span>\r\n          <div className='math-equation'>\r\n            <table>\r\n              <tbody>\r\n                <tr>\r\n                  <td className='math-eq-var' rowSpan={2} style={{ fontSize: 9 }}>\r\n                    n =\r\n                  </td>\r\n                  <td className='math-eq-var' style={{ fontSize: 11, borderBottom: '1px solid #333' }}>\r\n                    Factor de confianza\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td className='math-eq-var' style={{ fontSize: 11 }}>\r\n                    Error tolerable (en porcentaje)\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <strong>{accounting.formatNumber(this.state.values.cg2_3)} elementos</strong>\r\n        </div>\r\n        <div className='footnotes'>[1] {getvalue(app.vars.texts, 'tooltip.muestreo.footnote_tamanomuestra_mum')}</div>\r\n        {this.renderNavigation()}\r\n      </Fragment>\r\n    )\r\n  }\r\n\r\n  renderStep2Content() {\r\n    return (\r\n      <Fragment>\r\n        {this.renderProgressBar()}\r\n        <div>\r\n          <TableMuestras muestras={this.state.muestras} readonly={this.isReadOnly()} onChange={this.onChangeMuestra} />\r\n        </div>\r\n        {this.renderNavigation()}\r\n      </Fragment>\r\n    )\r\n  }\r\n\r\n  renderStep3Content() {\r\n    const muestrasErradas = _.filter(\r\n      this.state.muestras,\r\n      (muestra) => !isEmpty(muestra.r) && muestra.v - muestra.r != 0\r\n    )\r\n\r\n    const total_error_proyectado = this.state.values.total_error_proyectado\r\n    const precision = this.state.values.tolerancia\r\n\r\n    return (\r\n      <Fragment>\r\n        <div>\r\n          <TableErrores muestras={muestrasErradas} intervalo={this.state.values.cg2_4} />\r\n          <table className='ui table'>\r\n            <thead>\r\n              <tr>\r\n                <th>Resultados</th>\r\n                <th>Valor</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr>\r\n                <td>a) Error proyectado</td>\r\n                <td className='right aligned'>{accounting.formatNumber(Math.abs(total_error_proyectado))}</td>\r\n              </tr>\r\n              <tr>\r\n                <td>\r\n                  b) Precisión\r\n                  <GenericTooltip text='@tooltip.muestreo.precision' title='Precision' />\r\n                </td>\r\n                <td className='right aligned'>{accounting.formatNumber(Math.abs(precision))}</td>\r\n              </tr>\r\n              <tr className='strong'>\r\n                <td>c) Límite superior del error (a+b)</td>\r\n                <td className='right aligned'>\r\n                  {accounting.formatNumber(\r\n                    Math.abs(parseFloat(total_error_proyectado + '')) + Math.abs(parseFloat(precision + ''))\r\n                  )}\r\n                </td>\r\n              </tr>\r\n              <tr className='strong'>\r\n                <td>d) Error máximo tolerable</td>\r\n                <td className='right aligned'>{accounting.formatNumber(this.state.values.e2__v2)}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n          <div className='ui segment'>\r\n            <EditorPreview\r\n              editable={!this.isReadOnly()}\r\n              label='Conclusión:'\r\n              prefixPreview='Conclusión:'\r\n              data={this.state.values.conclusion_custom}\r\n              ckeditorOptions='basic'\r\n              onSave={this.onSaveConclusion}\r\n            />\r\n            <ConclusionTooltip />\r\n          </div>\r\n        </div>\r\n        {this.renderNavigation()}\r\n        {!this.isReadOnly() && <FormFichaTecnica isReadOnly={false} />}\r\n      </Fragment>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const { step } = this.state\r\n\r\n    return (\r\n      <div id='mainpane-mum'>\r\n        {this.isReadOnly() && (\r\n          <div className='alert alert-block alert-info'>\r\n            <span className='icon-info-sign' /> <strong>NOTA:</strong> La ficha técnica perteneciente a este muestreo ya\r\n            fue generada, por lo tanto los parámetros y registros de esta muestra utilizando esta metodología\r\n            <strong> NO</strong> pueden ser modificados.\r\n          </div>\r\n        )}\r\n        <div className='ui top attached steps ordered'>\r\n          <div\r\n            className={cx({ active: step == 1, completed: step > 1 }, 'step link first')}\r\n            onClick={() => this.goToStep(1)}\r\n          >\r\n            <div className='content'>\r\n              <div className='title'>Cálculo del Tamaño de la Muestra</div>\r\n            </div>\r\n          </div>\r\n          <div\r\n            className={cx({ active: step == 2, completed: step > 2 }, 'step link ')}\r\n            onClick={() => this.goToStep(2)}\r\n          >\r\n            <div className='content'>\r\n              <div className='title'>Muestra y Evaluación de Resultados</div>\r\n            </div>\r\n          </div>\r\n          <div\r\n            className={cx({ active: step == 3, completed: step > 3 }, 'step link last')}\r\n            onClick={() => this.goToStep(3)}\r\n          >\r\n            <div className='content'>\r\n              <div className='title'>Conclusión</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className='ui segment attached'>\r\n          <div>{this.renderStepContent()}</div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { PureComponent, createRef, SyntheticEvent, useState } from 'react'\r\nimport getvalue from 'get-value'\r\nimport cx from 'classnames'\r\nimport InputAutoNumeric from '../global/InputAutoNumeric'\r\nimport { isEmpty } from './utis'\r\n\r\ndeclare var app: any\r\n\r\ntype TableMuestrasProps = {\r\n  muestras: MuestraItem[]\r\n  onChange: (muestra: MuestraItem, persist: boolean) => void\r\n  readonly: boolean\r\n}\r\n\r\nexport class TableMuestras extends PureComponent<TableMuestrasProps> {\r\n  tableRef = createRef<HTMLTableElement>()\r\n  renderTotals() {\r\n    const num = (num: any) => (isNaN(parseFloat(num)) ? 0 : parseFloat(num))\r\n    const sumV = _.reduce(this.props.muestras, (acc: number, curr) => acc + num(curr.v), 0)\r\n    const sumR = _.reduce(this.props.muestras, (acc: number, curr) => acc + num(curr.r), 0)\r\n    const sumD = _.reduce(this.props.muestras, (acc: number, curr) => acc + num(curr.v - curr.r), 0)\r\n\r\n    return (\r\n      <tfoot>\r\n        <tr>\r\n          <td colSpan={2}>TOTALES</td>\r\n          <td className='right aligned'>{accounting.formatNumber(sumV)}</td>\r\n          <td className='right aligned'>{sumR != 0 ? accounting.formatNumber(sumR) : ''}</td>\r\n          <td className='right aligned'>{sumD != 0 ? accounting.formatNumber(sumD) : ''}</td>\r\n          <td className='right aligned'>{accounting.formatNumber(Math.floor(100 * sumD / sumV))}%</td>\r\n        </tr>\r\n      </tfoot>\r\n    )\r\n  }\r\n\r\n  componentDidMount() {\r\n    $(this.tableRef.current).floatThead()\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    $(this.tableRef.current).floatThead('destroy')\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const $table = $(this.tableRef.current)\r\n\r\n    setTimeout(function() {\r\n      $table.floatThead('reflow')\r\n    }, 1000)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <table ref={this.tableRef} className='ui celled table compact table-muestras' id='table-muestreo-mum-evaluacion'>\r\n        <thead>\r\n          <tr>\r\n            <th>#</th>\r\n            <th>Documento</th>\r\n            <th>Valor en libros ($)</th>\r\n            <th>Valor según auditoría ($)</th>\r\n            <th>Valor Error Absoluto ($)</th>\r\n            <th>Error Porcentual (%)</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {_.map(this.props.muestras, (muestra, k) => {\r\n            return (\r\n              <TableMuestraRow\r\n                key={muestra.cod}\r\n                index={k + 1}\r\n                muestra={muestra}\r\n                readonly={this.props.readonly}\r\n                onChange={this.props.onChange}\r\n              />\r\n            )\r\n          })}\r\n        </tbody>\r\n        {this.renderTotals()}\r\n      </table>\r\n    )\r\n  }\r\n}\r\n\r\ntype TableMuestraRowProps = {\r\n  muestra: MuestraItem\r\n  index: number\r\n  onChange: (muestra: MuestraItem, persist: boolean) => void\r\n  readonly: boolean\r\n}\r\n\r\nclass TableMuestraRow extends PureComponent<TableMuestraRowProps, { value: number }> {\r\n  constructor(props: TableMuestraRowProps) {\r\n    super(props)\r\n    this.state = {\r\n      value: props.muestra.r\r\n    }\r\n  }\r\n\r\n  onChange = (ev: SyntheticEvent, value: number) => {\r\n    if ((ev.target as any).value === '') {\r\n      value = null\r\n    }\r\n\r\n    this.setState({ value })\r\n\r\n    this.props.onChange(Object.assign({}, this.props.muestra, { r: value }), false)\r\n  }\r\n\r\n  onBlur = (ev: SyntheticEvent, value: number) => {\r\n    if ((ev.target as any).value === '') {\r\n      value = null\r\n    }\r\n\r\n    this.setState({ value })\r\n\r\n    this.props.onChange(Object.assign({}, this.props.muestra, { r: value }), true)\r\n  }\r\n\r\n  renderDiffPercent() {\r\n    const { muestra } = this.props\r\n    const valor_diff: number = muestra.v - this.state.value\r\n    const retval = 100 * valor_diff / muestra.v\r\n\r\n    return parseInt(retval + '') === 0 ? 0 : accounting.formatNumber(retval)\r\n  }\r\n\r\n  render() {\r\n    const { muestra } = this.props\r\n\r\n    return (\r\n      <tr key={muestra.cod}>\r\n        <td>{this.props.index}</td>\r\n        <td>{muestra.cod}</td>\r\n        <td className='right aligned'>{accounting.formatNumber(muestra.v)}</td>\r\n        <td className='right aligned'>\r\n          <InputAutoNumeric\r\n            isEditable={!this.props.readonly}\r\n            value={this.state.value}\r\n            onChange={this.onChange}\r\n            onDrop={this.onChange}\r\n            onBlur={this.onBlur}\r\n          />\r\n        </td>\r\n        <td className='right aligned'>\r\n          {isEmpty(this.state.value) ? '' : accounting.formatNumber(muestra.v - this.state.value)}\r\n        </td>\r\n        <td className='right aligned'>{isEmpty(this.state.value) ? '' : this.renderDiffPercent() + '%'}</td>\r\n      </tr>\r\n    )\r\n  }\r\n}\r\n\r\ntype TableErroresProps = {\r\n  muestras: MuestraItem[]\r\n  intervalo: number\r\n}\r\n\r\nexport const TableErrores = (props: TableErroresProps) => {\r\n  if (!_.size(props.muestras)) {\r\n    return (\r\n      <div className='ui message success icon'>\r\n        <i className='icon large checkmark' />\r\n        <div className='content'>\r\n          <div className='header'>0 partidas con errores</div>\r\n          <p>No se hallaron partidas con error según auditoría.</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  } else {\r\n    let total_error_proyectado = 0\r\n    return (\r\n      <table className='ui table compact celled' id='table-mum-muestraserradas'>\r\n        <caption>Partidas que contienen error según auditoría</caption>\r\n        <thead>\r\n          <tr>\r\n            <th>Cód.</th>\r\n            <th>Valor en libros ($)</th>\r\n            <th>Valor en auditoría ($)</th>\r\n            <th>Error ($)</th>\r\n            <th>Índice de Error (%)</th>\r\n            <th>Error proyectado al intervalo</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {_.map(props.muestras, (muestra) => {\r\n            const error_proyectado =\r\n              muestra.v > props.intervalo\r\n                ? muestra.v - muestra.r\r\n                : props.intervalo * ((muestra.v - muestra.r) / muestra.v)\r\n\r\n            total_error_proyectado += error_proyectado\r\n\r\n            return (\r\n              <tr key={muestra.cod} className={cx({ g2: muestra.v > props.intervalo })}>\r\n                <td>{muestra.cod}</td>\r\n                <td className='right aligned'>{accounting.formatNumber(muestra.v)}</td>\r\n                <td className='right aligned'>{accounting.formatNumber(muestra.r)}</td>\r\n                <td className='right aligned'>{accounting.formatNumber(muestra.v - muestra.r)}</td>\r\n                <td className='right aligned'>{accounting.formatNumber(100 * (muestra.v - muestra.r) / muestra.v)}%</td>\r\n                <td className='right aligned'>{accounting.formatNumber(error_proyectado)}</td>\r\n              </tr>\r\n            )\r\n          })}\r\n        </tbody>\r\n        <tfoot>\r\n          <tr className='totals'>\r\n            <td>{_.size(props.muestras)} partidas</td>\r\n            <td className='right aligned' colSpan={4}>\r\n              Total Error Proyectado\r\n            </td>\r\n            <td className='right aligned'>{accounting.formatNumber(total_error_proyectado)}</td>\r\n          </tr>\r\n        </tfoot>\r\n      </table>\r\n    )\r\n  }\r\n}\r\n\r\nexport const ConclusionTooltip = () => {\r\n  const [ open, setOpen ] = useState(false)\r\n\r\n  const onClick = (ev: SyntheticEvent) => {\r\n    ev.preventDefault()\r\n    setOpen(!open)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <a href='#' style={{ display: 'block', textAlign: 'right', marginBottom: 5 }} onClick={onClick}>\r\n        <i className='info circle icon' /> {open ? 'Ocultar' : 'Mostrar'} sugerencia\r\n      </a>\r\n      {open && (\r\n        <div\r\n          className='conclusion-tooltip'\r\n          dangerouslySetInnerHTML={{ __html: getvalue(app.vars.texts, 'tooltip.muestreo.conclusion') }}\r\n        />\r\n      )}\r\n      <div className='clearfix' />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport class FormFichaTecnica extends PureComponent<{ isReadOnly: boolean }> {\r\n  formRef = createRef<HTMLFormElement>()\r\n\r\n  onClick = (ev: SyntheticEvent) => {\r\n    ev.preventDefault()\r\n    ev.stopPropagation()\r\n\r\n    if (this.props.isReadOnly) {\r\n      $(this.formRef.current).submit()\r\n    } else {\r\n      bootbox.warningConfirm(\r\n        '¿Desea generar la ficha técnica para esta muestra?.<br><br>Tenga en cuenta que una vez generada la ficha técnica, esta muestra ya no podrá ser modificada.',\r\n        'Cancelar',\r\n        'Aceptar',\r\n        (r) => {\r\n          if (r) {\r\n            $(this.formRef.current).submit()\r\n            setTimeout(function() {\r\n              location.reload()\r\n            }, 1000)\r\n          }\r\n        }\r\n      )\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <form\r\n        ref={this.formRef}\r\n        data-submit-block='off'\r\n        target='_blank'\r\n        action={url_for(\r\n          `proyecto/${app.vars.idproyecto}/paso/${app.vars.idpaso}/visita/${app.vars.idvisita}/muestreo/${app.vars\r\n            .ID_MUESTREO}/pdf.pdf`\r\n        )}\r\n        method='post'\r\n        id='fichatecnicaform'\r\n      >\r\n        <button type='button' className='btn btn-lg btn-warning' onClick={this.onClick}>\r\n          <span className='icon-moon-file-pdf' /> Ver Ficha Técnica\r\n        </button>\r\n      </form>\r\n    )\r\n  }\r\n}\r\n","import { render } from 'react-dom'\r\nimport App from './App'\r\n\r\ndeclare var app: any\r\n\r\naccounting.settings.number.precision = 0\r\naccounting.settings.number.thousand = '.'\r\naccounting.settings.number.decimal = ','\r\n\r\n$.unblockUI()\r\nrender(<App data={app.vars.muestreo} />, document.getElementById('root'))\r\n","/// <reference path=\"./index.d.ts\" />\r\n\r\ndeclare var jStat: any\r\n\r\nexport const calculateTamanoMuestra = (cf_n: number, cf_p: number, cf_z: number, cf_e: number) => {\r\n  const cf_q: number = Math.round((1 - cf_p) * 10) / 10\r\n\r\n  const n1: number = cf_p * cf_q\r\n  const n2: number = Math.abs(jStat.studentt.inv((1 - cf_z) / 2, 100000))\r\n  const n3: number = Math.pow(cf_e / 100 / n2, 2)\r\n  const n4: number = n1 / cf_n\r\n\r\n  return Math.round(n1 / (n3 + n4))\r\n}\r\n\r\nexport const generarMuestras = (muestrasOriginal: MuestraItem[], tamano_muestra: number) => {\r\n  let muestras = _.clone(muestrasOriginal, true)\r\n\r\n  muestras = _.shuffle(muestras) // desordena\r\n  muestras = _.take(muestras, tamano_muestra) // toma las N primeras\r\n  muestras = _.sortBy(muestras, 'cod') // Las vuelve a ordenar\r\n\r\n  return muestras\r\n}\r\n","/// <reference path=\"./index.d.ts\" />\r\n\r\ndeclare var jStat: any\r\n\r\nconst roundup2 = (number: number): number => {\r\n  let rounded_number = Math.round(number * 100) / 100\r\n\r\n  if (rounded_number < number) {\r\n    rounded_number += 0.01\r\n  }\r\n\r\n  return rounded_number\r\n}\r\n\r\nconst gammaInv = (probability: number, alpha: number): number => {\r\n  return jStat.gamma.inv(probability, alpha, 1)\r\n}\r\n\r\nexport const calculateFactorConfianza = (nivel_confianza: number): number => {\r\n  return roundup2(gammaInv(nivel_confianza / 100, 1))\r\n}\r\n\r\nexport const calculateTamanoMuestra = (\r\n  volumen_poblacion: number,\r\n  factor_confianza: number,\r\n  error_tolerable: number\r\n) => {\r\n  return Math.round(volumen_poblacion * factor_confianza / error_tolerable)\r\n}\r\n\r\nexport const generarMuestras = (muestrasOriginal: MuestraItem[], tamano_muestra: number, intervalo: number) => {\r\n  let muestras = _.clone(muestrasOriginal, true)\r\n  muestras = _.filter(muestras, (item) => item.v > 0)\r\n\r\n  const muestras_e = _.filter(muestras, (item) => item.v >= intervalo)\r\n\r\n  if (muestras_e.length > tamano_muestra) {\r\n    muestras = _.take(_.sortBy(muestras_e, 'v'), tamano_muestra)\r\n  } else {\r\n    let muestras_s = _.filter(muestras, (item) => item.v < intervalo)\r\n    let volumen_s = 0\r\n    muestras_s.forEach((item) => {\r\n      volumen_s += item.v\r\n    })\r\n\r\n    const tamano_muestra_s = tamano_muestra - muestras_e.length\r\n    const intervalo_s = volumen_s / tamano_muestra_s\r\n    const seed_s = Math.floor(Math.random() * intervalo_s) + 1\r\n    let muestras_s_tmp = _.shuffle(muestras_s)\r\n    muestras_s = []\r\n\r\n    let interval_k = 0\r\n    let interval_acumulado = 0\r\n    for (let k in muestras_s_tmp) {\r\n      if (interval_k >= tamano_muestra_s) {\r\n        break\r\n      }\r\n\r\n      const item = muestras_s_tmp[k]\r\n      interval_acumulado += item.v\r\n\r\n      const acumulado_item = seed_s + interval_k * intervalo_s\r\n      if (interval_acumulado >= acumulado_item) {\r\n        muestras_s.push(item)\r\n        interval_k++\r\n      }\r\n    }\r\n\r\n    muestras = _.union(muestras_e, muestras_s)\r\n  }\r\n\r\n  muestras = _.sortBy(muestras, 'cod') // Las ordeno por codigo\r\n\r\n  return muestras\r\n}\r\n\r\nexport const calculatePrecision = (\r\n  muestras: MuestraItem[],\r\n  intervalo: number,\r\n  factor_confianza: number,\r\n  nivel_confianza: number\r\n) => {\r\n  const riesgo_aceptacion: number = Math.floor(100 - nivel_confianza)\r\n\r\n  let tolerancia_incremental: number = 0\r\n  let items_inferiores: { error_proyectado: number }[] = []\r\n\r\n  _.each(muestras, (muestra) => {\r\n    const diff: number = muestra.v - muestra.r\r\n    if (!isNaN(diff)) {\r\n      if (diff == 0) {\r\n        return\r\n      }\r\n\r\n      const contaminacion = (muestra.v - muestra.r) / muestra.v\r\n      const error_proyectado = muestra.v > intervalo ? muestra.v - muestra.r : contaminacion * intervalo\r\n\r\n      if (muestra.v <= intervalo) {\r\n        items_inferiores.push({ error_proyectado })\r\n      }\r\n    }\r\n  })\r\n\r\n  items_inferiores = _.sortBy(items_inferiores, 'error_proyectado').reverse()\r\n  let total_error_proyectado_inferiores: number = 0\r\n  for (let k in items_inferiores) {\r\n    let factor_incremental = roundup2(gammaInv(1 - riesgo_aceptacion / 100, 1 + parseInt(k) + 1))\r\n    factor_incremental -= roundup2(gammaInv(1 - riesgo_aceptacion / 100, 1 + parseInt(k)))\r\n    factor_incremental = Math.round(factor_incremental * 100) / 100\r\n\r\n    tolerancia_incremental += items_inferiores[k]['error_proyectado'] * factor_incremental\r\n    total_error_proyectado_inferiores += items_inferiores[k]['error_proyectado']\r\n  }\r\n\r\n  const precision_basica: number = intervalo * factor_confianza\r\n\r\n  tolerancia_incremental -= total_error_proyectado_inferiores\r\n\r\n  return precision_basica + tolerancia_incremental\r\n}\r\n","declare var app: any\r\n\r\nexport const isEmpty = (value: any) => {\r\n  if (_.isNumber(value)) {\r\n    return false\r\n  }\r\n\r\n  return _.size(value) == 0\r\n}\r\n\r\nexport const cacheMuestra = (muestra: MuestraItem) => {\r\n  const cacheKey = `muestras_${app.vars.ID_MUESTREO}`\r\n  let muestras: { [s: string]: number }\r\n  let muestrasBackup = localStorage.getItem(cacheKey)\r\n  muestras = !muestrasBackup ? {} : JSON.parse(muestrasBackup)\r\n  if (isEmpty(muestra.r)) {\r\n    muestras = _.omit(muestras, muestra.cod)\r\n  } else {\r\n    muestras[muestra.cod] = parseFloat(muestra.r + '')\r\n  }\r\n\r\n  localStorage.setItem(cacheKey, JSON.stringify(muestras))\r\n}\r\n\r\nexport const getCacheAllMuestra = () => {\r\n  const cacheKey = `muestras_${app.vars.ID_MUESTREO}`\r\n  let muestras: { [s: string]: number }\r\n  let muestrasBackup = localStorage.getItem(cacheKey)\r\n  muestras = !muestrasBackup ? {} : JSON.parse(muestrasBackup)\r\n\r\n  return muestras\r\n}\r\n","module.exports = React;","module.exports = ReactDOM;"],"sourceRoot":""}