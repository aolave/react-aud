{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/global/AuthorIconLog.tsx","webpack:///./src/global/ButtonEdit.tsx","webpack:///./src/global/EditorPreview.tsx","webpack:///./src/global/ErrorHandler.tsx","webpack:///./src/global/PasoSelect.tsx","webpack:///./src/global/StatusButtonAction.tsx","webpack:///./src/global/Tooltip.tsx","webpack:///./src/proyecto__hoja_trabajo/Attachments.tsx","webpack:///./src/proyecto__hoja_trabajo/sidebar/hallazgo_edit.tsx","webpack:///./src/proyecto__hoja_trabajo/sidebar/hallazgo_list.tsx","webpack:///./src/proyecto__hoja_trabajo/sidebar/hallazgo_modal.tsx","webpack:///./src/proyecto__hoja_trabajo/sidebar/menuitem.tsx","webpack:///./src/proyecto__hoja_trabajo/sidebar/menuitem__new.tsx","webpack:///./src/proyecto__hoja_trabajo/sidebar/menuitem_hallazgo.tsx","webpack:///./src/proyecto__hoja_trabajo/sidebar/menuitem_revision.tsx","webpack:///./src/proyecto__hoja_trabajo/sidebar/panel_header.tsx","webpack:///./src/proyecto__hoja_trabajo/sidebar/revision_list.tsx","webpack:///./src/proyecto__hoja_trabajo/utils_hallazgo.ts","webpack:///./src/proyecto__hoja_trabajo/utils_truncate.ts","webpack:///./src/proyecto__riesgo/App.tsx","webpack:///./src/proyecto__riesgo/ProyectoRiesgoCreateModal.tsx","webpack:///./src/proyecto__riesgo/ProyectoRiesgoListContext.ts","webpack:///./src/proyecto__riesgo/ProyectoRiesgoListSidebar.tsx","webpack:///./src/proyecto__riesgo/ProyectoRiesgoModal.tsx","webpack:///./src/proyecto__riesgo/ProyectoRiesgoUtils.tsx","webpack:///./src/proyecto__riesgo/RiesgoModel.ts","webpack:///./src/proyecto__riesgo/TabRiesgos.tsx","webpack:///./src/proyecto__riesgo/index.tsx","webpack:///./src/proyecto__riesgo/sidebar/menuitem__model_manager.ts","webpack:///external \"React\"","webpack:///external \"ReactDOM\""],"names":[],"mappings":"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","file":"proyecto__riesgo.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"proyecto__riesgo\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonpwebpackLibs\"] = window[\"webpackJsonpwebpackLibs\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./src/proyecto__riesgo/index.tsx\",\"vendors~proyecto__riesgo\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","/// <reference path=\"../@types/global/AuthorIconLog.d.ts\" />\r\n\r\nimport { Component } from 'react'\r\nimport classnames from 'classnames'\r\n\r\nimport Icon from 'semantic-ui-react/dist/commonjs/elements/Icon/Icon'\r\nimport Button from 'semantic-ui-react/dist/commonjs/elements/Button/Button'\r\nimport Loader from 'semantic-ui-react/dist/commonjs/elements/Loader/Loader'\r\nimport Popup from 'semantic-ui-react/dist/commonjs/modules/Popup/Popup'\r\nimport Dimmer from 'semantic-ui-react/dist/commonjs/modules/Dimmer/Dimmer'\r\n\r\nexport class AuthorIconLog extends Component<AuthorIconLogProps, {}> {\r\n  render() {\r\n    let classes: string | string[] = [ 'author-icon-log' ]\r\n\r\n    if (this.props.className) {\r\n      classes.push(this.props.className)\r\n    }\r\n    if (this.props.inline) {\r\n      classes.push('inline')\r\n    }\r\n\r\n    classes = classnames(classes, this.props.size)\r\n\r\n    let icon = (\r\n      <Icon\r\n        name='user circle'\r\n        size={this.props.size}\r\n        color={_.size(this.props.log) == 0 ? null : this.props.iconColor}\r\n        disabled={_.size(this.props.log) == 0}\r\n      />\r\n    )\r\n    if (this.props.alertText) {\r\n      icon = (\r\n        <Icon.Group>\r\n          {icon}\r\n          <Icon corner='top right' color='red' name='warning circle' />\r\n        </Icon.Group>\r\n      )\r\n    }\r\n\r\n    let iconComp\r\n    if (!this.props.inline) {\r\n      iconComp = (\r\n        <div>\r\n          {this.props.label && <span className='lb'>{this.props.label}</span>}\r\n          {icon}\r\n        </div>\r\n      )\r\n    } else {\r\n      const item = this.props.log == null ? null : this.props.log[0]\r\n      iconComp = (\r\n        <div>\r\n          {this.props.label && <span className='lb'>{this.props.label}</span>}\r\n          {icon}\r\n          {this.props.alertText && (\r\n            <span className='alert-text'>\r\n              <Icon color='red' name='warning circle' /> {this.props.alertText}\r\n            </span>\r\n          )}\r\n          {item && (\r\n            <div className='content user-info'>\r\n              <div className='user-sigla'>{item.User.sigla}</div>\r\n              <time dateTime={Date.create(item.ts).format('{year}-{MM}-{dd}')}>\r\n                {Date.create(item.ts).format('{year}-{MM}-{dd}')}\r\n              </time>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <div className={classes}>\r\n        <Popup\r\n          trigger={iconComp}\r\n          position='bottom center'\r\n          className='author-icon-log-popup'\r\n          pinned\r\n          size={this.props.size}\r\n        >\r\n          <Popup.Header>\r\n            {this.props.name}\r\n            {this.props.alertText && (\r\n              <div className='alert-text'>\r\n                <Icon color='red' name='warning circle' /> {this.props.alertText}\r\n              </div>\r\n            )}\r\n          </Popup.Header>\r\n          <Popup.Content>\r\n            {this.props.log == null ? (\r\n              <div className='label'>Sin Especificar</div>\r\n            ) : (\r\n              <table className='table nowrap'>\r\n                <tbody>\r\n                  {this.props.log.map((item, k) => {\r\n                    return (\r\n                      <tr key={k}>\r\n                        <td>\r\n                          {icon} {item.User.name} ({item.User.sigla})\r\n                        </td>\r\n                        <td>\r\n                          <em>{Date.create(item.ts).format('{year}-{MM}-{dd}')}</em>\r\n                        </td>\r\n                      </tr>\r\n                    )\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            )}\r\n          </Popup.Content>\r\n        </Popup>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport class AuthorIconLogEditable extends Component<AuthorIconLogEditableProps, AuthorIconLogEditableState> {\r\n  state = {\r\n    isLoading: false\r\n  }\r\n\r\n  static defaultProps = {\r\n    disableEdit: false\r\n  }\r\n\r\n  onClickEdit = (ev: React.SyntheticEvent) => {\r\n    ev.preventDefault()\r\n    this.setState({ isLoading: true })\r\n    this.props.onClickEdit()\r\n  }\r\n\r\n  render() {\r\n    let classes: string | string[] = [ 'author-icon-log' ]\r\n\r\n    if (this.props.className) {\r\n      classes.push(this.props.className)\r\n    }\r\n\r\n    classes = classnames(classes, this.props.size)\r\n\r\n    const icon = (\r\n      <Icon\r\n        name='user circle'\r\n        size={this.props.size}\r\n        color={this.props.log == null ? null : this.props.iconColor}\r\n        disabled={this.props.log == null}\r\n      />\r\n    )\r\n\r\n    const iconComp = (\r\n      <div style={{ position: 'relative' }}>\r\n        <Dimmer inverted active={this.state.isLoading}>\r\n          <Loader inverted />\r\n        </Dimmer>\r\n        {this.props.label && <span className='lb'>{this.props.label}</span>}\r\n        {icon}\r\n        <Button\r\n          className='action edit'\r\n          disabled={this.props.disableEdit}\r\n          compact\r\n          size='mini'\r\n          color={this.props.iconColor}\r\n          onClick={this.onClickEdit}\r\n        >\r\n          {this.props.editText}\r\n        </Button>\r\n      </div>\r\n    )\r\n\r\n    return (\r\n      <div className={classes}>\r\n        <Popup trigger={iconComp} position='bottom center' pinned size={this.props.size}>\r\n          <Popup.Header content={this.props.name} />\r\n          <Popup.Content>\r\n            {this.props.log == null ? (\r\n              <div className='label'>Sin Especificar</div>\r\n            ) : (\r\n              <table className='table nowrap'>\r\n                <tbody>\r\n                  {this.props.log.map((item, k) => {\r\n                    return (\r\n                      <tr key={k}>\r\n                        <td>\r\n                          {icon} {item.User.name} ({item.User.sigla})\r\n                        </td>\r\n                        <td>\r\n                          <em>{Date.create(item.ts).format('{year}-{MM}-{dd}')}</em>\r\n                        </td>\r\n                      </tr>\r\n                    )\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            )}\r\n          </Popup.Content>\r\n        </Popup>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\ntype AuthorIconLogDefaultWrapperProps = {\r\n  model: Partial<IAuthorLog>\r\n  size?: 'huge' | 'large' | 'small' | 'mini' | 'tiny'\r\n  className?: string\r\n}\r\n\r\nexport class AuthorIconLogDefaultWrapper extends Component<AuthorIconLogDefaultWrapperProps> {\r\n  render() {\r\n    const { model } = this.props\r\n\r\n    const alertTextRevisado =\r\n      model.fecha_completado &&\r\n      model.fecha_revision &&\r\n      Date.create(model.fecha_completado) > Date.create(model.fecha_revision)\r\n        ? 'Modificado despues de Revisado'\r\n        : null\r\n\r\n    return (\r\n      <div className={classnames('author-icon-log-wrapper', this.props.size, this.props.className)}>\r\n        <AuthorIconLog log={model.UpdateLog} name='Preparado por' label='P' iconColor='green' size={this.props.size} />\r\n        <AuthorIconLog\r\n          log={model.RevisionLog}\r\n          name='Revisado por'\r\n          label='R'\r\n          iconColor='olive'\r\n          size={this.props.size}\r\n          alertText={alertTextRevisado}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import Button from 'semantic-ui-react/dist/commonjs/elements/Button'\r\nimport Icon from 'semantic-ui-react/dist/commonjs/elements/Icon/Icon'\r\nimport cx from 'classnames'\r\n\r\nconst ButtonEdit = (props: any) => {\r\n  let { children, ...buttonProps } = props\r\n  buttonProps.className = cx(buttonProps.className, 'action')\r\n  buttonProps = { icon: true, basic: true, compact: true, size: 'mini', title: 'Editar', ...buttonProps }\r\n\r\n  if (typeof children == 'undefined') {\r\n    children = <Icon name='pencil square' color='green' size='large' />\r\n  }\r\n\r\n  return (\r\n    <Button {...buttonProps} type='button'>\r\n      {children}\r\n    </Button>\r\n  )\r\n}\r\n\r\nexport default ButtonEdit\r\n","import { PureComponent, Fragment, createRef, SyntheticEvent } from 'react'\r\n\r\nimport Modal from 'semantic-ui-react/dist/commonjs/modules/Modal/Modal'\r\n\r\nimport { instance as eventStack } from '@semantic-ui-react/event-stack'\r\nimport keyboardKey from 'keyboard-key'\r\nimport CKeditor from 'ckeditor4-react'\r\nimport cx from 'classnames'\r\n\r\nimport ButtonEdit from './ButtonEdit'\r\nimport { AttachmentListPanel, cleanAttachmentFrom } from '../proyecto__hoja_trabajo/Attachments'\r\n\r\ndeclare var app: any\r\n\r\nconst CKEDITOR_OPTIONS: any = {\r\n  basic: {\r\n    height: 150,\r\n    toolbar: [\r\n      { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ], items: [ 'Bold', 'Italic' ] },\r\n      {\r\n        name: 'paragraph',\r\n        groups: [ 'list', 'indent', 'blocks', 'align', 'bidi' ],\r\n        items: [ 'NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'TextColor' ]\r\n      }\r\n    ],\r\n    autoParagraph: false,\r\n    removePlugins: 'elementspath, uploadfile, uploadfileab, resize',\r\n    extraPlugins: 'openlink'\r\n  }\r\n}\r\n\r\nexport default class EditorPreview extends PureComponent<EditorPreviewProps, EditorPreviewState> {\r\n  private ckeditorComp: React.RefObject<CKeditorComp>\r\n  private _cachedEditor: CKEDITOR.editor\r\n\r\n  private previewRef = createRef<HTMLDivElement>()\r\n\r\n  private autosaveId: NodeJS.Timeout\r\n\r\n  static AUTOSAVE_DELAY: number = 60\r\n\r\n  static defaultProps = {\r\n    open: false,\r\n    autosave: false,\r\n    required: false,\r\n    editable: true,\r\n    openOnClickPreview: true,\r\n    ckeditorOptions: {}\r\n  }\r\n\r\n  constructor(props: EditorPreviewProps) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      isModalEditOpen: this.props.open,\r\n      isAutosaving: false,\r\n      isLoading: true,\r\n      attachments: null,\r\n      isLoadingAttachments: false\r\n    }\r\n  }\r\n\r\n  handleEscape = (e: Event) => {\r\n    if (keyboardKey.getCode(e) !== keyboardKey.Escape) return\r\n\r\n    if (typeof CKEDITOR !== 'undefined' && CKEDITOR.dialog.getCurrent() != null) {\r\n      // si existe un CKEditor dialog abierto, no cerrar el modal.\r\n      return\r\n    }\r\n\r\n    this.onClose()\r\n  }\r\n\r\n  getEditor(): CKEDITOR.editor {\r\n    if (this.ckeditorComp != null) {\r\n      return (this.ckeditorComp as any).editor\r\n    }\r\n\r\n    if (this._cachedEditor) {\r\n      return this._cachedEditor\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  onChange = (evt: any) => {\r\n    if (this.props.inline) {\r\n      this.props.onSave(evt.editor, false, false)\r\n    }\r\n\r\n    if (!this._cachedEditor) {\r\n      this._cachedEditor = evt.editor\r\n    }\r\n\r\n    if (!this.props.autosave) {\r\n      return\r\n    }\r\n\r\n    if (!this.autosaveId) {\r\n      this.autosaveId = setTimeout(this.autosave, EditorPreview.AUTOSAVE_DELAY * 1000)\r\n    }\r\n  }\r\n\r\n  onClickEdit = (ev: SyntheticEvent) => {\r\n    ev.preventDefault()\r\n    this.setState({ isModalEditOpen: true, isLoading: true })\r\n  }\r\n\r\n  onSave = () => {\r\n    if (this.autosaveId) {\r\n      clearTimeout(this.autosaveId)\r\n      this.autosaveId = null\r\n    }\r\n\r\n    if ($.isFunction(this.props.onSave)) {\r\n      this.props.onSave(this.getEditor(), true, false, () => {\r\n        this.setState({ isAutosaving: false })\r\n        this.fetchAttachments()\r\n      })\r\n\r\n      this.setState({ isModalEditOpen: false })\r\n    } else {\r\n      this.setState({ isModalEditOpen: false, isAutosaving: false })\r\n      this.fetchAttachments()\r\n    }\r\n  }\r\n\r\n  onCancel = () => {\r\n    this.setState({ isModalEditOpen: false })\r\n    if ($.isFunction(this.props.onClose)) {\r\n      this.props.onClose()\r\n    }\r\n  }\r\n\r\n  onClose = () => {\r\n    if (this.autosaveId) {\r\n      clearInterval(this.autosaveId)\r\n      this.autosaveId = null\r\n    }\r\n\r\n    this.setState({ isModalEditOpen: false })\r\n    if ($.isFunction(this.props.onClose)) {\r\n      this.props.onClose()\r\n    }\r\n  }\r\n\r\n  onModalMount = () => {\r\n    eventStack.sub('keydown', this.handleEscape, { pool: 'default' })\r\n\r\n    if (this.state.attachments == null) {\r\n      this.fetchAttachments()\r\n    }\r\n  }\r\n\r\n  autosave = () => {\r\n    this.setState({ isAutosaving: true })\r\n    let ckeditor = this.getEditor()\r\n    if (ckeditor != null) {\r\n      this.props.onSave(ckeditor, false, true, () => this.setState({ isAutosaving: false }))\r\n      this.fetchAttachments()\r\n    }\r\n\r\n    if (this.autosaveId) {\r\n      clearInterval(this.autosaveId)\r\n      this.autosaveId = null\r\n    }\r\n  }\r\n\r\n  assertRequired() {\r\n    if (!this.props.editable) {\r\n      return false\r\n    }\r\n    if (!this.props.required) {\r\n      return false\r\n    }\r\n\r\n    const ckeditor = this.getEditor()\r\n\r\n    if (_.trim(ckeditor.getData()) != '') {\r\n      return false\r\n    }\r\n\r\n    bootbox.alert('Esta campo es requerido, por lo tanto no puede quedar vacío.')\r\n\r\n    return true\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps: EditorPreviewProps) {\r\n    if (nextProps.open && !this.state.isModalEditOpen) {\r\n      this.setState({ isModalEditOpen: true })\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    $(this.previewRef.current).find('a[href]').each(function() {\r\n      $(this).attr('target', '_blank')\r\n    })\r\n  }\r\n\r\n  onClickPreview = (ev: SyntheticEvent) => {\r\n    if (this.props.onClickPreview) {\r\n      this.props.onClickPreview(ev)\r\n    }\r\n\r\n    if (this.props.openOnClickPreview) {\r\n      this.setState({ isModalEditOpen: true })\r\n    }\r\n  }\r\n\r\n  parseCkeditorOptions() {\r\n    let { ckeditorOptions } = this.props\r\n\r\n    if (typeof ckeditorOptions == 'string') {\r\n      ckeditorOptions = CKEDITOR_OPTIONS[ckeditorOptions]\r\n    }\r\n\r\n    if (typeof this.props.ckeditorUploadOptions !== 'undefined') {\r\n      const defaultUrl = 'proyecto/' + app.vars.idproyecto + '/adjunto/upload'\r\n      const { url = defaultUrl, model, modelId } = this.props.ckeditorUploadOptions\r\n\r\n      if (modelId === null || modelId === undefined) {\r\n        ckeditorOptions.removePlugins = 'elementspath,uploadimage,uploadfile,uploadfileab'\r\n      } else {\r\n        ckeditorOptions.uploadUrl = url_for(`${url}?model=${model}&model_id=${modelId}`)\r\n        ckeditorOptions.imageUploadUrl = url_for(`${url}?model=${model}&model_id=${modelId}`)\r\n        ckeditorOptions.filebrowserUploadUrl = url_for(`${url}?model=${model}&model_id=${modelId}&n=attachment`)\r\n      }\r\n    }\r\n\r\n    return ckeditorOptions\r\n  }\r\n\r\n  fetchAttachments() {\r\n    if (typeof this.props.ckeditorUploadOptions === 'undefined') {\r\n      return\r\n    }\r\n\r\n    const { model, modelId } = this.props.ckeditorUploadOptions\r\n\r\n    this.setState({ isLoadingAttachments: true })\r\n    $.getJSON(url_for(`proyecto/${app.vars.idproyecto}/adjunto/json`), {\r\n      model: model,\r\n      model_id: modelId\r\n    }).done((res) => {\r\n      this.setState({ attachments: res.response, isLoadingAttachments: false })\r\n    })\r\n  }\r\n\r\n  onUpdateAttachment = () => {\r\n    this.fetchAttachments()\r\n  }\r\n\r\n  onDeleteAttachment = (adjunto: ProyectoAttachment, cb: () => void) => {\r\n    this.setState({ isLoadingAttachments: true })\r\n\r\n    const data = cleanAttachmentFrom(this.props.data, adjunto)\r\n\r\n    if ($.isFunction(cb)) {\r\n      cb()\r\n    }\r\n\r\n    let ckeditor = this.getEditor()\r\n    if (ckeditor) {\r\n      ckeditor.setData(data)\r\n      this.autosave()\r\n    }\r\n  }\r\n\r\n  getCkeditorOptions() {\r\n    const self = this\r\n\r\n    let ckeditorOptions = Object.assign(\r\n      {\r\n        height: 200,\r\n        toolbar: [\r\n          { name: 'clipboard', items: [ 'Cut', 'Copy', 'Paste', '-', 'Undo', 'Redo' ] },\r\n          { name: 'links', items: [ 'Link', 'pasolink', 'muestreolink', 'Attachments' ] },\r\n          { name: 'insert', items: [ 'Table', 'SpecialChar' ] },\r\n          { name: 'tools', items: [ 'Maximize' ] },\r\n          { name: 'basicstyles', items: [ 'Bold', 'Italic', 'Underline' ] },\r\n          {\r\n            name: 'paragraph',\r\n            items: [\r\n              'NumberedList',\r\n              'BulletedList',\r\n              '-',\r\n              'Outdent',\r\n              'Indent',\r\n              '-',\r\n              'JustifyLeft',\r\n              'JustifyCenter',\r\n              'JustifyRight',\r\n              'JustifyBlock',\r\n              '-',\r\n              'TextColor'\r\n            ]\r\n          },\r\n          { name: 'styles', items: [ 'Styles', 'Format' ] }\r\n        ],\r\n        autoParagraph: false,\r\n        enterMode: CKEDITOR.ENTER_BR,\r\n        removePlugins: 'elementspath',\r\n        extraPlugins:\r\n          'uploadimage,pastebase64,uploadfileab,openlink,attach,justify,colorbutton,pastefromexcel,colordialog,pasolink',\r\n        openlink_modifier: 0,\r\n        onAttachmentUpload: function(response: string, editor: CKEDITOR.editor) {\r\n          response = response\r\n            .replace('<pre>', '')\r\n            .replace('<pre style=\"word-wrap: break-word; white-space: pre-wrap;\">', '')\r\n            .replace('</pre>', '')\r\n          var rs = JSON.parse(response)\r\n          console.log(rs)\r\n          _.forEach(rs, function(r) {\r\n            if (r.uploaded) {\r\n              editor.insertHtml(\r\n                \"<a href='\" + r.url + \"' target='_blank' class='proyecto-attachment' >\" + r.fileName + '</a><br> '\r\n              )\r\n            } else {\r\n              alert(r.error)\r\n            }\r\n          })\r\n          CKEDITOR.dialog.getCurrent().hide()\r\n          if (self.props.onUpload) {\r\n            self.props.onUpload()\r\n          }\r\n          self.fetchAttachments()\r\n          const ckeditor_comp = self.getEditor()\r\n          if (ckeditor_comp) {\r\n            self.props.onSave(ckeditor_comp, false, false)\r\n          }\r\n        }\r\n      },\r\n      this.parseCkeditorOptions()\r\n    )\r\n\r\n    ckeditorOptions.on = Object.assign(\r\n      {\r\n        fileUploadRequest: function(ev: any) {\r\n          const loader = ev.data.fileLoader\r\n          loader.on('abort', function() {\r\n            $.unblockUI()\r\n          })\r\n          loader.on('error', function() {\r\n            console.log(loader)\r\n            $.unblockUI()\r\n          })\r\n          $.blockUI({\r\n            message:\r\n              '<div class=\"ajax-loader-snake-32  _a-center\"></div><h3 class=\"loading-block-text\">Cargando archivo al servidor.<br> Por favor Espere ...</h3>'\r\n          })\r\n        },\r\n        fileUploadResponse: function() {\r\n          $.unblockUI()\r\n          this.fire('change')\r\n        },\r\n        paste: (evt: any) => {\r\n          evt.data.dataValue = evt.data.dataValue.replace(/(min-)?width:.+?;/g, '') // remove width\r\n        }\r\n      },\r\n      ckeditorOptions.on || {}\r\n    )\r\n\r\n    return ckeditorOptions\r\n  }\r\n\r\n  renderFooter() {\r\n    const { footer } = this.props\r\n\r\n    if (footer === 'AttachmentList') {\r\n      return (\r\n        <AttachmentListPanel\r\n          isLoading={this.state.isLoadingAttachments}\r\n          attachments={this.state.attachments}\r\n          onUpdateItem={this.onUpdateAttachment}\r\n          onDeleteItem={this.onDeleteAttachment}\r\n        />\r\n      )\r\n    }\r\n\r\n    return footer\r\n  }\r\n\r\n  renderModal() {\r\n    if (!this.state.isModalEditOpen) {\r\n      return\r\n    }\r\n\r\n    let classNames = cx([ 'editor-preview-modal', this.props.className ? this.props.className + '-modal' : false ])\r\n\r\n    return (\r\n      <Modal\r\n        className={classNames}\r\n        open\r\n        closeIcon\r\n        closeOnDimmerClick={false}\r\n        dimmer='inverted'\r\n        onClose={this.onClose}\r\n        closeOnEscape={false}\r\n        onMount={this.onModalMount}\r\n        size='large'\r\n      >\r\n        <Modal.Content>{this.renderEditor()}</Modal.Content>\r\n        {this.props.editable ? (\r\n          <Modal.Actions>\r\n            {this.props.leftActions}\r\n            <button className='ui button negative' onClick={this.onCancel}>\r\n              Cancelar\r\n            </button>\r\n            <button className='ui button primary' onClick={this.onSave}>\r\n              Guardar\r\n            </button>\r\n          </Modal.Actions>\r\n        ) : (\r\n          <Modal.Actions>\r\n            {this.props.leftActions}\r\n            <button className='ui button negative' onClick={this.onCancel}>\r\n              Cerrar\r\n            </button>\r\n          </Modal.Actions>\r\n        )}\r\n      </Modal>\r\n    )\r\n  }\r\n\r\n  renderEditor() {\r\n    let label\r\n    if (this.props.label || this.props.labelTitle) {\r\n      label =\r\n        '<div class=\"editor-label\"> <strong class=\"editor-label-title\">' +\r\n        (this.props.labelTitle || '') +\r\n        '</strong> ' +\r\n        (this.props.label || '') +\r\n        ' </div>'\r\n    }\r\n\r\n    return (\r\n      <Fragment>\r\n        {label && <div dangerouslySetInnerHTML={{ __html: label }} />}\r\n        <div style={{ minHeight: '200px' }}>\r\n          <div className='loading'>\r\n            <div className={this.state.isAutosaving ? '' : 'ui-helper-hidden'}>\r\n              <span className='ajax-loader-snake' /> Guardando...\r\n            </div>\r\n          </div>\r\n          <div className={cx('ui dimmer inverted', { active: this.state.isLoading })}>\r\n            <div className='ui loader'>Cargando...</div>\r\n          </div>\r\n          <CKeditor\r\n            ref={(c: React.RefObject<CKeditorComp>) => (this.ckeditorComp = c)}\r\n            data={this.props.data}\r\n            config={this.getCkeditorOptions()}\r\n            onChange={this.onChange}\r\n            onInstanceReady={() => this.setState({ isLoading: false })}\r\n            readOnly={!this.props.editable}\r\n          />\r\n        </div>\r\n        {this.renderFooter()}\r\n      </Fragment>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    if (this.props.inline) {\r\n      return <div className='editor-inline'> {this.renderEditor()}</div>\r\n    }\r\n\r\n    let preview = this.props.preview == null ? this.props.data || '' : this.props.preview\r\n\r\n    let classNames = cx([ 'editor-preview', this.props.className, preview ? 'text-non-empty' : 'text-empty' ])\r\n\r\n    if (this.props.prefixPreview) {\r\n      preview = '<strong class=\"editor-preview-title\" >' + this.props.prefixPreview + '</strong> ' + preview\r\n    }\r\n\r\n    preview = preview.replace(/(min-)?width:.+?;/g, '')\r\n\r\n    return (\r\n      <Fragment>\r\n        <div className={cx('editor-preview-wrapper', this.props.wrapperClassName)} onClick={this.onClickPreview}>\r\n          <div\r\n            ref={this.previewRef}\r\n            className={classNames}\r\n            dangerouslySetInnerHTML={{ __html: preview }}\r\n            style={this.props.previewStyle}\r\n          />\r\n          {this.props.editable && (\r\n            <div className='action-list'>\r\n              <ButtonEdit onClick={this.onClickEdit} />\r\n            </div>\r\n          )}\r\n        </div>\r\n        {this.renderModal()}\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n","import { Component } from 'react'\r\n\r\ntype DefaultErrorHandlerProps = {\r\n  errorMessage?: string | JSX.Element\r\n}\r\n\r\nexport class DefaultErrorHandler extends Component<DefaultErrorHandlerProps> {\r\n  state = {\r\n    hasError: false\r\n  }\r\n\r\n  static defaultProps: Partial<DefaultErrorHandlerProps> = {\r\n    errorMessage: null\r\n  }\r\n\r\n  static getDerivedStateFromError(error: any) {\r\n    return { hasError: true }\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\r\n    if (this.isLocalhost()) {\r\n      alert('ERROR: ' + error.message)\r\n    }\r\n  }\r\n\r\n  isLocalhost() {\r\n    return window.location.host === 'auditbrain.local'\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return this.props.errorMessage\r\n    }\r\n\r\n    return this.props.children\r\n  }\r\n}\r\n","import { PureComponent, SyntheticEvent, createContext } from 'react'\r\nimport cx from 'classnames'\r\n\r\ndeclare var app: any\r\n\r\ntype HojaTrabajoTreeItem = {\r\n  id: string\r\n  descripcion: string\r\n  type: string\r\n  code?: string\r\n  items?: HojaTrabajoTreeItem[]\r\n}\r\n\r\ntype PasoSelectContextType = {\r\n  selectedIds: string[]\r\n  updateSelectedIds: (selectedIds: string[]) => void\r\n}\r\n\r\nconst PasoSelectContext = createContext<PasoSelectContextType>({ selectedIds: [], updateSelectedIds: () => {} })\r\n\r\ntype PasoSelectProps = {\r\n  selectedIds?: string[]\r\n  onChange?: (selectedIds: string[]) => void\r\n}\r\n\r\ntype PasoSelectState = {\r\n  tree: HojaTrabajoTreeItem[]\r\n  selectedIds: string[]\r\n}\r\n\r\nexport class PasoSelect extends PureComponent<PasoSelectProps, PasoSelectState> {\r\n  static MasterDataTree: HojaTrabajoTreeItem[] = null\r\n\r\n  state: PasoSelectState = {\r\n    tree: null,\r\n    selectedIds: []\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (PasoSelect.MasterDataTree == null && app.vars.masterdatatree) {\r\n      PasoSelect.MasterDataTree = parseTreeToItems(app.vars.masterdatatree)\r\n    }\r\n\r\n    if (PasoSelect.MasterDataTree == null) {\r\n      $.getJSON(url_for(`proyecto/${app.vars.idproyecto}/master_data_tree`), {\r\n        export_options: { type: 'pasolink' }\r\n      }).done((res) => {\r\n        PasoSelect.MasterDataTree = app.vars.masterdatatree = parseTreeToItems(res.response)\r\n        this.setState({ tree: PasoSelect.MasterDataTree })\r\n      })\r\n    } else {\r\n      this.setState({ tree: PasoSelect.MasterDataTree })\r\n    }\r\n\r\n    if (this.props.selectedIds) {\r\n      this.setState({ selectedIds: this.props.selectedIds })\r\n    }\r\n  }\r\n\r\n  updateSelectedIds = (selectedIds: string[]) => {\r\n    this.setState({ selectedIds })\r\n\r\n    if ($.isFunction(this.props.onChange)) {\r\n      this.props.onChange(selectedIds)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.state.tree === null) {\r\n      return (\r\n        <div className='ui segment' style={{ minHeight: 120 }}>\r\n          <div className='ui active transition inverted dimmer'>\r\n            <div className='content'>\r\n              <div className='ui active inverted text loader'>Cargando pasos...</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <div className=''>\r\n        <PasoSelectContext.Provider\r\n          value={{ selectedIds: this.state.selectedIds, updateSelectedIds: this.updateSelectedIds }}\r\n        >\r\n          <ul className='methodology checkbox-list methodology-all unstyled nav nav-stacked'>\r\n            {_.map(this.state.tree, (fase) => {\r\n              return <TreeItemFase key={fase.id} item={fase} />\r\n            })}\r\n          </ul>\r\n        </PasoSelectContext.Provider>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nclass TreeItemFase extends PureComponent<{ item: HojaTrabajoTreeItem }, { collapsed: boolean }> {\r\n  state = {\r\n    collapsed: true\r\n  }\r\n\r\n  onClick = (ev: SyntheticEvent) => {\r\n    ev.preventDefault()\r\n    this.setState((prevState) => {\r\n      return { collapsed: !prevState.collapsed }\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { item } = this.props\r\n    const { collapsed } = this.state\r\n\r\n    return (\r\n      <li className={cx('methodology-item', item.type)}>\r\n        <div className='methodology-item-head'>\r\n          <a href='#' onClick={this.onClick}>\r\n            <span className='item-name'>{item.descripcion}</span>\r\n          </a>\r\n        </div>\r\n        <ul className={cx('methodology unstyled collapse', collapsed ? 'hide' : 'in')}>\r\n          {_.map(item.items as any[], (subitem: HojaTrabajoTreeItem) => {\r\n            return subitem.type == 'paso' ? (\r\n              <TreeItemPaso key={subitem.id} item={subitem} />\r\n            ) : (\r\n              <TreeItemFase item={subitem} key={subitem.id} />\r\n            )\r\n          })}\r\n        </ul>\r\n      </li>\r\n    )\r\n  }\r\n}\r\n\r\nclass TreeItemPaso extends PureComponent<{ item: HojaTrabajoTreeItem }, { collapsed: boolean }> {\r\n  static contextType = PasoSelectContext\r\n\r\n  onChangeCheckbox = (ev: SyntheticEvent) => {\r\n    const { item } = this.props\r\n    let { selectedIds, updateSelectedIds } = this.context\r\n\r\n    if (selectedIds.includes(item.id)) {\r\n      selectedIds = _.difference(selectedIds, [ item.id ])\r\n    } else {\r\n      selectedIds = _.union(selectedIds, [ item.id ])\r\n    }\r\n    updateSelectedIds(selectedIds)\r\n  }\r\n\r\n  render() {\r\n    const { item } = this.props\r\n    const { selectedIds } = this.context\r\n\r\n    return (\r\n      <li key={item.id} className='methodology-item paso'>\r\n        <div className='methodology-item-head'>\r\n          <label htmlFor={`paso-select-tree-paso-${item.id}`}>\r\n            <input\r\n              type='checkbox'\r\n              className='checkbox pull-right'\r\n              id={`paso-select-tree-paso-${item.id}`}\r\n              checked={selectedIds.includes(item.id)}\r\n              onChange={this.onChangeCheckbox}\r\n            />\r\n            <span className='item-name'>{item.descripcion}</span>\r\n          </label>\r\n        </div>\r\n      </li>\r\n    )\r\n  }\r\n}\r\n\r\nconst parseTreeToItems = (tree: any[]) => {\r\n  const retval = _.map(tree, (fase): HojaTrabajoTreeItem => {\r\n    return {\r\n      id: fase.id,\r\n      descripcion: fase.descripcion,\r\n      type: 'phase',\r\n      items: _.map(fase.Subfases, (subfase: any): HojaTrabajoTreeItem => {\r\n        return {\r\n          id: subfase.id,\r\n          descripcion: subfase.descripcion,\r\n          type: 'subphase',\r\n          items: _.map(subfase.Pasos, (paso: any): HojaTrabajoTreeItem => {\r\n            return {\r\n              id: paso.id,\r\n              descripcion: paso.descripcion,\r\n              code: paso.code,\r\n              type: 'paso'\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n  })\r\n\r\n  return retval\r\n}\r\n","import { PureComponent } from 'react'\r\n\r\nimport Popup from 'semantic-ui-react/dist/commonjs/modules/Popup/Popup'\r\nimport Button from 'semantic-ui-react/dist/commonjs/elements/Button/Button'\r\n\r\nimport cx from 'classnames'\r\n\r\ntype ButtonActionProps = {\r\n  onClick: () => void\r\n  disableText?: string\r\n  showAlert?: boolean\r\n  record?: {\r\n    fecha_completado?: string\r\n    fecha_revision?: string\r\n  }\r\n}\r\n\r\nexport class CompletadoButtonAction extends PureComponent<ButtonActionProps> {\r\n  render() {\r\n    const completado_disabled_text = this.props.disableText\r\n\r\n    return (\r\n      <Popup\r\n        trigger={\r\n          <div className='button-wrapper'>\r\n            <Button primary icon compact onClick={this.props.onClick} disabled={completado_disabled_text != null}>\r\n              {' '}\r\n              <i className='icon check' /> Completado\r\n            </Button>\r\n          </div>\r\n        }\r\n        content={completado_disabled_text}\r\n        header='Marcar como Completado | Opción deshabilitada'\r\n        disabled={completado_disabled_text == null}\r\n        className='disable-text'\r\n        on='hover'\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nexport class RevisadoButtonAction extends PureComponent<ButtonActionProps> {\r\n  render() {\r\n    let revisado_disabled_text = this.props.disableText\r\n    if (\r\n      (revisado_disabled_text === null || typeof revisado_disabled_text === 'undefined') &&\r\n      this.props.record &&\r\n      !this.props.record.fecha_completado\r\n    ) {\r\n      revisado_disabled_text = 'Debe estar primero en estado COMPLETADO, para poder marcarse como REVISADO.'\r\n    }\r\n\r\n    let showAlert: boolean\r\n    if ((this.props.showAlert === null || typeof this.props.showAlert === 'undefined') && this.props.record) {\r\n      const record = this.props.record\r\n      showAlert =\r\n        record.fecha_completado &&\r\n        record.fecha_revision &&\r\n        Date.create(record.fecha_completado) > Date.create(record.fecha_revision)\r\n    } else {\r\n      showAlert = this.props.showAlert\r\n    }\r\n\r\n    const icon_revisado_alert = showAlert ? (\r\n      <Popup\r\n        trigger={<i className='icon warning circle red' />}\r\n        content={'Ha recibido modificaciones después de su última revisión.'}\r\n      />\r\n    ) : null\r\n\r\n    return (\r\n      <Popup\r\n        trigger={\r\n          <div className='button-wrapper'>\r\n            <Button color='olive' icon compact onClick={this.props.onClick} disabled={revisado_disabled_text != null}>\r\n              {' '}\r\n              <i className='icon check fitted' />\r\n              <i className='icon check' /> Revisado {icon_revisado_alert}\r\n            </Button>\r\n          </div>\r\n        }\r\n        content={revisado_disabled_text}\r\n        header='Marcar como Revisado | Opción deshabilitada'\r\n        disabled={revisado_disabled_text == null}\r\n        className='disable-text'\r\n        on='hover'\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\ntype ButtonActionsProps = {\r\n  prepend?: JSX.Element\r\n  append?: JSX.Element\r\n  completado: { permission: string } & ButtonActionProps\r\n  revisado: { permission: string } & ButtonActionProps\r\n}\r\n\r\nexport class StatusButtonGroupActions extends PureComponent<ButtonActionsProps> {\r\n  render() {\r\n    return (\r\n      <div className='actions ab-status-actions'>\r\n        {this.props.prepend}\r\n        {user_has_role_permission(this.props.completado.permission) && (\r\n          <CompletadoButtonAction {...this.props.completado} />\r\n        )}\r\n        {user_has_role_permission(this.props.revisado.permission) && <RevisadoButtonAction {...this.props.revisado} />}\r\n        {this.props.append}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\ntype StatusDivBlockProps = {\r\n  status: string\r\n  className?: string\r\n  wrapperClassName?: string\r\n  hideLabel?: boolean\r\n}\r\n\r\nexport const StatusDivBlock = (props: StatusDivBlockProps) => {\r\n  return (\r\n    <div className={cx('lb-status-wrapper', props.wrapperClassName)}>\r\n      {!props.hideLabel && 'Estado:'}\r\n      <div className={cx(props.className, 'lb-status', `lb-status-${_.str.dasherize(props.status.toLowerCase())}`)}>\r\n        {props.status || ''}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { SFC, ReactNode } from 'react'\r\n\r\nimport Popup from 'semantic-ui-react/dist/commonjs/modules/Popup/Popup'\r\nimport Icon from 'semantic-ui-react/dist/commonjs/elements/Icon/Icon'\r\nimport { SemanticCOLORS } from 'semantic-ui-react/dist/commonjs/generic'\r\nimport getvalue from 'get-value'\r\n\r\ndeclare var app: any\r\n\r\ntype TooltipProps = {\r\n  title?: string\r\n  text: string | ReactNode\r\n  wide?: boolean | 'very'\r\n  iconColor?: SemanticCOLORS\r\n  iconSize?: 'mini' | 'tiny' | 'small' | 'large' | 'big' | 'huge' | 'massive'\r\n}\r\n\r\nexport const GenericTooltip: SFC<TooltipProps> = (props): JSX.Element => {\r\n  let content\r\n  if (typeof props.text == 'object') {\r\n    content = <div className='content'>{props.text}</div>\r\n  } else if (typeof props.text == 'string') {\r\n    if (props.text.substr(0, 1) == '@') {\r\n      content = getvalue(app.vars.texts, props.text.substr(1))\r\n    } else {\r\n      content = props.text\r\n    }\r\n\r\n    if (!content) {\r\n      return null\r\n    }\r\n\r\n    content = <div dangerouslySetInnerHTML={{ __html: content }} />\r\n  }\r\n\r\n  return (\r\n    <Popup\r\n      size='tiny'\r\n      wide={props.wide}\r\n      trigger={<Icon color={props.iconColor} size={props.iconSize} name='question circle' className='tooltip-icon' />}\r\n      header={props.title}\r\n      content={content}\r\n    />\r\n  )\r\n}\r\n\r\nGenericTooltip.defaultProps = {\r\n  iconColor: 'blue',\r\n  iconSize: 'small',\r\n  wide: false\r\n}\r\n","import { Component } from 'react'\r\n\r\nimport Icon from 'semantic-ui-react/dist/commonjs/elements/Icon'\r\nimport Label from 'semantic-ui-react/dist/commonjs/elements/Label'\r\nimport List from 'semantic-ui-react/dist/commonjs/elements/List'\r\nimport Popup from 'semantic-ui-react/dist/commonjs/modules/Popup'\r\nimport Dimmer from 'semantic-ui-react/dist/commonjs/modules/Dimmer/Dimmer'\r\nimport Loader from 'semantic-ui-react/dist/commonjs/elements/Loader/Loader'\r\n\r\nexport class AttachmentListItem extends Component<AttachmentListItemProps> {\r\n  private static getFileExtension(filename: string): string {\r\n    return filename.split('.').pop()\r\n  }\r\n\r\n  private static getFileIconUrl(file: string): string {\r\n    const extension = AttachmentListItem.getFileExtension(file)\r\n\r\n    const file_icon = function() {\r\n      switch (extension) {\r\n        case 'xls':\r\n        case 'xlsx':\r\n        case 'xlsm':\r\n        case 'xlsxm':\r\n          return 'excel'\r\n        case 'doc':\r\n        case 'docx':\r\n          return 'word'\r\n        case 'pdf':\r\n          return 'pdf'\r\n        case 'png':\r\n        case 'jpg':\r\n        case 'jpeg':\r\n        case 'bmp':\r\n        case 'gif':\r\n          return 'image'\r\n        case 'zip':\r\n        case 'rar':\r\n          return 'zip'\r\n        default:\r\n          return 'default'\r\n      }\r\n    }\r\n\r\n    return public_path(`images/file_icons/${file_icon()}.png`)\r\n  }\r\n\r\n  changeStatus(e: React.SyntheticEvent, status: 'completado' | 'revisado') {\r\n    e.preventDefault()\r\n\r\n    const url: string = url_for(\r\n      `proyecto/${this.props.attachment.id_proyecto}/adjunto/${this.props.attachment.id}/${status}`\r\n    )\r\n    $.blockUI({\r\n      message:\r\n        '<div class=\"ajax-loader-snake-32  _a-center\"></div><h3 class=\"loading-block-text\">Marcando archivo como ' +\r\n        _.str.capitalize(status) +\r\n        '.<br> Por favor Espere ...</h3>'\r\n    })\r\n\r\n    $.ajax(url, { type: 'POST', data: {}, dataType: 'json' })\r\n      .done((res) => {\r\n        this.props.onUpdate(res.response.record)\r\n        $.unblockUI()\r\n      })\r\n      .fail(() => {\r\n        $.pnotify({ text: 'El archivo no pudo ser actualizado.', type: 'error' })\r\n        $.unblockUI()\r\n      })\r\n  }\r\n\r\n  onRemove = (ev: React.SyntheticEvent) => {\r\n    ev.preventDefault()\r\n\r\n    const url: string = url_for(\r\n      `proyecto/${this.props.attachment.id_proyecto}/adjunto/${this.props.attachment.id}/remove`\r\n    )\r\n    bootbox.warningConfirm(\r\n      '¿Esta seguro de querer borrar este archivo?<br><br>Tenga en cuenta que el sistema intentará borrar automáticamente los enlaces existentes a este archivo.',\r\n      'Cancelar',\r\n      'Aceptar',\r\n      (r) => {\r\n        if (r) {\r\n          $.blockUI({\r\n            message:\r\n              '<div class=\"ajax-loader-snake-32  _a-center\"></div><h3 class=\"loading-block-text\">Borrando archivo.<br> Por favor Espere ...</h3>'\r\n          })\r\n          $.ajax(url, { type: 'POST', data: {}, dataType: 'json' })\r\n            .done(() => {\r\n              this.props.onDelete(this.props.attachment, () => $.unblockUI())\r\n            })\r\n            .fail(() => {\r\n              $.pnotify({ text: 'El archivo no pudo ser borrado.', type: 'error' })\r\n              $.unblockUI()\r\n            })\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const { attachment } = this.props\r\n\r\n    let completadoComp\r\n    if (attachment.fecha_completado) {\r\n      completadoComp = (\r\n        <div style={{ display: 'inline-block' }}>\r\n          <strong className='title'>(P) </strong>\r\n          <div\r\n            style={{ display: 'inline-block', minWidth: 20, textAlign: 'center', marginRight: 2 }}\r\n            title={`Preparado por: ${attachment.UpdateLog[0].User.name}`}\r\n          >\r\n            {attachment.UpdateLog[0].User.sigla}&nbsp;\r\n          </div>\r\n          <div style={{ display: 'inline-block' }} title={attachment.fecha_completado}>\r\n            <span className='icon-moon-calendar' />{' '}\r\n            {Date.create(attachment.fecha_completado).format('{year}-{MM}-{dd}')}\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    let revisadoComp\r\n    if (attachment.fecha_revisado) {\r\n      revisadoComp = (\r\n        <div style={{ display: 'inline-block' }}>\r\n          <strong className='title'>(R) </strong>\r\n          <div\r\n            style={{ display: 'inline-block', minWidth: 20, textAlign: 'center', marginRight: 2 }}\r\n            title={`Revisado por: ${attachment.RevisionLog[0].User.name}`}\r\n          >\r\n            {attachment.RevisionLog[0].User.sigla}&nbsp;\r\n          </div>\r\n          <div style={{ display: 'inline-block' }} title={attachment.fecha_revisado}>\r\n            <span className='icon-moon-calendar' /> {Date.create(attachment.fecha_revisado).format('{year}-{MM}-{dd}')}\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    let revisadoLink\r\n    if (user_has_role([ 'PM', 'SR' ])) {\r\n      if (attachment.fecha_completado) {\r\n        revisadoLink = (\r\n          <button style={{ marginLeft: '8px' }} onClick={(e) => this.changeStatus(e, 'revisado')} className='act'>\r\n            <span className='icon-moon-checkmark-8' /> Revisar\r\n          </button>\r\n        )\r\n      } else {\r\n        revisadoLink = (\r\n          <Popup\r\n            trigger={\r\n              <div className='button-wrapper'>\r\n                <button style={{ marginLeft: '8px' }} className='act disabled'>\r\n                  <span className='icon-moon-checkmark-8' /> Revisar\r\n                </button>\r\n              </div>\r\n            }\r\n            content='Esta archivo adjunto debe estar primero en estado COMPLETADO, para poder ser marcado como REVISADO'\r\n            header='Marcar como Revisado | Opción deshabilitada'\r\n            className='disable-text'\r\n            on='hover'\r\n          />\r\n        )\r\n      }\r\n    }\r\n\r\n    return (\r\n      <li key={attachment.id} style={{ marginBottom: 2 }}>\r\n        <div style={{ background: '#f5f9f8', borderRadius: 6, border: '1px solid #aecec7' }}>\r\n          <div className='col-md-1' style={{ marginTop: 5, borderRight: '1px inset #d7e1e2' }}>\r\n            <img src={AttachmentListItem.getFileIconUrl(attachment.filename)} alt='Icono' />\r\n          </div>\r\n          <div className='col-md-11' style={{ padding: '3px 10px' }}>\r\n            <div\r\n              className='noqtip'\r\n              title={attachment.filename}\r\n              style={{\r\n                fontWeight: 'bold',\r\n                fontSize: '12px',\r\n                maxWidth: 400,\r\n                whiteSpace: 'nowrap',\r\n                overflow: 'hidden',\r\n                textOverflow: 'ellipsis'\r\n              }}\r\n            >\r\n              {attachment.filename}\r\n            </div>\r\n            <div style={{ fontSize: '12px' }}>\r\n              <span\r\n                style={{ fontStyle: 'italic' }}\r\n                className='noqtip'\r\n                title={`Peso del archivo: ${attachment.filesize_human}`}\r\n              >\r\n                {attachment.filesize_human}\r\n              </span>{' '}\r\n              |\r\n              <div className='attachment-actionsbar'>\r\n                <div className='section-a'>\r\n                  <a\r\n                    href={public_path(`uploads/proyecto_adjunto/${attachment.filepath}`)}\r\n                    target='_blank'\r\n                    className='act'\r\n                    style={{ color: '#777' }}\r\n                  >\r\n                    <span className='icon-moon-download' style={{ fontSize: '10px' }} /> Descargar\r\n                  </a>\r\n                </div>\r\n\r\n                {user_has_role([ 'PM', 'SR', 'JR' ]) && (\r\n                  <div className='section-a'>\r\n                    <a href='#' className='act' onClick={this.onRemove}>\r\n                      <span className='icon-tc-trash' /> Borrar\r\n                    </a>\r\n                  </div>\r\n                )}\r\n\r\n                <div className='section-a' style={{ minWidth: 90 }}>\r\n                  {attachment.fecha_completado ? (\r\n                    <Popup trigger={completadoComp} position='bottom center'>\r\n                      <Popup.Header content='Preparado por' />\r\n                      <Popup.Content>\r\n                        <table className='table nowrap'>\r\n                          <tbody>\r\n                            {attachment.UpdateLog.map((item, k) => {\r\n                              return (\r\n                                <tr key={k}>\r\n                                  <td>\r\n                                    <Icon name='user circle' color='green' /> {item.User.name} ({item.User.sigla})\r\n                                  </td>\r\n                                  <td>\r\n                                    <em>{Date.create(item.ts).format('{year}-{MM}-{dd}')}</em>\r\n                                  </td>\r\n                                </tr>\r\n                              )\r\n                            })}\r\n                          </tbody>\r\n                        </table>\r\n                      </Popup.Content>\r\n                    </Popup>\r\n                  ) : (\r\n                    user_has_role([ 'PM', 'SR', 'JR' ]) && (\r\n                      <button\r\n                        style={{ marginLeft: '8px' }}\r\n                        onClick={(e) => this.changeStatus(e, 'completado')}\r\n                        className='act'\r\n                      >\r\n                        <span className='icon-moon-checkmark-8' /> Completar\r\n                      </button>\r\n                    )\r\n                  )}\r\n                </div>\r\n\r\n                <div className='section-a'>\r\n                  {attachment.fecha_revisado && (\r\n                    <Popup trigger={revisadoComp} position='bottom center'>\r\n                      <Popup.Header content='Revisado por' />\r\n                      <Popup.Content>\r\n                        <table className='table nowrap'>\r\n                          <tbody>\r\n                            {attachment.RevisionLog.map((item, k) => {\r\n                              return (\r\n                                <tr key={k}>\r\n                                  <td>\r\n                                    <Icon name='user circle' color='olive' /> {item.User.name} ({item.User.sigla})\r\n                                  </td>\r\n                                  <td>\r\n                                    <em>{Date.create(item.ts).format('{year}-{MM}-{dd}')}</em>\r\n                                  </td>\r\n                                </tr>\r\n                              )\r\n                            })}\r\n                          </tbody>\r\n                        </table>\r\n                      </Popup.Content>\r\n                    </Popup>\r\n                  )}\r\n                  {revisadoLink}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div />\r\n          </div>\r\n          <div className='clearfix' />\r\n        </div>\r\n      </li>\r\n    )\r\n  }\r\n}\r\n\r\nexport class AttachmentListPanel extends Component<AttachmentListPanelProps> {\r\n  static defaultProps = {\r\n    isLoading: false\r\n  }\r\n  render() {\r\n    let { isLoading, attachments } = this.props\r\n\r\n    return (\r\n      <div className='attachment-list-panel dimmable' style={{ minHeight: 40 }}>\r\n        {isLoading && (\r\n          <Dimmer inverted active>\r\n            <Loader inverted active className='elastic grey' />\r\n          </Dimmer>\r\n        )}\r\n        <h3 className='panel-title'>\r\n          Adjuntos:\r\n          <Label circular color='green'>\r\n            {_.size(attachments)}\r\n          </Label>\r\n        </h3>\r\n        {_.size(attachments) > 0 && (\r\n          <List divided className='attachment-list'>\r\n            {_.map(attachments, (attachment: ProyectoAttachment, i) => {\r\n              return (\r\n                <AttachmentListItem\r\n                  key={attachment.id}\r\n                  attachment={attachment}\r\n                  onUpdate={this.props.onUpdateItem}\r\n                  onDelete={this.props.onDeleteItem}\r\n                />\r\n              )\r\n            })}\r\n          </List>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport function cleanAttachmentFrom(value: string, adjunto: ProyectoAttachment) {\r\n  const h = public_path(`uploads/proyecto_adjunto/${adjunto.filepath}`, true).replace(/\\./g, '.').replace(/\\\\/g, '/')\r\n  const t = '<a .*href=\"' + h + '\"(.+?)/a>\\\\s*(<br\\\\s?/?>)?'\r\n  const re = new RegExp(t, 'g')\r\n\r\n  return value.replace(re, '')\r\n}\r\n","import { SyntheticEvent, PureComponent } from 'react'\r\nimport Modal from 'semantic-ui-react/dist/commonjs/modules/Modal/Modal'\r\nimport { HallazgoModal } from './hallazgo_modal'\r\n\r\ntype HallazgoModalEditProps = {\r\n  moduleParams: any\r\n  item: ProyectoHallazgo\r\n  onSave: (item: ProyectoHallazgo, data: ProyectoHallazgo) => void\r\n  onClickDelete: (ev: SyntheticEvent) => void\r\n  onClose: () => void\r\n}\r\nexport class HallazgoModalEdit extends PureComponent<HallazgoModalEditProps> {\r\n  onSave = (data: ProyectoHallazgo) => {\r\n    this.props.onSave(this.props.item, data)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Modal\r\n        open\r\n        dimmer='inverted'\r\n        className='modal-ab modal-sidebarmenuitem'\r\n        size='large'\r\n        closeIcon\r\n        onClose={this.props.onClose}\r\n      >\r\n        <Modal.Header>Editar Hallazgo</Modal.Header>\r\n\r\n        <HallazgoModal\r\n          moduleParams={this.props.moduleParams}\r\n          item={this.props.item}\r\n          isEditable={user_has_role_permission('hallazgo_edit')}\r\n          onSave={this.onSave}\r\n          onClickDelete={this.props.onClickDelete}\r\n        />\r\n      </Modal>\r\n    )\r\n  }\r\n}\r\n","import { PureComponent, SyntheticEvent } from 'react'\r\nimport { HallazgoUtils } from '../utils_hallazgo'\r\nimport { AuthorIconLogDefaultWrapper } from '../../global/AuthorIconLog'\r\nimport { HallazgoModalEdit } from './hallazgo_edit'\r\nimport { MenuElementListPanel, MenuElementListActions } from './menuitem'\r\nimport { StatusDivBlock } from '../../global/StatusButtonAction'\r\nimport { truncateText } from '../utils_truncate'\r\n\r\nexport class HallazgoList extends PureComponent<DefaultMenuItemListProps<ProyectoHallazgo>> {\r\n  render() {\r\n    if (this.props.items === null) {\r\n      return (\r\n        <div style={{ height: 300, position: 'relative' }}>\r\n          <div className='ui active inverted text loader elastic olive'>Cargando Listado de Hallazgos</div>\r\n        </div>\r\n      )\r\n    } else if (_.size(this.props.items) == 0) {\r\n      return <div className='empty nocontent'>0 Hallazgos</div>\r\n    } else {\r\n      const { items } = this.props\r\n      return (\r\n        <MenuElementListPanel>\r\n          {_.map(items, (item) => {\r\n            return (\r\n              <div key={item.id} className='listitem hallazgo-listitem'>\r\n                <HallazgoListItem\r\n                  item={item}\r\n                  moduleParams={this.props.moduleParams}\r\n                  onSave={this.props.onSaveItem}\r\n                  onClickDelete={this.props.onClickDeleteItem}\r\n                />\r\n              </div>\r\n            )\r\n          })}\r\n        </MenuElementListPanel>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\ntype HallazgoListItemProps = {\r\n  moduleParams: any\r\n  item: ProyectoHallazgo\r\n  onSave: (item: ProyectoHallazgo, changes: any, blockingText?: string) => void\r\n  onClickDelete: (item: ProyectoHallazgo) => void\r\n}\r\n\r\nexport class HallazgoListItem extends PureComponent<HallazgoListItemProps, { isModalEdit: boolean }> {\r\n  state = {\r\n    isModalEdit: false\r\n  }\r\n\r\n  renderDescripcion() {\r\n    const { item } = this.props\r\n    let html = truncateText(item.hallazgo)\r\n\r\n    return <div dangerouslySetInnerHTML={{ __html: html }} />\r\n  }\r\n\r\n  renderEstadoImplementacion() {\r\n    const { item } = this.props\r\n\r\n    if (item.implementado == null || '' + item.implementado == '') {\r\n      return 'Pendiente'\r\n    } else if (item.implementado == '0') {\r\n      return 'En Proceso'\r\n    } else {\r\n      return 'Hecho'\r\n    }\r\n  }\r\n\r\n  onClickEdit = (ev: SyntheticEvent) => {\r\n    ev.preventDefault()\r\n    this.setState({ isModalEdit: true })\r\n  }\r\n\r\n  onCloseEdit = () => {\r\n    this.setState({ isModalEdit: false })\r\n  }\r\n\r\n  onClickDelete = (ev: SyntheticEvent) => {\r\n    ev.preventDefault()\r\n    this.props.onClickDelete(this.props.item)\r\n  }\r\n\r\n  onSave = (item: ProyectoHallazgo, changes: any) => {\r\n    let blockingText = null\r\n    if (_.isEqual(changes, { status: 'COMPLETADO' })) {\r\n      blockingText = 'Marcando como COMPLETADO'\r\n    } else if (_.isEqual(changes, { status: 'REVISADO' })) {\r\n      blockingText = 'Marcando como REVISADO'\r\n    }\r\n\r\n    this.props.onSave(item, changes, blockingText)\r\n  }\r\n\r\n  render() {\r\n    const { item } = this.props\r\n\r\n    return (\r\n      <div>\r\n        <MenuElementListActions\r\n          actions={{\r\n            edit: { label: 'Editar', callback: this.onClickEdit, permission: 'hallazgo_edit' },\r\n            delete: { label: 'Eliminar', callback: this.onClickDelete, permission: 'hallazgo_delete' }\r\n          }}\r\n        />\r\n        <div onClick={() => this.setState({ isModalEdit: true })}>\r\n          <div className='row r1'>\r\n            <div className='pull-left r1_1'>\r\n              <span className='title-h1'>{HallazgoUtils.formatName(item.name)}</span>\r\n              <AuthorIconLogDefaultWrapper model={item} size='small' />\r\n              <div className='r1_2'>\r\n                <strong>Implementación: </strong> {this.renderEstadoImplementacion()}\r\n              </div>\r\n            </div>\r\n            <StatusDivBlock wrapperClassName='pull-right text-mini' status={item.status} className='mini' hideLabel />\r\n          </div>\r\n          <div className='row'>\r\n            <div className='editor-preview'>{this.renderDescripcion()}</div>\r\n          </div>\r\n          <div className='row' />\r\n        </div>\r\n        {this.state.isModalEdit && (\r\n          <HallazgoModalEdit\r\n            item={item}\r\n            moduleParams={this.props.moduleParams}\r\n            onSave={this.onSave}\r\n            onClickDelete={this.onClickDelete}\r\n            onClose={this.onCloseEdit}\r\n          />\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, { PureComponent, Fragment, SyntheticEvent } from 'react'\r\n\r\nimport EditorPreview from '../../global/EditorPreview'\r\nimport { StatusButtonGroupActions } from '../../global/StatusButtonAction'\r\nimport DatePicker, { registerLocale } from 'react-datepicker'\r\nimport datepickerEs from 'date-fns/locale/es'\r\nimport { format as formatDate, parseISO as parseDate, isValid as isValidDate } from 'date-fns'\r\nimport { MentionsInput, Mention } from 'react-mentions'\r\nimport { HallazgoUtils } from '../utils_hallazgo'\r\nimport cx from 'classnames'\r\nimport { MenuItemNewHeader } from './menuitem__new'\r\n\r\ndeclare var app: any\r\n\r\nregisterLocale('es', datepickerEs)\r\n\r\ntype HallazgoModalProps = {\r\n  moduleParams: any\r\n  item: ProyectoHallazgo\r\n  isEditable: boolean\r\n  onSave: (item: Partial<ProyectoHallazgo>) => void\r\n  onClickDelete?: (ev: SyntheticEvent) => void\r\n}\r\n\r\ntype HallazgoModalState = {\r\n  value: Partial<ProyectoHallazgo>\r\n}\r\n\r\nexport class HallazgoModal extends PureComponent<HallazgoModalProps, HallazgoModalState> {\r\n  constructor(props: HallazgoModalProps) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      value: props.item\r\n    }\r\n  }\r\n\r\n  private handlers: { [s: string]: any } = {}\r\n\r\n  attachHandler(field: string, handler: any) {\r\n    if (!this.handlers[field]) {\r\n      this.handlers[field] = handler\r\n    }\r\n\r\n    return this.handlers[field]\r\n  }\r\n\r\n  isNewItem() {\r\n    return this.props.item.id == null\r\n  }\r\n\r\n  updateModel(changes: any) {\r\n    this.setState((prevState) => {\r\n      return { value: Object.assign({}, prevState.value, changes) }\r\n    })\r\n\r\n    if (!this.isNewItem()) {\r\n      this.props.onSave(changes)\r\n    }\r\n  }\r\n\r\n  getDate(date: string): Date {\r\n    if (!date) {\r\n      return null\r\n    }\r\n\r\n    const d = parseDate(date)\r\n\r\n    return isValidDate(d) ? d : null\r\n  }\r\n\r\n  formatImplementadoChoice(implementado: string | boolean) {\r\n    if (implementado === null || implementado === '') {\r\n      return ''\r\n    }\r\n\r\n    return implementado === true || implementado === '1' ? '1' : '0'\r\n  }\r\n\r\n  _onCreate(changes: any) {\r\n    if (_.isEmpty(this.state.value.hallazgo)) {\r\n      bootbox.alert('La descripción del hallazgo NO puede ser un campo vacío.')\r\n      return\r\n    }\r\n\r\n    this.props.onSave(Object.assign({}, this.state.value, changes))\r\n  }\r\n\r\n  onCreate = () => {\r\n    this._onCreate({ status: 'EN PROCESO' })\r\n  }\r\n\r\n  onCreateAndCompletado = () => {\r\n    this._onCreate({ status: 'COMPLETADO' })\r\n  }\r\n\r\n  onCompletado = () => {\r\n    this.props.onSave({ status: 'COMPLETADO' })\r\n  }\r\n\r\n  onRevisado = () => {\r\n    this.props.onSave({ status: 'REVISADO' })\r\n  }\r\n\r\n  onEditorChange = (field: keyof ProyectoHallazgo) => {\r\n    const handler = (editor: CKEDITOR.editor, closeModal: boolean, autosave: boolean, cb: () => void) => {\r\n      const value = editor.getData()\r\n      if (field == 'hallazgo' && !this.isNewItem() && _.size(_.str.trim(value)) == 0) {\r\n        bootbox.alert('La descripción del hallazgo NO puede ser un campo vacío.')\r\n        return\r\n      }\r\n\r\n      this.updateModel({ [field]: value })\r\n      if ($.isFunction(cb)) {\r\n        cb()\r\n      }\r\n    }\r\n\r\n    return this.attachHandler(field, handler)\r\n  }\r\n\r\n  onInputChange = (field: keyof ProyectoHallazgo) => {\r\n    return this.attachHandler(field, (ev: SyntheticEvent) => {\r\n      this.updateModel({ [field]: (ev.target as any).value })\r\n    })\r\n  }\r\n\r\n  onDateChange = (field: keyof ProyectoHallazgo) => {\r\n    return this.attachHandler(field, (value: Date) => {\r\n      this.updateModel({ [field]: formatDate(value, 'yyyy-MM-dd') })\r\n    })\r\n  }\r\n  onValueChange = (field: keyof ProyectoHallazgo) => {\r\n    return this.attachHandler(field, (value: string) => {\r\n      this.updateModel({ [field]: value })\r\n    })\r\n  }\r\n\r\n  onClickDelete = (ev: SyntheticEvent) => {\r\n    if ($.isFunction(this.props.onClickDelete)) {\r\n      this.props.onClickDelete(ev)\r\n    }\r\n  }\r\n\r\n  renderActions() {\r\n    const { item } = this.props\r\n\r\n    const rightActions = item.id !== null && (\r\n      <button className='ui button compact negative left floated' onClick={this.onClickDelete}>\r\n        <i className='icon trash' /> Eliminar\r\n      </button>\r\n    )\r\n\r\n    return item.id === null ? (\r\n      <div className='actions ab-status-actions'>\r\n        <button className='ui button compact green' onClick={this.onCreate}>\r\n          Crear\r\n        </button>\r\n\r\n        <button className='ui button compact green' onClick={this.onCreateAndCompletado}>\r\n          Crear y Completar\r\n        </button>\r\n      </div>\r\n    ) : (\r\n      <Fragment>\r\n        {rightActions}\r\n        <StatusButtonGroupActions\r\n          completado={{ permission: 'hallazgo_completado', onClick: this.onCompletado }}\r\n          revisado={{ permission: 'hallazgo_revisado', onClick: this.onRevisado, record: item }}\r\n        />\r\n      </Fragment>\r\n    )\r\n  }\r\n\r\n  renderItemHeader() {\r\n    const item = Object.assign(\r\n      { label: this.props.item.id ? HallazgoUtils.formatName(this.props.item.name) : 'Hallazgo Nuevo' },\r\n      this.props.item\r\n    )\r\n\r\n    return <MenuItemNewHeader item={item} />\r\n  }\r\n\r\n  render() {\r\n    const { item } = this.props\r\n    const { value } = this.state\r\n\r\n    return (\r\n      <Fragment>\r\n        <div className='content'>\r\n          {this.renderItemHeader()}\r\n\r\n          {item.id && (\r\n            <div className='description-text'>\r\n              <strong>NOTA:</strong> El hallazgo debe describir la situación actual, causa, impacto y recomendación.\r\n            </div>\r\n          )}\r\n          <EditorPreview\r\n            className={'editor-preview-hallazgo'}\r\n            wrapperClassName={cx(!item.id || 'ui segment')}\r\n            data={value.hallazgo}\r\n            inline={item.id == null}\r\n            ckeditorOptions={{\r\n              attach_disableText:\r\n                'Esta opción (adjuntar archivos) sólo estará disponible una vez haya guardado este hallazgo.',\r\n              height: item.id ? 300 : 150\r\n            }}\r\n            ckeditorUploadOptions={{ model: `${this.props.moduleParams.model}__hallazgo`, modelId: item.id }}\r\n            footer='AttachmentList'\r\n            onSave={this.onEditorChange('hallazgo')}\r\n            previewStyle={{ overflowY: 'auto', maxHeight: 200, width: '100%' }}\r\n            label='<div class=\"description-text\"><strong>NOTA:</strong> El hallazgo debe describir la situación actual, causa, impacto y recomendación</div>'\r\n          />\r\n\r\n          <hr />\r\n\r\n          <div className='ui segment'>\r\n            <EditorPreview\r\n              data={value.plan_accion}\r\n              prefixPreview='Descripción Plan de Acción: '\r\n              labelTitle='Descripción Plan de Acción:'\r\n              ckeditorOptions={{\r\n                attach_disableText:\r\n                  'Esta opción (adjuntar archivos) sólo estará disponible una vez haya guardado este hallazgo.'\r\n              }}\r\n              ckeditorUploadOptions={{ model: `${this.props.moduleParams.model}__plan_accion`, modelId: item.id }}\r\n              footer='AttachmentList'\r\n              onSave={this.onEditorChange('plan_accion')}\r\n            />\r\n          </div>\r\n\r\n          <div className='ui three column grid'>\r\n            <div className='column'>\r\n              <label htmlFor='hallazgo_modal__responsable'>Responsable del Plan Acción: </label>\r\n              <HallazgoResponsableInput\r\n                value={value.responsable}\r\n                onChange={this.onValueChange('responsable')}\r\n                attrs={{ placeholder: 'Escriba el Nombre', style: { display: 'inline-block' } }}\r\n              />\r\n            </div>\r\n\r\n            <div className='column'>\r\n              <label htmlFor='hallazgo_modal__fecha_implementado'>Fecha Implementación: </label>\r\n              <DatePicker\r\n                id='hallazgo_modal__fecha_implementado'\r\n                dateFormat='yyyy-MM-dd'\r\n                locale='es'\r\n                fixedHeight\r\n                placeholderText='AAAA-mm-dd'\r\n                className='react-datepicker--input'\r\n                selected={this.getDate(value.fecha_implementado)}\r\n                onChange={this.onDateChange('fecha_implementado')}\r\n              />\r\n            </div>\r\n\r\n            <div className='column right aligned'>\r\n              <label htmlFor='hallazgo_modal__implementado'>Estado Implementación: </label>\r\n              <select\r\n                id='hallazgo_modal__implementado'\r\n                value={this.formatImplementadoChoice(value.implementado)}\r\n                onChange={this.onInputChange('implementado')}\r\n              >\r\n                <option value=''>Pendiente</option>\r\n                <option value='0'>En Proceso</option>\r\n                <option value='1'>Hecho</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className='actions'>\r\n          {this.renderActions()}\r\n          <div className='clearfix' />\r\n        </div>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n\r\ntype HallazgoResponsableInputProps = {\r\n  value: string\r\n  onChange: (newValue: string) => void\r\n  attrs?: any\r\n}\r\n\r\nclass HallazgoResponsableInput extends PureComponent<HallazgoResponsableInputProps, { value: string }> {\r\n  users: { id: string; display: string }[]\r\n\r\n  mentionStyle = {\r\n    display: 'inline-block',\r\n    minWidth: '200px',\r\n    suggestions: {\r\n      list: {\r\n        backgroundColor: 'white',\r\n        border: '1px solid rgba(0,0,0,0.15)',\r\n        fontSize: 14\r\n      },\r\n      item: {\r\n        padding: '5px 15px',\r\n        borderBottom: '1px solid rgba(0,0,0,0.15)',\r\n        '&focused': {\r\n          backgroundColor: '#cee4e5'\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  constructor(props: HallazgoResponsableInputProps) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      value: props.value\r\n    }\r\n\r\n    this.users = _.map(app.vars.proyecto_equipo, (user: any) => {\r\n      return {\r\n        id: user.user_id,\r\n        display: user.name\r\n      }\r\n    })\r\n  }\r\n\r\n  onChange = (event: SyntheticEvent, newValue: string, newPlainTextValue: string, mentions: any) => {\r\n    this.setState({ value: newValue })\r\n    this.props.onChange(newValue)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <MentionsInput\r\n        singleLine\r\n        type='text'\r\n        value={this.state.value == null ? '' : this.state.value}\r\n        onChange={this.onChange}\r\n        allowSpaceInQuery\r\n        {...this.props.attrs}\r\n        className='mentions-input'\r\n        style={this.mentionStyle}\r\n      >\r\n        <Mention trigger='@' data={this.users} appendSpaceOnAdd />\r\n      </MentionsInput>\r\n    )\r\n  }\r\n}\r\n","import { PureComponent, Fragment, SyntheticEvent, createRef } from 'react'\r\n\r\nimport Transition from 'semantic-ui-react/dist/commonjs/modules/Transition/Transition'\r\nimport cx from 'classnames'\r\nimport { SidebarPanelHeader } from './panel_header'\r\nimport { DefaultErrorHandler } from '../../global/ErrorHandler'\r\n\r\ntype BaseMenuItemProps = {\r\n  open: boolean\r\n  image: string\r\n  counter: number\r\n  onClick: () => void\r\n  title: string\r\n}\r\n\r\nexport class BaseMenuItem extends PureComponent<BaseMenuItemProps> {\r\n  render() {\r\n    const image_path = public_path('images/sidebar_right/')\r\n\r\n    return (\r\n      <a\r\n        className={cx('item badged', !this.props.open || 'active')}\r\n        title={this.props.title}\r\n        onClick={this.props.onClick}\r\n      >\r\n        <img src={`${image_path}${this.props.image}.svg`} className='ui large image' /> {' '}\r\n        <div className={cx('ui mini circular floating label right', this.props.counter == 0 ? 'green' : 'red')}>\r\n          {this.props.counter}\r\n        </div>\r\n      </a>\r\n    )\r\n  }\r\n}\r\n\r\ntype BaseMenuElementProps = {\r\n  name: string\r\n  counter: number\r\n  title: string\r\n  icon: string\r\n  open: boolean\r\n  onToggle: (item: string) => void\r\n  onMountPanel?: () => void\r\n}\r\n\r\nexport class BaseMenuElement extends PureComponent<BaseMenuElementProps> {\r\n  onToggle = () => {\r\n    this.props.onToggle(this.props.open ? null : this.props.name)\r\n  }\r\n\r\n  onClose = (ev: SyntheticEvent) => {\r\n    ev.preventDefault()\r\n    this.props.onToggle(null)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <DefaultErrorHandler>\r\n          <BaseMenuItem\r\n            counter={this.props.counter}\r\n            open={this.props.open}\r\n            title={this.props.title}\r\n            image={this.props.icon}\r\n            onClick={this.onToggle}\r\n          />\r\n          {this.props.open && (\r\n            <Transition.Group animation='slide right' duration={1500}>\r\n              <div\r\n                className={`sidebar-fixed-content ui vertical right fixed menu menu-${this.props.name}`}\r\n                style={{ right: 45 }}\r\n              >\r\n                <SidebarPanelHeader title={this.props.title} onClose={this.onClose} onMount={this.props.onMountPanel} />\r\n                {this.props.children}\r\n              </div>\r\n            </Transition.Group>\r\n          )}\r\n        </DefaultErrorHandler>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport class MenuElementListPanel extends PureComponent<{ className?: string }> {\r\n  listRef = createRef<HTMLDivElement>()\r\n  listHeight: number = null\r\n\r\n  componentDidMount() {\r\n    if (this.listRef.current) {\r\n      this.calculateHeight()\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.listRef.current && !this.listHeight) {\r\n      this.calculateHeight()\r\n    }\r\n  }\r\n\r\n  calculateHeight() {\r\n    const $list = $(this.listRef.current)\r\n    this.listHeight = window.innerHeight - $list.position().top - 30\r\n    $list.height(this.listHeight)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={`main-list ${this.props.className}`} ref={this.listRef}>\r\n        {this.props.children}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\ntype MenuElementListActionsProps = {\r\n  actions: {\r\n    [s: string]: {\r\n      label: string\r\n      permission: string\r\n      callback: (ev: SyntheticEvent) => void\r\n    }\r\n  }\r\n}\r\nexport const MenuElementListActions = (props: MenuElementListActionsProps) => {\r\n  return (\r\n    <div className='pull-right sf_admin_td_actions'>\r\n      <div className='btn-group dropdown-modern'>\r\n        <a className='btn btn-mini dropdown-toggle' data-toggle='dropdown' href='#'>\r\n          <span className='icon-tc-ellipsis-v' />\r\n        </a>\r\n\r\n        <ul className='dropdown-menu pull-right'>\r\n          {_.map(props.actions, (action, key) => {\r\n            return (\r\n              user_has_role_permission(action.permission) && (\r\n                <li key={key}>\r\n                  <a href='#' onClick={action.callback}>\r\n                    {action.label}\r\n                  </a>\r\n                </li>\r\n              )\r\n            )\r\n          })}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { PureComponent } from 'react'\r\n\r\nimport Modal from 'semantic-ui-react/dist/commonjs/modules/Modal/Modal'\r\nimport { AuthorIconLogDefaultWrapper } from '../../global/AuthorIconLog'\r\n\r\ntype MenuItemNewProps = {\r\n  isEditable: boolean\r\n  headerText: string\r\n  buttonText: string\r\n  onSave: (data: any) => Promise<null>\r\n  moduleParams: any\r\n  item: any\r\n  contentAs: React.ComponentType<MenuItemModalType>\r\n}\r\n\r\ntype MenuItemModalType = {\r\n  item: any\r\n  isEditable: boolean\r\n  moduleParams: any\r\n  onSave: (item: any) => void\r\n}\r\n\r\nexport class MenuItemNew extends PureComponent<MenuItemNewProps, { modalOpen: boolean }> {\r\n  state = {\r\n    modalOpen: false\r\n  }\r\n\r\n  onClick = () => {\r\n    this.setState({ modalOpen: true })\r\n  }\r\n\r\n  onCloseModal = () => {\r\n    this.setState({ modalOpen: false })\r\n  }\r\n\r\n  onSave = (data: ProyectoHallazgo) => {\r\n    this.props.onSave(data).then(() => {\r\n      this.onCloseModal()\r\n    })\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.isEditable) {\r\n      return\r\n    }\r\n\r\n    const MenuItemModal = this.props.contentAs\r\n\r\n    return (\r\n      <div className='_a-center'>\r\n        <button className='button ui right tiny compact plain green rounded' onClick={this.onClick}>\r\n          {this.props.buttonText} <i className='icon plus' />\r\n        </button>\r\n        {this.state.modalOpen && (\r\n          <Modal\r\n            open\r\n            dimmer='inverted'\r\n            className='modal-ab modal-sidebarmenuitem'\r\n            size='large'\r\n            closeIcon\r\n            closeOnDimmerClick={false}\r\n            closeOnEscape={false}\r\n            onClose={this.onCloseModal}\r\n          >\r\n            <Modal.Header>{this.props.headerText}</Modal.Header>\r\n            <MenuItemModal\r\n              onSave={this.onSave}\r\n              moduleParams={this.props.moduleParams}\r\n              isEditable={this.props.isEditable}\r\n              item={this.props.item}\r\n            />\r\n          </Modal>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\ntype MenuItemNewHeaderProps = {\r\n  item: {\r\n    label: string\r\n    status: ProyectoModuleStatusEnum\r\n  } & IAuthorLog\r\n}\r\n\r\nexport const MenuItemNewHeader = (props: MenuItemNewHeaderProps) => {\r\n  const status = props.item.status || 'EN PROCESO'\r\n  return (\r\n    <div className='ui grid padded' style={{ marginBottom: 0 }}>\r\n      <div className='row' style={{ paddingTop: 0 }}>\r\n        <div className='column four wide'>\r\n          <strong style={{ fontWeight: 600 }}>{props.item.label}</strong>\r\n        </div>\r\n        <div className='column four wide'>\r\n          <span>Estado: </span>\r\n          <div className='lb-status-wrapper'>\r\n            <div className={`lb-status lb-status-${_.str.dasherize(status.toLowerCase())}`}>{status}</div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className='column four wide'>\r\n          <AuthorIconLogDefaultWrapper model={props.item} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { PureComponent } from 'react'\r\n\r\nimport { BaseMenuElement } from './menuitem'\r\nimport { MenuItemNew } from './menuitem__new'\r\nimport { HallazgoList } from './hallazgo_list'\r\nimport { HallazgoUtils } from '../utils_hallazgo'\r\nimport { HallazgoModal } from './hallazgo_modal'\r\n\r\ntype MenuItemHallazgoState = {\r\n  items: ProyectoHallazgo[]\r\n}\r\n\r\nexport class MenuItemHallazgo extends PureComponent<DefaultMenuElementProps<ProyectoHallazgo>, MenuItemHallazgoState> {\r\n  state: MenuItemHallazgoState = {\r\n    items: null\r\n  }\r\n\r\n  addItem(data: any) {\r\n    this.setState((prevState) => {\r\n      const copy = [ ...prevState.items, data ]\r\n\r\n      return { items: copy }\r\n    })\r\n  }\r\n\r\n  updateItem(item: ProyectoHallazgo, data: any) {\r\n    this.setState((prevState) => {\r\n      const copy = _.map(prevState.items, (_item) => {\r\n        if (_item.id == item.id) {\r\n          return Object.assign({}, _item, data)\r\n        } else {\r\n          return _item\r\n        }\r\n      })\r\n\r\n      return { items: copy }\r\n    })\r\n  }\r\n\r\n  deleteItem(item: ProyectoHallazgo) {\r\n    this.setState((prevState) => {\r\n      const copy = _.reject(prevState.items, { id: item.id })\r\n\r\n      return { items: copy }\r\n    })\r\n  }\r\n\r\n  onMountPanel = () => {\r\n    if (this.state.items === null) {\r\n      this.props.modelManager.getJson(this.props).then((items) => {\r\n        this.setState({ items })\r\n      })\r\n    }\r\n  }\r\n\r\n  onCreateItem = (data: ProyectoHallazgo) => {\r\n    return new Promise<null>((resolve) => {\r\n      $.blockUI(create_blockUI_loading_message('Creando Hallazgo'))\r\n\r\n      this.props.modelManager.createItem(this.props, data).then((item) => {\r\n        this.addItem(item)\r\n        $.unblockUI()\r\n        resolve()\r\n      })\r\n    })\r\n  }\r\n\r\n  onSaveItem = (item: ProyectoHallazgo, changes: any, blockingText?: string) => {\r\n    return new Promise<ProyectoHallazgo>((resolve) => {\r\n      if (blockingText) {\r\n        $.blockUI(create_blockUI_loading_message(blockingText))\r\n      } else {\r\n        this.updateItem(item, changes)\r\n      }\r\n\r\n      this.props.modelManager.saveItem(this.props, item, changes).then((updatedItem) => {\r\n        this.updateItem(item, updatedItem)\r\n        if (blockingText) {\r\n          $.unblockUI()\r\n        }\r\n\r\n        resolve(updatedItem)\r\n      })\r\n    })\r\n  }\r\n\r\n  onClickDeleteItem = (item: ProyectoHallazgo) => {\r\n    bootbox.warningConfirm(\r\n      `¿Desea eliminar el hallazgo <strong>${HallazgoUtils.formatName(item.name)}</strong> ?`,\r\n      'No',\r\n      'Sí, Eliminar',\r\n      (answer: boolean) => {\r\n        if (!answer) {\r\n          return\r\n        }\r\n\r\n        $.blockUI(create_blockUI_loading_message('Eliminando Hallazgo'))\r\n\r\n        this.props.modelManager.deleteItem(this.props, item).then(() => {\r\n          this.deleteItem(item)\r\n          $.unblockUI()\r\n        })\r\n      }\r\n    )\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <BaseMenuElement\r\n        name='hallazgo'\r\n        counter={this.state.items === null ? this.props.counter : _.size(this.state.items)}\r\n        icon='hallazgos'\r\n        title='Hallazgos'\r\n        open={this.props.open}\r\n        onToggle={this.props.onOpen}\r\n        onMountPanel={this.onMountPanel}\r\n      >\r\n        <div className='content'>\r\n          <MenuItemNew\r\n            moduleParams={this.props.moduleParams}\r\n            buttonText='Crear Hallazgo'\r\n            headerText='Nuevo Hallazgo'\r\n            isEditable={es_proyecto_editable() && user_has_role_permission('hallazgo_create')}\r\n            item={createNewHallazgo()}\r\n            onSave={this.onCreateItem}\r\n            contentAs={HallazgoModal}\r\n          />\r\n          <HallazgoList\r\n            isEditable={es_proyecto_editable() && user_has_role_permission('hallazgo_edit')}\r\n            moduleParams={this.props.moduleParams}\r\n            items={this.state.items}\r\n            onSaveItem={this.onSaveItem}\r\n            onClickDeleteItem={this.onClickDeleteItem}\r\n          />\r\n        </div>\r\n      </BaseMenuElement>\r\n    )\r\n  }\r\n}\r\n\r\nfunction createNewHallazgo(): ProyectoHallazgo {\r\n  return {\r\n    id: null,\r\n    status: 'NUEVO',\r\n    implementado: null,\r\n    hallazgo: '',\r\n    RevisionLog: [],\r\n    UpdateLog: []\r\n  }\r\n}\r\n","import { PureComponent, SyntheticEvent } from 'react'\r\n\r\nimport { BaseMenuElement } from './menuitem'\r\nimport RevisionList from './revision_list'\r\n\r\nimport Textarea from 'react-textarea-autosize'\r\n\r\ntype MenuItemRevisionState = {\r\n  items: ProyectoRevisionTree[]\r\n}\r\n\r\nexport class MenuItemRevision extends PureComponent<\r\n  DefaultMenuElementProps<ProyectoRevisionTree>,\r\n  MenuItemRevisionState\r\n> {\r\n  state: MenuItemRevisionState = {\r\n    items: null\r\n  }\r\n\r\n  parseItems = (input: any[]): ProyectoRevisionTree[] => {\r\n    return input\r\n  }\r\n\r\n  onMountPanel = () => {\r\n    if (this.state.items === null) {\r\n      this.props.modelManager.getJson(this.props).then((items) => {\r\n        this.setState({ items })\r\n      })\r\n    }\r\n  }\r\n\r\n  onCreateItem = (params: { text: string; status: 'NUEVO' | 'COMPLETADO' }, cb: () => void) => {\r\n    $.blockUI(create_blockUI_loading_message('Creando Nota de Revisión'))\r\n\r\n    this.props.modelManager\r\n      .createItem(this.props, { revision_text: params.text, op: params.status })\r\n      .then((revision) => {\r\n        this.setState((prevState) => {\r\n          const items = [ ...prevState.items ]\r\n          items.push(revision)\r\n\r\n          return { items }\r\n        })\r\n\r\n        cb()\r\n        $.unblockUI()\r\n      })\r\n  }\r\n\r\n  onSaveItem = (item: ProyectoRevisionTree, changes: any, blockingText?: string) => {\r\n    return new Promise<ProyectoRevisionTree>((resolve) => {\r\n      if (blockingText) {\r\n        setTimeout(() => $.blockUI(create_blockUI_loading_message(blockingText)), 1000 * 0.1)\r\n      }\r\n\r\n      this.props.modelManager.saveItem(this.props, item, changes).then((revision) => {\r\n        this.setState((prevState) => {\r\n          const items = _.map(prevState.items, (item) => {\r\n            return item.id == revision.id ? revision : item\r\n          })\r\n\r\n          return { items }\r\n        })\r\n\r\n        if (blockingText) {\r\n          $.unblockUI()\r\n        }\r\n\r\n        resolve(revision)\r\n      })\r\n    })\r\n  }\r\n\r\n  onClickDeleteItem = (item: ProyectoRevisionTree) => {\r\n    bootbox.warningConfirm(\r\n      `¿Desea eliminar esta Nota de Revisión <b>#${item.name}</b> ?`,\r\n      'No',\r\n      'Sí, Eliminar',\r\n      (r) => {\r\n        if (!r) {\r\n          return\r\n        }\r\n\r\n        $.blockUI(create_blockUI_loading_message('Eliminando Nota de Revisión'))\r\n\r\n        this.props.modelManager.deleteItem(this.props, item).then(() => {\r\n          this.setState((prevState) => {\r\n            const items = _.reject(prevState.items, { id: item.id })\r\n\r\n            return { items }\r\n          })\r\n          $.unblockUI()\r\n        })\r\n      }\r\n    )\r\n  }\r\n\r\n  renderContent() {\r\n    return (\r\n      <div className='content'>\r\n        <RevisionNewForm onSubmit={this.onCreateItem} />\r\n        <RevisionList\r\n          items={this.state.items}\r\n          moduleParams={this.props.moduleParams}\r\n          isEditable={es_proyecto_editable() && user_has_role_permission('revision_edit')}\r\n          onSaveItem={this.onSaveItem}\r\n          onClickDeleteItem={this.onClickDeleteItem}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <BaseMenuElement\r\n        name='revision'\r\n        counter={\r\n          this.state.items === null ? this.props.counter : _.size(_.reject(this.state.items, { status: 'REVISADO' }))\r\n        }\r\n        icon='notas_de_revision'\r\n        title='Notas de Revisión'\r\n        open={this.props.open}\r\n        onToggle={this.props.onOpen}\r\n        onMountPanel={this.onMountPanel}\r\n      >\r\n        {this.renderContent()}\r\n      </BaseMenuElement>\r\n    )\r\n  }\r\n}\r\n\r\ntype RevisionNewFormProps = {\r\n  onSubmit: (params: { text: string; status: 'NUEVO' | 'COMPLETADO' }, cb: () => void) => void\r\n}\r\n\r\nclass RevisionNewForm extends PureComponent<RevisionNewFormProps, { text: string; isEditMode: boolean }> {\r\n  state = {\r\n    text: '',\r\n    isEditMode: false\r\n  }\r\n\r\n  onChange = (ev: SyntheticEvent) => {\r\n    this.setState({ text: (ev.target as any).value })\r\n  }\r\n\r\n  onTextareaKeyDown = (ev: React.KeyboardEvent) => {\r\n    if (ev.keyCode == 27) {\r\n      // on press Esc\r\n      this.onCancel()\r\n    }\r\n\r\n    if ((ev.ctrlKey || ev.metaKey) && (ev.keyCode == 13 || ev.keyCode == 10)) {\r\n      // on press ctrl + Enter\r\n      this.onSubmit('NUEVO')\r\n    }\r\n  }\r\n\r\n  onClickNew = () => {\r\n    this.setState({ isEditMode: true })\r\n  }\r\n\r\n  onCancel = () => {\r\n    this.setState({ isEditMode: false, text: '' })\r\n  }\r\n\r\n  onSubmit = (status: 'NUEVO' | 'COMPLETADO') => {\r\n    if (_.str.trim(this.state.text) == '') {\r\n      bootbox.alertError('La Nota de Revisión no puede estar vacía.')\r\n      return\r\n    }\r\n\r\n    this.props.onSubmit({ text: _.str.trim(this.state.text), status }, () => {\r\n      this.setState({ text: '', isEditMode: false })\r\n    })\r\n  }\r\n\r\n  render() {\r\n    if (!es_proyecto_editable() || !user_has_role_permission('revision_edit')) {\r\n      return null\r\n    }\r\n\r\n    return !this.state.isEditMode ? (\r\n      <div style={{ textAlign: 'center' }}>\r\n        <button className='ui button primary mini compact' onClick={this.onClickNew}>\r\n          Crear Nota\r\n        </button>\r\n      </div>\r\n    ) : (\r\n      <div>\r\n        <Textarea\r\n          minRows={2}\r\n          maxRows={8}\r\n          autoFocus\r\n          onChange={this.onChange}\r\n          value={this.state.text}\r\n          style={{ width: '98%' }}\r\n          onKeyDown={this.onTextareaKeyDown}\r\n          placeholder='Escriba aquí su Nota de Revisión'\r\n        />\r\n        <div style={{ marginTop: 8, textAlign: 'right' }}>\r\n          <button className='ui button negative mini compact' onClick={this.onCancel}>\r\n            Cancelar\r\n          </button>\r\n          <button className='ui button primary mini compact' onClick={() => this.onSubmit('NUEVO')}>\r\n            Guardar\r\n          </button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { PureComponent, SyntheticEvent } from 'react'\r\nimport { invoke } from 'lodash'\r\n\r\ntype SidebarPanelHeaderProps = {\r\n  title: string\r\n  onClose: (ev: SyntheticEvent) => void\r\n  onMount?: () => void\r\n}\r\n\r\nexport class SidebarPanelHeader extends PureComponent<SidebarPanelHeaderProps> {\r\n  componentDidMount() {\r\n    invoke(this.props, 'onMount')\r\n  }\r\n  render() {\r\n    return (\r\n      <header>\r\n        <a href='#' className='close-link' onClick={this.props.onClose}>\r\n          <i className='ui icon close green' />\r\n        </a>\r\n        <div className='title'>{this.props.title}</div>\r\n      </header>\r\n    )\r\n  }\r\n}\r\n","import { PureComponent, SyntheticEvent, Fragment } from 'react'\r\nimport { MenuElementListPanel, MenuElementListActions } from './menuitem'\r\nimport { AuthorIconLogDefaultWrapper } from '../../global/AuthorIconLog'\r\nimport { StatusDivBlock } from '../../global/StatusButtonAction'\r\nimport Textarea from 'react-textarea-autosize'\r\nimport cx from 'classnames'\r\nimport Popup from 'semantic-ui-react/dist/commonjs/modules/Popup'\r\n\r\nexport default class RevisionList extends PureComponent<DefaultMenuItemListProps<ProyectoRevisionTree>> {\r\n  render() {\r\n    if (this.props.items === null) {\r\n      return (\r\n        <div style={{ height: 300, position: 'relative' }}>\r\n          <div className='ui active inverted text loader elastic olive'>Cargando Notas de Revisión</div>\r\n        </div>\r\n      )\r\n    } else if (_.size(this.props.items) == 0) {\r\n      return <div className='empty nocontent'>0 Notas de Revisión</div>\r\n    } else {\r\n      const { items } = this.props\r\n\r\n      const porRevisarItems = _.reject(items, { status: 'REVISADO' })\r\n      const revisadoItems = _.filter(items, { status: 'REVISADO' })\r\n\r\n      return (\r\n        <MenuElementListPanel className='revision-list'>\r\n          {_.size(porRevisarItems) == 0 ? (\r\n            <div className='empty nocontent'>0 Notas de Revisión Abiertas</div>\r\n          ) : (\r\n            _.map(porRevisarItems, (item: ProyectoRevisionTree) => {\r\n              return (\r\n                <div key={item.id} className='listitem revision-listitem'>\r\n                  <RevisionListItem\r\n                    item={item}\r\n                    isEditable={this.props.isEditable}\r\n                    onSave={this.props.onSaveItem}\r\n                    onClickDelete={this.props.onClickDeleteItem}\r\n                  />\r\n                </div>\r\n              )\r\n            })\r\n          )}\r\n\r\n          {_.size(revisadoItems) > 0 && <RevisionDisabledList items={revisadoItems} />}\r\n        </MenuElementListPanel>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nclass RevisionDisabledList extends PureComponent<{ items: ProyectoRevisionTree[] }, { collapsed: boolean }> {\r\n  state = {\r\n    collapsed: true\r\n  }\r\n\r\n  toggle = () => {\r\n    this.setState((prevState) => {\r\n      return { collapsed: !prevState.collapsed }\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { items } = this.props\r\n\r\n    return (\r\n      <div style={{ marginTop: 20, marginBottom: 20, padding: '0 10px' }}>\r\n        <h4 className='row clickable' onClick={this.toggle}>\r\n          <i className={cx('icon caret', !this.state.collapsed ? 'down' : 'right')} /> Notas Revisadas\r\n          <span className='toggle-action'>[{this.state.collapsed ? 'Mostrar' : 'Ocultar'}]</span>\r\n          <span className='ui mini circular green label pull-right'>{_.size(items)}</span>\r\n        </h4>\r\n        {!this.state.collapsed && (\r\n          <div className='revision-list-closed'>\r\n            {_.map(items, (item: ProyectoRevisionTree) => {\r\n              return (\r\n                <div key={item.id} className='listitem revision-listitem'>\r\n                  <RevisionListItem item={item} isEditable={false} />\r\n                </div>\r\n              )\r\n            })}\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\ntype RevisionListItemState = {\r\n  isEditMode: boolean\r\n  isThreadOpen: boolean\r\n}\r\n\r\nclass RevisionListItem extends PureComponent<\r\n  DefaultMenuItemListItemProps<ProyectoRevisionTree>,\r\n  RevisionListItemState\r\n> {\r\n  state = {\r\n    isEditMode: false,\r\n    isThreadOpen: false\r\n  }\r\n\r\n  onClickEdit = () => {\r\n    this.setState({ isEditMode: true })\r\n  }\r\n\r\n  onClickDelete = (ev: SyntheticEvent) => {\r\n    ev.preventDefault()\r\n    this.props.onClickDelete(this.props.item)\r\n  }\r\n\r\n  onClickNewComment = () => {\r\n    if (this.props.isEditable) {\r\n      this.setState({ isThreadOpen: true })\r\n    }\r\n  }\r\n\r\n  onCancelNewComment = () => {\r\n    this.setState({ isThreadOpen: false })\r\n  }\r\n\r\n  onChange = (changes: any) => {\r\n    this.props.onSave(this.props.item, changes, 'Guardando cambios...').then(() => {\r\n      this.setState({ isEditMode: false })\r\n    })\r\n  }\r\n\r\n  onClickChangeStatus = (status: any) => {\r\n    this.props.onSave(this.props.item, { op: status }, 'Marcando como ' + status + '...')\r\n  }\r\n\r\n  onAddComment = (params: { text: string; status: string }) => {\r\n    const changes: any = { comment: params.text }\r\n    if (params.status) {\r\n      changes.op = params.status\r\n    }\r\n\r\n    this.props.onSave(this.props.item, changes, 'Guardando comentario...').then(() => {\r\n      this.setState({ isThreadOpen: false })\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { item } = this.props\r\n    return (\r\n      <div>\r\n        {this.props.isEditable && (\r\n          <MenuElementListActions\r\n            actions={{\r\n              delete: { label: 'Eliminar', callback: this.onClickDelete, permission: 'revision_delete' }\r\n            }}\r\n          />\r\n        )}\r\n        <div className='row header-item'>\r\n          <div className='pull-left'>\r\n            <span className='title-h1'>Nota #{item.name}</span>\r\n            <AuthorIconLogDefaultWrapper model={item} size='small' />\r\n          </div>\r\n          <StatusDivBlock\r\n            wrapperClassName='pull-right text-mini'\r\n            status={item.status || 'EN PROCESO'}\r\n            className='mini'\r\n            hideLabel\r\n          />\r\n        </div>\r\n\r\n        <div className='author-info'>\r\n          <i aria-hidden='true' className='user circle icon olive' style={{ float: 'left' }} />\r\n          <div className='content'>\r\n            <div className='header'>\r\n              {item.Creator.User.name}\r\n              <div className='pull-right description'>\r\n                {Date.create(item.Creator.ts).format('{d} {Mon} {year} {h}:{mm} {tt}')}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {this.props.isEditable && this.state.isEditMode ? (\r\n          <RevisionEditForm item={item} onSubmit={this.onChange} />\r\n        ) : (\r\n          <Fragment>\r\n            <p\r\n              onClick={this.onClickNewComment}\r\n              style={{ lineHeight: '1em' }}\r\n              dangerouslySetInnerHTML={{ __html: item.description.replace(/\\n/g, '<br/>') }}\r\n            />\r\n            <div className={cx('threadlist ui threaded comments', { empty: _.size(item.Comments) == 0 })}>\r\n              {this.state.isThreadOpen && (\r\n                <h5 className={cx('ui header', { dividing: _.size(item.Comments) == 0 })}>Comentarios</h5>\r\n              )}\r\n              {_.map(item.Comments, (comment) => {\r\n                return (\r\n                  <div className='comment' key={comment.id} onClick={this.onClickNewComment}>\r\n                    <div className='avatar'>\r\n                      <i\r\n                        className={cx('icon user circle', {\r\n                          green: comment.status == 'COMPLETADO',\r\n                          olive: comment.status == 'REVISADO'\r\n                        })}\r\n                      />\r\n                    </div>\r\n                    <div className='content'>\r\n                      <div className='author'>{comment.Creator.User.name}</div>\r\n                      <div className='metadata'>\r\n                        {Date.create(comment.Creator.ts).format('{d} {Mon} {year}  {h}:{mm} {tt}')}\r\n                      </div>\r\n                      <div className='text'>\r\n                        <p dangerouslySetInnerHTML={{ __html: comment.comentario }} />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )\r\n              })}\r\n            </div>\r\n            {this.state.isThreadOpen && this.props.isEditable ? (\r\n              <RevisionComentarioForm parentItem={item} onSave={this.onAddComment} onCancel={this.onCancelNewComment} />\r\n            ) : (\r\n              this.props.isEditable && (\r\n                <div className='actions-wrapper'>\r\n                  <div className='actions'>\r\n                    <div className='group-actions'>\r\n                      <button className='ui button icon blue mini compact' onClick={this.onClickNewComment}>\r\n                        Responder\r\n                      </button>\r\n                    </div>\r\n                    <div className='group-actions right-actions'>\r\n                      <button\r\n                        className='ui button icon primary mini compact'\r\n                        onClick={() => this.onClickChangeStatus('COMPLETADO')}\r\n                      >\r\n                        <i className='icon check' /> Completar\r\n                      </button>\r\n\r\n                      <Popup\r\n                        disabled={item.fecha_completado != null}\r\n                        className='disable-text'\r\n                        on='hover'\r\n                        basic\r\n                        content='Debe estar primero en estado COMPLETADO, para poder marcarla como REVISADA.'\r\n                        trigger={\r\n                          <div className='button-wrapper'>\r\n                            <button\r\n                              className='ui button mini compact olive'\r\n                              disabled={item.fecha_completado == null}\r\n                              onClick={() =>\r\n                                item.fecha_completado == null ? void 0 : this.onClickChangeStatus('REVISADO')}\r\n                            >\r\n                              <i className='icon check fitted' />\r\n                              <i className='icon check' /> Revisado\r\n                            </button>\r\n                          </div>\r\n                        }\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )\r\n            )}\r\n          </Fragment>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\ntype RevisionEditFormProps = {\r\n  item: ProyectoRevisionTree\r\n  onSubmit: (changes: { revision_text: string; op?: 'COMPLETADO' | 'REVISADO' }) => void\r\n}\r\n\r\ntype RevisionEditFormState = {\r\n  value: string\r\n}\r\n\r\nclass RevisionEditForm extends PureComponent<RevisionEditFormProps, RevisionEditFormState> {\r\n  constructor(props: RevisionEditFormProps) {\r\n    super(props)\r\n    this.state = {\r\n      value: this.props.item.description\r\n    }\r\n  }\r\n\r\n  onChange = (ev: SyntheticEvent) => {\r\n    this.setState({ value: (ev.target as any).value })\r\n  }\r\n\r\n  onSubmit = (status?: 'COMPLETADO' | 'REVISADO') => {\r\n    if (_.str.trim(this.state.value) == '') {\r\n      bootbox.alertError('La Nota de Revisión no puede estar vacía.')\r\n      return\r\n    }\r\n\r\n    const changes: any = { revision_text: _.str.trim(this.state.value) }\r\n    if (status) {\r\n      changes.op = status\r\n    }\r\n    this.props.onSubmit(changes)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <Textarea\r\n          minRows={2}\r\n          maxRows={8}\r\n          onChange={this.onChange}\r\n          value={this.state.value}\r\n          style={{ width: '98%' }}\r\n          placeholder='Escriba aquí su Nota de Revisión'\r\n        />\r\n\r\n        <div style={{ marginTop: 8, textAlign: 'right' }}>\r\n          <button className='ui button icon primary mini compact' onClick={() => this.onSubmit()}>\r\n            Guardar\r\n          </button>\r\n\r\n          <button className='ui button icon primary mini compact' onClick={() => this.onSubmit('COMPLETADO')}>\r\n            <i className='icon check' /> Completar\r\n          </button>\r\n\r\n          <Popup\r\n            disabled={this.props.item.fecha_completado != null}\r\n            className='disable-text'\r\n            on='hover'\r\n            basic\r\n            content='Debe estar primero en estado COMPLETADO, para poder marcarla como REVISADA.'\r\n            trigger={\r\n              <div className='button-wrapper'>\r\n                <button\r\n                  className='ui button mini compact olive'\r\n                  disabled={this.props.item.fecha_completado == null}\r\n                  onClick={() => (this.props.item.fecha_completado == null ? void 0 : this.onSubmit('REVISADO'))}\r\n                >\r\n                  <i className='icon check fitted' />\r\n                  <i className='icon check' /> Revisado\r\n                </button>\r\n              </div>\r\n            }\r\n          />\r\n        </div>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n\r\ntype RevisionComentarioFormProps = {\r\n  parentItem: ProyectoRevisionTree\r\n  onSave: (params: { text: string; status: string }) => void\r\n  onCancel: () => void\r\n}\r\nclass RevisionComentarioForm extends PureComponent<RevisionComentarioFormProps> {\r\n  cancelTimeout: number = null\r\n\r\n  state = {\r\n    value: ''\r\n  }\r\n\r\n  onChange = (ev: SyntheticEvent) => {\r\n    this.setState({ value: (ev.target as any).value })\r\n  }\r\n\r\n  onTextareaKeyDown = (ev: React.KeyboardEvent) => {\r\n    if (ev.keyCode == 27) {\r\n      // on press Esc\r\n      this.props.onCancel()\r\n      this.cancelTimeout = null\r\n    }\r\n\r\n    if ((ev.ctrlKey || ev.metaKey) && (ev.keyCode == 13 || ev.keyCode == 10)) {\r\n      // on press ctrl + Enter\r\n      this.onSubmit()\r\n    }\r\n  }\r\n\r\n  onSubmit = (status?: 'COMPLETADO' | 'REVISADO') => {\r\n    if (_.str.trim(this.state.value) == '' && !status) {\r\n      return\r\n    }\r\n\r\n    if (this.cancelTimeout != null) {\r\n      window.clearTimeout(this.cancelTimeout)\r\n      this.cancelTimeout = null\r\n    }\r\n\r\n    this.props.onSave({ text: _.str.trim(this.state.value), status })\r\n  }\r\n\r\n  onBlur = () => {\r\n    this.cancelTimeout = window.setTimeout(() => {\r\n      this.props.onCancel()\r\n    }, 1000 * 0.5)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={{ marginBottom: 30 }}>\r\n        <Textarea\r\n          minRows={2}\r\n          maxRows={5}\r\n          autoFocus\r\n          value={this.state.value}\r\n          onChange={this.onChange}\r\n          onKeyDown={this.onTextareaKeyDown}\r\n          placeholder='Escriba aquí su comentario'\r\n          style={{ width: '95%' }}\r\n          onBlur={() => this.onBlur()}\r\n        />\r\n\r\n        <div style={{ textAlign: 'right', marginTop: 5 }}>\r\n          <button className='ui button icon blue mini compact pull-left' onClick={() => this.onSubmit()}>\r\n            Enviar\r\n          </button>\r\n\r\n          <button className='ui button icon primary mini compact' onClick={() => this.onSubmit('COMPLETADO')}>\r\n            <i className='icon check' /> Completar\r\n          </button>\r\n\r\n          <Popup\r\n            disabled={this.props.parentItem.fecha_completado != null}\r\n            className='disable-text'\r\n            on='hover'\r\n            basic\r\n            content='Debe estar primero en estado COMPLETADO, para poder marcarla como REVISADA.'\r\n            trigger={\r\n              <div className='button-wrapper'>\r\n                <button\r\n                  className='ui button mini compact olive'\r\n                  disabled={this.props.parentItem.fecha_completado == null}\r\n                  onClick={() => (this.props.parentItem.fecha_completado == null ? void 0 : this.onSubmit('REVISADO'))}\r\n                >\r\n                  <i className='icon check fitted' />\r\n                  <i className='icon check' /> Revisado\r\n                </button>\r\n              </div>\r\n            }\r\n          />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","export namespace HallazgoUtils {\r\n  export function formatName(name: string) {\r\n    return ('' + name).match(/^\\d+$/) ? 'Hallazgo #' + name : name\r\n  }\r\n}\r\n","import htmlTruncate from 'html-truncate'\r\n\r\nexport function cleanSpacesFromHtml(text: string) {\r\n  if (text == null) {\r\n    return text\r\n  }\r\n\r\n  text = text.trim().replace(/\\r?\\n|\\r/g, '')\r\n  text = text.replace(/>\\s+</g, '><')\r\n  text = text.replace(/\\s{2,}/g, ' ')\r\n\r\n  return text\r\n}\r\n\r\nexport function truncateText(text: string, length: number = 300) {\r\n  if (text == null) {\r\n    return text\r\n  }\r\n\r\n  text = cleanSpacesFromHtml(text)\r\n  text = text.replace(/<table.*\\/table>/g, '<img src=\"/images/icon_tabular.png\" title=\"Tabla\" />') // Remove all tables\r\n\r\n  let html = htmlTruncate('' + text, length, { keepImageTag: true })\r\n\r\n  html = html.replace(/(min-)?width:.+?;/g, '')\r\n  html = html.replace(/(min-)?height:.+?;/g, '')\r\n  html = html.replace(/style=\".+?\"/g, '')\r\n\r\n  return html.trim()\r\n}\r\n","import Tab from 'semantic-ui-react/dist/commonjs/modules/Tab/Tab'\r\nimport Menu from 'semantic-ui-react/dist/commonjs/collections/Menu/Menu'\r\n\r\n//import TabProcesos from './TabProcesos'\r\nimport TabRiesgos from './TabRiesgos'\r\n//import TabRiesgosMapa from './TabRiesgosMapa'\r\nimport { SyntheticEvent } from 'react'\r\n\r\nconst TABS = [\r\n  //{ key: 'procesos', name: 'Procesos', pane: <TabProcesos /> },\r\n  { key: 'riesgos', name: 'Riesgos', pane: <TabRiesgos /> }\r\n  //{ key: 'riesgosmap', name: 'Mapa de Riesgos', pane: <TabRiesgosMapa /> }\r\n]\r\n\r\nconst App = () => {\r\n  const panes = _.map(TABS, (tab, index) => {\r\n    return {\r\n      key: tab.name,\r\n      menuItem: (\r\n        <Menu.Item\r\n          className='tab-nav-item'\r\n          content={<span className='tabname'>{tab.name}</span>}\r\n          key={`${tab.key}-tab`}\r\n          index={index}\r\n          as='a'\r\n          style={{ width: '99%' }}\r\n        />\r\n      ),\r\n      render: () => tab.pane\r\n    }\r\n  })\r\n\r\n  const onTabChange = (ev: SyntheticEvent, { activeIndex }: { activeIndex: number }) => {\r\n    window.location.hash = '#!' + TABS[activeIndex].key\r\n  }\r\n\r\n  const defaultActiveIndex = (() => {\r\n    const hash = window.location.hash.replace(/^#!/, '').split('/')[0]\r\n    if (hash == '') {\r\n      return 0\r\n    }\r\n    const tab = _.findIndex(TABS, { key: hash })\r\n\r\n    return tab == -1 ? 0 : tab\r\n  })()\r\n\r\n  return (\r\n    <div id='app-tabs' className='app-tabs'>\r\n      <Tab panes={panes} defaultActiveIndex={defaultActiveIndex} renderActiveOnly onTabChange={onTabChange} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import { PureComponent, SyntheticEvent, Fragment } from 'react'\r\n\r\nimport Modal from 'semantic-ui-react/dist/commonjs/modules/Modal/Modal'\r\nimport Tab from 'semantic-ui-react/dist/commonjs/modules/Tab/Tab'\r\nimport Popup from 'semantic-ui-react/dist/commonjs/modules/Popup/Popup'\r\n\r\nimport cx from 'classnames'\r\n\r\nimport EditorPreview from '../global/EditorPreview'\r\nimport { RiesgoFieldDropdown } from './ProyectoRiesgoUtils'\r\nimport ProyectoRiesgoListContext from './ProyectoRiesgoListContext'\r\n\r\ndeclare var app: any\r\n\r\ntype ProyectoRiesgoCreateModalProps = {\r\n  onCreate?: (riesgo: Partial<ProyectoRiesgo> | { bibliotecaIds: string[] }) => void\r\n  onClose?: () => void\r\n}\r\n\r\nexport class ProyectoRiesgoCreateModal extends PureComponent<ProyectoRiesgoCreateModalProps> {\r\n  render() {\r\n    const panes = [\r\n      {\r\n        menuItem: {\r\n          key: 'library',\r\n          className: 'tab-nav-item',\r\n          content: <span className='tabname'>Desde Biblioteca</span>\r\n        },\r\n        render: () => (\r\n          <Tab.Pane>\r\n            <ProyectoRiesgoCreateFromLibrary onCancel={this.props.onClose} onCreate={this.props.onCreate} />\r\n          </Tab.Pane>\r\n        )\r\n      },\r\n      {\r\n        menuItem: { key: 'new', className: 'tab-nav-item', content: <span className='tabname'>Nuevo</span> },\r\n        render: () => (\r\n          <Tab.Pane>\r\n            <ProyectoRiesgoCreateNew onCancel={this.props.onClose} onCreate={this.props.onCreate} />\r\n          </Tab.Pane>\r\n        )\r\n      }\r\n    ]\r\n\r\n    return (\r\n      <Modal\r\n        dimmer='inverted'\r\n        open\r\n        closeIcon\r\n        closeOnDimmerClick={false}\r\n        className='modal-ab'\r\n        onClose={this.props.onClose}\r\n      >\r\n        <Modal.Header>Crear Riesgo</Modal.Header>\r\n        <Modal.Content>\r\n          <Tab panes={panes} menu={{ widths: 2, tabular: true, attached: 'top' }} className='ab-tabs' />\r\n        </Modal.Content>\r\n      </Modal>\r\n    )\r\n  }\r\n}\r\n\r\ntype ProyectoRiesgoCreateNewProps = {\r\n  onCreate?: (riesgo: Partial<ProyectoRiesgo> | { bibliotecaIds: string[] }) => void\r\n  onCancel?: () => void\r\n}\r\n\r\ntype ProyectoRiesgoCreateNewState = {\r\n  codigo: string\r\n  description: string\r\n  ProyectoRiesgoHasRubro: { id: string }[]\r\n  ProyectoRiesgoHasObjetivo: { id: string }[]\r\n}\r\n\r\nexport class ProyectoRiesgoCreateNew extends PureComponent<ProyectoRiesgoCreateNewProps, ProyectoRiesgoCreateNewState> {\r\n  state: ProyectoRiesgoCreateNewState = {\r\n    codigo: '',\r\n    description: '',\r\n    ProyectoRiesgoHasRubro: [],\r\n    ProyectoRiesgoHasObjetivo: []\r\n  }\r\n\r\n  onSubmit = () => {\r\n    if (this.state.codigo == '' && this.state.description == '') {\r\n      bootbox.alert('Ingrese el código o la descripción del riesgo')\r\n      return\r\n    }\r\n\r\n    if ($.isFunction(this.props.onCreate)) {\r\n      this.props.onCreate(this.state)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='ui form'>\r\n        <p className='description-text'>\r\n          Diligencie los siguientes campos para crear un nuevo riesgo en este proyecto.\r\n        </p>\r\n        <div className='inline fields'>\r\n          <div className='field'>\r\n            <label htmlFor='proyecto_riesgo_new_codigo'>ID del Riesgo: </label>\r\n            <div className='ui input'>\r\n              <input\r\n                id='proyecto_riesgo_new_codigo'\r\n                type='text'\r\n                value={this.state.codigo}\r\n                placeholder='ID del Riesgo'\r\n                onChange={(ev: SyntheticEvent) => this.setState({ codigo: _.trim((ev.target as any).value) })}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className='fields'>\r\n          <div className='field sixteen wide'>\r\n            <div className='ui segment' style={{ minHeight: 90 }}>\r\n              <EditorPreview\r\n                data={this.state.description}\r\n                className='riesgo-descripcion descripcion-field'\r\n                ckeditorOptions='basic'\r\n                prefixPreview='Descripción del Riesgo: '\r\n                labelTitle='Descripción del Riesgo:'\r\n                openOnClickPreview\r\n                onSave={(editor: CKEDITOR.editor) => this.setState({ description: editor.getData() })}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className='equal width fields'>\r\n          <div className='field'>\r\n            <label>Rubros</label>\r\n            <div className='ui input'>\r\n              <RiesgoFieldDropdown\r\n                value={this.state.ProyectoRiesgoHasRubro}\r\n                choices={app.vars.riesgocontext.rubros}\r\n                field='id_master_data_fase'\r\n                onChange={(value: any) => this.setState({ ProyectoRiesgoHasRubro: value })}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className='field'>\r\n            <label>Aserciones</label>\r\n            <div className='ui input'>\r\n              <RiesgoFieldDropdown\r\n                value={this.state.ProyectoRiesgoHasObjetivo}\r\n                choices={app.vars.riesgocontext.objetivos}\r\n                field='id_master_data_objetivo'\r\n                onChange={(value: any) => this.setState({ ProyectoRiesgoHasObjetivo: value })}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className='field'>\r\n          <Popup\r\n            disabled={this.state.codigo !== '' || this.state.description !== ''}\r\n            content='Ingrese el código o la descripción del riesgo'\r\n            header='Opción deshabilitada'\r\n            className='disabled-text'\r\n            trigger={\r\n              <div style={{ display: 'inline-block', float: 'right' }}>\r\n                <button\r\n                  type='button'\r\n                  className='ui button right floated  primary'\r\n                  disabled={this.state.codigo == '' && this.state.description == ''}\r\n                  onClick={this.onSubmit}\r\n                >\r\n                  Crear Riesgo\r\n                </button>\r\n              </div>\r\n            }\r\n          />\r\n\r\n          <button type='button' className='ui button right floated  negative' onClick={this.props.onCancel}>\r\n            Cancelar\r\n          </button>\r\n          <div className='clearfix' />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\ntype RiesgoGlobal = {\r\n  id: string\r\n  description: string\r\n  rubro: string\r\n  Objetivos: { id: string; description: string; name: string; code: string }[]\r\n}\r\n\r\ntype ProyectoRiesgoCreateFromLibraryState = {\r\n  riesgos: RiesgoGlobal[]\r\n  selectedIds: string[]\r\n}\r\n\r\nexport class ProyectoRiesgoCreateFromLibrary extends PureComponent<\r\n  ProyectoRiesgoCreateNewProps,\r\n  ProyectoRiesgoCreateFromLibraryState\r\n> {\r\n  static contextType = ProyectoRiesgoListContext\r\n  state: ProyectoRiesgoCreateFromLibraryState = {\r\n    riesgos: null,\r\n    selectedIds: []\r\n  }\r\n\r\n  _isMounted = false\r\n\r\n  componentDidMount() {\r\n    this._isMounted = true\r\n    if (app.vars.riesgocontext.biblioteca) {\r\n      this.setState({ riesgos: app.vars.riesgocontext.biblioteca })\r\n    } else {\r\n      $.getJSON(url_for(`proyecto/${app.vars.idproyecto}/riesgos/list`), { type: 'biblioteca' }).done((res) => {\r\n        app.vars.riesgocontext.biblioteca = res.response.riesgos\r\n        if (this._isMounted) {\r\n          this.setState({ riesgos: res.response.riesgos })\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false\r\n  }\r\n\r\n  onChange = (ev: SyntheticEvent) => {\r\n    const el = ev.target as any\r\n    this.setState((state) => {\r\n      let selectedIds = state.selectedIds.slice()\r\n      if (_.includes(selectedIds, el.value)) {\r\n        selectedIds = _.difference(selectedIds, [ el.value ])\r\n      } else {\r\n        selectedIds.push(el.value)\r\n      }\r\n\r\n      return { selectedIds }\r\n    })\r\n  }\r\n\r\n  onSubmit = () => {\r\n    if (this.state.selectedIds.length >= 0) {\r\n      const { riesgos } = this.context\r\n      const usedIds = _.pluck(riesgos, 'id_riesgo')\r\n\r\n      const bibliotecaIds = _.difference(this.state.selectedIds, usedIds)\r\n      this.props.onCreate({ bibliotecaIds })\r\n      this.setState({ selectedIds: bibliotecaIds })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.state.riesgos === null) {\r\n      return (\r\n        <div style={{ minHeight: 160 }}>\r\n          <div className='ui active transition visible inverted dimmer'>\r\n            <div className='ui inverted text loader'>Cargando Riesgos de la Biblioteca</div>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    const { riesgos } = this.context\r\n    const usedIds = _.pluck(riesgos, 'id_riesgo')\r\n\r\n    return (\r\n      <Fragment>\r\n        <div style={{ maxHeight: 420, overflowY: 'auto', marginBottom: 5 }}>\r\n          <p>Seleccione los riesgos de la biblioteca que desea agregar a su proyecto.</p>\r\n          <table className='ui table compact small striped'>\r\n            <thead>\r\n              <tr>\r\n                <th />\r\n                <th>Riesgo</th>\r\n                <th>Rubro</th>\r\n                <th>Aserciones</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {_.map(this.state.riesgos, (riesgo) => {\r\n                return (\r\n                  <tr key={riesgo.id} className={cx(_.include(usedIds, riesgo.id) ? 'success' : null)}>\r\n                    <td>\r\n                      {_.include(usedIds, riesgo.id) ? (\r\n                        <i className='check icon green' />\r\n                      ) : (\r\n                        <input\r\n                          type='checkbox'\r\n                          name='biblioteca[id][]'\r\n                          checked={_.include(this.state.selectedIds, riesgo.id)}\r\n                          value={riesgo.id}\r\n                          onChange={this.onChange}\r\n                        />\r\n                      )}\r\n                    </td>\r\n                    <td className='riesgo_descr'>{riesgo.description}</td>\r\n                    <td>{riesgo.rubro}</td>\r\n                    <td>\r\n                      {_.map(riesgo.Objetivos, (objetivo) => {\r\n                        return (\r\n                          <Popup\r\n                            key={objetivo.id}\r\n                            trigger={\r\n                              <span className='label label-success' style={{ marginRight: 2 }}>\r\n                                {objetivo.code}\r\n                              </span>\r\n                            }\r\n                            size='small'\r\n                            header={`Objetivo: ${objetivo.name}`}\r\n                            content={objetivo.description}\r\n                          />\r\n                        )\r\n                      })}\r\n                    </td>\r\n                  </tr>\r\n                )\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <div className='field'>\r\n          <button type='button' className='ui button right floated  primary' onClick={this.onSubmit}>\r\n            Crear Riesgos\r\n          </button>\r\n          <button type='button' className='ui button right floated  negative' onClick={this.props.onCancel}>\r\n            Cancelar\r\n          </button>\r\n          <div className='clearfix' />\r\n        </div>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n","import { createContext } from 'react'\r\n\r\nexport default createContext<ProyectoRiesgoListContextType>({\r\n  riesgos: null,\r\n  updateRiesgos: (data) => {}\r\n})\r\n","import { PureComponent, Fragment } from 'react'\r\n\r\nimport Menu from 'semantic-ui-react/dist/commonjs/collections/Menu/Menu'\r\n\r\nimport { ProyectoRiesgoCreateModal } from './ProyectoRiesgoCreateModal'\r\nimport ProyectoRiesgoListContext from './ProyectoRiesgoListContext'\r\nimport { RiesgoModel } from './RiesgoModel'\r\n\r\nimport { MenuItemHallazgo } from '../proyecto__hoja_trabajo/sidebar/menuitem_hallazgo'\r\nimport { MenuItemRevision } from '../proyecto__hoja_trabajo/sidebar/menuitem_revision'\r\n\r\nimport { HallazgoRiesgoModelManager, RevisionRiesgoModelManager } from './sidebar/menuitem__model_manager'\r\n\r\nimport cx from 'classnames'\r\n\r\ndeclare var app: any\r\n\r\nexport class ProyectoRiesgoListSidebar extends PureComponent<{}, { panelOpen: string }> {\r\n  state: { panelOpen: string } = {\r\n    panelOpen: null\r\n  }\r\n\r\n  onItemOpen = (item: string) => {\r\n    this.setState({ panelOpen: item })\r\n  }\r\n\r\n  closeAllPanel = () => {\r\n    this.setState({ panelOpen: null })\r\n  }\r\n\r\n  render() {\r\n    const editable = app.vars.proyecto.isOpen\r\n    const url_base = `proyecto/${app.vars.idproyecto}/`\r\n    const image_path = public_path('images/sidebar_right/')\r\n    const counters = app.vars.riesgocontext.counters\r\n\r\n    return (\r\n      <Fragment>\r\n        <div\r\n          className={cx('sidebar-fixed-overlay ui page dimmer inverted', { active: this.state.panelOpen != null })}\r\n          onClick={() => this.closeAllPanel()}\r\n        />\r\n        <Menu fixed='right' vertical compact icon className='app-sidebar right-sidebar' id='app-right-sidebar'>\r\n          <Menu.Menu>\r\n            <Menu.Item />\r\n            {editable && <RiesgoMenuItemCreate />}\r\n          </Menu.Menu>\r\n\r\n          <Menu.Menu>\r\n            <MenuItemHallazgo\r\n              moduleParams={{ model: 'riesgo_hallazgo' }}\r\n              counter={counters.hallazgos}\r\n              open={this.state.panelOpen == 'hallazgo'}\r\n              onOpen={this.onItemOpen}\r\n              modelManager={HallazgoRiesgoModelManager.getInstance()}\r\n            />\r\n          </Menu.Menu>\r\n\r\n          <Menu.Menu>\r\n            <MenuItemRevision\r\n              moduleParams={{ model: 'riesgo_revision' }}\r\n              counter={counters.revisiones}\r\n              open={this.state.panelOpen == 'revision'}\r\n              onOpen={this.onItemOpen}\r\n              modelManager={RevisionRiesgoModelManager.getInstance()}\r\n            />\r\n          </Menu.Menu>\r\n\r\n          <Menu.Menu>\r\n            <Menu.Item\r\n              as='a'\r\n              href={url_for(url_base + 'riesgos/export')}\r\n              target='_blank'\r\n              title='Exportar'\r\n              content={<img src={image_path + 'exportar_excel.svg'} className='ui large image' />}\r\n            />\r\n          </Menu.Menu>\r\n\r\n          <Menu.Menu>\r\n            <Menu.Item\r\n              as='a'\r\n              href={url_for(url_base + 'riesgos/config')}\r\n              title='Configuraciones'\r\n              content={<img src={image_path + 'configuraciones.svg'} className='ui large image' />}\r\n            />\r\n          </Menu.Menu>\r\n        </Menu>\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nclass RiesgoMenuItemCreate extends PureComponent<{}, { open: boolean }> {\r\n  static contextType = ProyectoRiesgoListContext\r\n\r\n  state = {\r\n    open: false\r\n  }\r\n\r\n  onClick = () => {\r\n    this.setState({ open: true })\r\n  }\r\n\r\n  onClose = () => {\r\n    this.setState({ open: false })\r\n  }\r\n\r\n  onCreate = (riesgo: Partial<ProyectoRiesgo> | { bibliotecaIds: string[] }) => {\r\n    const { riesgos, updateRiesgos } = this.context\r\n\r\n    if ('bibliotecaIds' in riesgo) {\r\n      $.blockUI(create_blockUI_loading_message('Creando riesgos'))\r\n      RiesgoModel.create(riesgo).then((riesgos_new: ProyectoRiesgo[]) => {\r\n        const riesgos_copy = riesgos.slice()\r\n        _.each(riesgos_new, (riesgo_new) => {\r\n          riesgos_copy.push(riesgo_new)\r\n        })\r\n        this.setState({ open: false })\r\n        updateRiesgos(riesgos_copy)\r\n        $.unblockUI()\r\n      })\r\n    } else {\r\n      $.blockUI(create_blockUI_loading_message('Creando riesgo'))\r\n      RiesgoModel.create(riesgo).then((riesgo_new: ProyectoRiesgo) => {\r\n        const riesgos_copy = riesgos.slice()\r\n        riesgos_copy.push(riesgo_new)\r\n        updateRiesgos(riesgos_copy)\r\n        this.setState({ open: false })\r\n        $.unblockUI()\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <Menu.Item\r\n          link\r\n          title='Crear Riesgo'\r\n          className='item-create'\r\n          onClick={this.onClick}\r\n          content={<img src={public_path('images/sidebar_right/') + 'riesgos_new.svg'} className='ui large image' />}\r\n        />\r\n        {this.state.open && <ProyectoRiesgoCreateModal onClose={this.onClose} onCreate={this.onCreate} />}\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n","/// <reference path=\"index.d.ts\" />\r\n\r\nimport { PureComponent, Fragment, useState } from 'react'\r\n\r\nimport Modal from 'semantic-ui-react/dist/commonjs/modules/Modal/Modal'\r\nimport { instance as eventStack } from '@semantic-ui-react/event-stack'\r\n\r\nimport Slider from 'react-rangeslider'\r\nimport keyboardKey from 'keyboard-key'\r\n\r\nimport ProyectoRiesgoListContext from '../proyecto__riesgo/ProyectoRiesgoListContext'\r\nimport EditorPreview from '../global/EditorPreview'\r\nimport ButtonEdit from '../global/ButtonEdit'\r\nimport { GenericTooltip } from '../global/Tooltip'\r\nimport { PasoSelect } from '../global/PasoSelect'\r\n\r\nimport {\r\n  createRiesgoCellBlock,\r\n  RiesgoFieldDropdown,\r\n  RiesgoCriterioEvaluacionControlTable\r\n} from '../proyecto__riesgo/ProyectoRiesgoUtils'\r\nimport { RiesgoModel } from './RiesgoModel'\r\n\r\nimport cx from 'classnames'\r\n\r\ndeclare var app: any\r\n\r\ntype ProyectoRiesgoModalProps = {\r\n  riesgo: ProyectoRiesgo\r\n  editable?: boolean\r\n  onUpdate?: (riesgo: ProyectoRiesgo) => void\r\n  onClose?: () => void\r\n}\r\n\r\ntype ProyectoRiesgoFields = { [P in keyof ProyectoRiesgo]?: ProyectoRiesgo[P] }\r\n\r\nconst createTooltip = (text: string, tooltip: string, title: string = null) => {\r\n  return (\r\n    <Fragment>\r\n      {text} <GenericTooltip text={tooltip} title={title || text} />\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default class ProyectoRiesgoModal extends PureComponent<ProyectoRiesgoModalProps> {\r\n  static contextType = ProyectoRiesgoListContext\r\n\r\n  static defaultProps = {\r\n    editable: true\r\n  }\r\n\r\n  private handlers: { [s: string]: any } = {}\r\n\r\n  /**\r\n   * Send changes to server\r\n   *\r\n   * @param changes Changes to send to server\r\n   * @param silent If false, shows loading indicator.\r\n   */\r\n  sendToServer(changes: ProyectoRiesgoFields, silent: boolean = false) {\r\n    const { riesgo }: { riesgo: ProyectoRiesgo } = this.props\r\n\r\n    changes = RiesgoModel.setChanges(riesgo, changes)\r\n\r\n    if (!changes) {\r\n      return\r\n    }\r\n\r\n    if (!silent) {\r\n      $.blockUI(create_blockUI_loading_message('Guardando Cambios...'))\r\n    } else {\r\n      this.updateModel(changes)\r\n    }\r\n\r\n    RiesgoModel.save(riesgo, changes)\r\n      .then(() => {\r\n        if (!silent) {\r\n          this.updateModel(changes)\r\n          $.unblockUI()\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        bootbox.dialog(error, [ { label: 'OK', class: 'btn-danger' } ], {\r\n          header: '<span class=\"icon-warning-sign\"></span> Error de Validación - Dato no válido',\r\n          classes: 'bootbox-error'\r\n        })\r\n        $.unblockUI()\r\n      })\r\n  }\r\n\r\n  updateModel(changes: ProyectoRiesgoFields) {\r\n    const { riesgo } = this.props\r\n    const { riesgos, updateRiesgos } = this.context\r\n\r\n    const _riesgos: ProyectoRiesgo[] = _.map(riesgos, (_riesgo: ProyectoRiesgo) => {\r\n      if (_riesgo.id == riesgo.id) {\r\n        _riesgo = Object.assign({}, _riesgo, changes)\r\n      }\r\n      return _riesgo\r\n    })\r\n\r\n    updateRiesgos(_riesgos)\r\n  }\r\n\r\n  attachHandler(field: string, handler: any) {\r\n    if (!this.handlers[field]) {\r\n      this.handlers[field] = handler\r\n    }\r\n\r\n    return this.handlers[field]\r\n  }\r\n\r\n  handleEscape = (e: Event) => {\r\n    if (keyboardKey.getCode(e) !== keyboardKey.Escape) return\r\n\r\n    if (typeof CKEDITOR !== 'undefined' && CKEDITOR.dialog.getCurrent() != null) {\r\n      // si existe un CKEditor dialog abierto, no cerrar el modal.\r\n      return\r\n    }\r\n\r\n    if ($('.bootbox:visible').length > 0) {\r\n      // si existe un cuadro de dialog abierto, no cerrar el modal.\r\n      return\r\n    }\r\n\r\n    this.onClose()\r\n  }\r\n\r\n  onClose = () => {\r\n    this.props.onClose()\r\n  }\r\n\r\n  onModalMount = () => {\r\n    eventStack.sub('keydown', this.handleEscape, { pool: 'default' })\r\n  }\r\n\r\n  onClickEditCodigo = (field: 'codigo' | 'control_codigo') => {\r\n    return this.attachHandler(field, () => {\r\n      const { riesgo }: { riesgo: ProyectoRiesgo } = this.props\r\n\r\n      const promptMessage = (() => {\r\n        switch (field) {\r\n          case 'codigo':\r\n            return { content: 'Escriba el nuevo Código del Riesgo.', header: 'Código del Riesgo' }\r\n          case 'control_codigo':\r\n            return { content: 'Escriba el nuevo Código del Control.', header: 'Código del Control' }\r\n        }\r\n      })()\r\n\r\n      const defaultValue = riesgo[field] || ''\r\n      bootbox.prompt(\r\n        promptMessage,\r\n        'Cancelar',\r\n        'Aceptar',\r\n        (res: string) => {\r\n          res = _.str.trim(res)\r\n          if (res == '') {\r\n            return\r\n          }\r\n\r\n          this.sendToServer({ [field]: res })\r\n        },\r\n        defaultValue\r\n      )\r\n\r\n      $('.bootbox.modal').addClass('modal-ab')\r\n    })\r\n  }\r\n\r\n  onClickEditDescription = (field: string) => {\r\n    const handler = (editor: CKEDITOR.editor, closeModal: boolean, autosave: boolean, cb: () => void) => {\r\n      this.sendToServer({ [field]: editor.getData() })\r\n      cb()\r\n    }\r\n\r\n    return this.attachHandler(field, handler)\r\n  }\r\n\r\n  onChangeControlCodigo = (value: string) => {\r\n    this.sendToServer({ control_codigo: value }, true)\r\n  }\r\n\r\n  onClickRemoveControlCodigo = () => {\r\n    bootbox.warningConfirm(\r\n      '¿Desea eliminar este control?<br/>Tenga en cuenta que esto eliminará TODA la información (Código, Descripción, Valoración, Evaluaciones y Validaciones) registrada en este control',\r\n      'No',\r\n      'Sí, eliminar control',\r\n      (answer) => {\r\n        if (answer) {\r\n          let changes = RiesgoModel.getChangesWhenRemoveControlCodigo(this.props.riesgo)\r\n          this.sendToServer(changes, true)\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  onChangeRiesgoFraude = (checked: boolean) => {\r\n    this.sendToServer({ fraude_material: checked ? 1 : 0 }, true)\r\n  }\r\n\r\n  onChangeSlider = (field: string) => {\r\n    return this.attachHandler(field, (value: any) => {\r\n      value = value * 2 - 1\r\n      let changes = { [field]: value }\r\n\r\n      if (field == 'probabilidad' || field == 'impacto') {\r\n        // Si el campo es probabilidad o impacto, recalcular el riesgo inherente\r\n        const riesgo_inherente = this.calcularRiesgoInherente(changes)\r\n        if (riesgo_inherente) {\r\n          changes.riesgo_inherente = riesgo_inherente\r\n        }\r\n      }\r\n      this.sendToServer(changes, true)\r\n    })\r\n  }\r\n\r\n  onChangeDropdown = (field: string) => {\r\n    return this.attachHandler(field, (value: any) => {\r\n      let changes = { [field]: value }\r\n      this.sendToServer(changes, true)\r\n    })\r\n  }\r\n\r\n  onChangeCriterioEvaluacion = (field: string, { value }: { value: string }) => {\r\n    let changes: any = { [field]: value }\r\n    this.sendToServer(changes, true)\r\n  }\r\n\r\n  onSavePaso = (selectedIds: string[]) => {\r\n    const ids = _.map(selectedIds, (id) => {\r\n      return { id_master_data_paso: id, id: id }\r\n    })\r\n\r\n    this.sendToServer({ ProyectoRiesgoHasPaso: ids })\r\n  }\r\n\r\n  cloneRiesgoWithChanges(changes: any): ProyectoRiesgo {\r\n    const { riesgo } = this.props\r\n\r\n    return Object.assign({}, riesgo, changes || {})\r\n  }\r\n\r\n  calcularRiesgoInherente(changes: any) {\r\n    return RiesgoModel.calculateRiesgoInherente(this.cloneRiesgoWithChanges(changes))\r\n  }\r\n\r\n  renderSection1() {\r\n    const { riesgo, editable } = this.props\r\n\r\n    const header = (\r\n      <div className='row ui middle aligned  grid '>\r\n        <div className='four wide column'>\r\n          <strong>Riesgo: </strong>\r\n          <span>{riesgo.codigo}</span>\r\n        </div>\r\n        <div className='nine wide column right aligned'>\r\n          <strong>Riesgo Inherente: </strong>\r\n          {createRiesgoCellBlock(riesgo, 'riesgo_inherente')}\r\n        </div>\r\n        <div className='three wide column right aligned'>\r\n          {+riesgo.fraude_material == 1 && (\r\n            <strong>\r\n              Fraude <i className='red exclamation circle large icon' aria-hidden='true' />\r\n            </strong>\r\n          )}\r\n        </div>\r\n      </div>\r\n    )\r\n\r\n    const content = (\r\n      <Fragment>\r\n        <div className='row'>\r\n          <div className='eight wide column'>\r\n            <strong>ID del Riesgo: </strong>\r\n            <span>{riesgo.codigo}</span>\r\n            {editable && <ButtonEdit onClick={this.onClickEditCodigo('codigo')} />}\r\n          </div>\r\n        </div>\r\n        <div className='row'>\r\n          <div className='sixteen wide column'>\r\n            <div className='ui segment'>\r\n              <EditorPreview\r\n                className='riesgo-descripcion descripcion-field'\r\n                data={riesgo.description}\r\n                editable={editable}\r\n                ckeditorOptions='basic'\r\n                prefixPreview='Descripción del Riesgo: '\r\n                labelTitle='Descripción del Riesgo:'\r\n                openOnClickPreview={editable}\r\n                onSave={this.onClickEditDescription('description')}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className='three column row'>\r\n          <div className='column field _a-center'>\r\n            <header>\r\n              <strong>Rubros</strong>\r\n            </header>\r\n            <RiesgoFieldDropdown\r\n              value={riesgo.ProyectoRiesgoHasRubro}\r\n              choices={app.vars.riesgocontext.rubros}\r\n              field='id_master_data_fase'\r\n              onChange={this.onChangeDropdown('ProyectoRiesgoHasRubro')}\r\n              editable={editable}\r\n            />\r\n          </div>\r\n          <div className='column field _a-center'>\r\n            <header>\r\n              <strong>Aserciones</strong>\r\n            </header>\r\n            <RiesgoFieldDropdown\r\n              value={riesgo.ProyectoRiesgoHasObjetivo}\r\n              choices={app.vars.riesgocontext.objetivos}\r\n              field='id_master_data_objetivo'\r\n              onChange={this.onChangeDropdown('ProyectoRiesgoHasObjetivo')}\r\n              editable={editable}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className='three column  row n1'>\r\n          <div className='column field _a-center'>\r\n            <header>\r\n              <div className='title'>\r\n                Probabilidad <GenericTooltip text={'@tooltip.riesgos.probabilidad'} title='Probabilidad' />\r\n              </div>\r\n              <div className='bordertopline' />\r\n            </header>\r\n            <RiesgoFieldSlider\r\n              value={riesgo.probabilidad}\r\n              labels={{\r\n                1: createTooltip('Bajo', '@tooltip.riesgos.probabilidad__bajo', 'Probabilidad Baja'),\r\n                2: createTooltip('Medio', '@tooltip.riesgos.probabilidad__medio', 'Probabilidad Medio'),\r\n                3: createTooltip('Alto', '@tooltip.riesgos.probabilidad__alto', 'Probabilidad Alta')\r\n              }}\r\n              editable={editable}\r\n              onChange={this.onChangeSlider('probabilidad')}\r\n            />\r\n          </div>\r\n          <div className='column field _a-center'>\r\n            <header>\r\n              <div className='title'>\r\n                Impacto <GenericTooltip text={'@tooltip.riesgos.impacto'} title='Impacto' />\r\n              </div>\r\n              <div className='bordertopline' />\r\n            </header>\r\n            <RiesgoFieldSlider\r\n              value={riesgo.impacto}\r\n              labels={{ 1: 'Bajo', 2: 'Medio', 3: 'Alto' }}\r\n              editable={editable}\r\n              onChange={this.onChangeSlider('impacto')}\r\n            />\r\n          </div>\r\n          <div className='column field _a-center'>\r\n            <header>\r\n              <div className='title'>\r\n                Riesgo Inherente\r\n                <GenericTooltip text={'@tooltip.riesgos.riesgo_inherente'} title='Riesgo Inherente' />\r\n              </div>\r\n              <div className='bordertopline' />\r\n            </header>\r\n            <BMACheckboxGroup value={riesgo.riesgo_inherente} />\r\n          </div>\r\n        </div>\r\n\r\n        <div className='row'>\r\n          <div className='sixteen wide column right aligned'>\r\n            <div className='zone-g'>\r\n              <strong>¿Este riesgo tiene probabilidad de un fraude material?</strong>\r\n              <RiesgoFraudeMaterialCheckboxGroup\r\n                editable={editable}\r\n                checked={riesgo.fraude_material == 1}\r\n                onChange={this.onChangeRiesgoFraude}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Fragment>\r\n    )\r\n\r\n    return <ProyectoRiesgoModalSection header={header} content={content} />\r\n  }\r\n\r\n  renderSection2() {\r\n    const { riesgo, editable } = this.props\r\n\r\n    const header = (\r\n      <div className='row ui middle aligned  grid '>\r\n        <div className='six wide column'>\r\n          <strong>\r\n            Control: <GenericTooltip text={'@tooltip.riesgos.control'} title='Control del Riesgo' />{' '}\r\n          </strong>\r\n          <span>{riesgo.control_codigo}</span>\r\n        </div>\r\n        <div className='nine wide column right aligned'>\r\n          <strong>\r\n            Evaluación del Control:\r\n            <GenericTooltip text={'@tooltip.riesgos.control_valoracion'} title='Evaluación del Control' />\r\n          </strong>\r\n          {createRiesgoCellBlock(riesgo, 'control_valoracion')}\r\n        </div>\r\n      </div>\r\n    )\r\n\r\n    const content = (\r\n      <Fragment>\r\n        <div className='row'>\r\n          <div className='eight wide column'>\r\n            <strong>ID del Control: </strong>\r\n            <RiesgoControlCodigoInput value={riesgo.control_codigo} onChange={this.onChangeControlCodigo} />\r\n            {editable && riesgo.control_codigo && <ButtonEdit onClick={this.onClickEditCodigo('control_codigo')} />}\r\n            {editable &&\r\n            riesgo.control_codigo && (\r\n              <button\r\n                className='ui button mini negative compact icon basic action'\r\n                title='Eliminar Control'\r\n                onClick={this.onClickRemoveControlCodigo}\r\n              >\r\n                <i className='trash icon' />\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className='row'>\r\n          <div className='sixteen wide column'>\r\n            <div className='ui segment'>\r\n              <EditorPreview\r\n                className='control-descripcion  descripcion-field'\r\n                data={riesgo.control_descripcion}\r\n                editable={editable}\r\n                ckeditorOptions='basic'\r\n                prefixPreview='Descripción del Control: '\r\n                labelTitle='Descripción del Control:'\r\n                openOnClickPreview={editable}\r\n                onSave={this.onClickEditDescription('control_descripcion')}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className='row'>\r\n          <div className='sixteen wide column'>\r\n            <div className={cx('ui segment nopad noborder', !riesgo.control_codigo ? 'dimmable' : null)}>\r\n              <RiesgoCriterioEvaluacionControlTable\r\n                riesgo={riesgo}\r\n                onChange={this.onChangeCriterioEvaluacion}\r\n                editable={editable}\r\n              />\r\n              <RiesgoControlDimmer riesgo={riesgo} editable={editable} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Fragment>\r\n    )\r\n\r\n    return <ProyectoRiesgoModalSection header={header} content={content} />\r\n  }\r\n\r\n  renderSection3() {\r\n    const { riesgo, editable } = this.props\r\n\r\n    const header = (\r\n      <div className='row ui middle aligned  grid '>\r\n        <div className='six wide column'>\r\n          <strong>Validación del Control: </strong>\r\n        </div>\r\n        <div className='nine wide column right aligned'>\r\n          <strong>Riesgo Residual: </strong>\r\n          {createRiesgoCellBlock(riesgo, 'riesgo_residual')}\r\n        </div>\r\n      </div>\r\n    )\r\n\r\n    const labels = {\r\n      efectividad: {\r\n        1: createTooltip('Inefectivo', '@tooltip.riesgos.control_efectividad__inefectivo'),\r\n        2: createTooltip('Con Deficiencias', '@tooltip.riesgos.control_efectividad__condeficiencias'),\r\n        3: createTooltip('Efectivo', '@tooltip.riesgos.control_efectividad__efectivo')\r\n      }\r\n    }\r\n\r\n    const content = (\r\n      <Fragment>\r\n        <div className='row'>\r\n          <div className='sixteen wide column'>\r\n            <div className={cx('ui segment', !!riesgo.control_codigo || 'dimmable')}>\r\n              <EditorPreview\r\n                className='control-validacion-control  descripcion-field'\r\n                data={riesgo.control_debilidad_descripcion}\r\n                editable={editable}\r\n                prefixPreview='Validación del Control: '\r\n                labelTitle='Validación del Control:'\r\n                openOnClickPreview={editable}\r\n                onSave={this.onClickEditDescription('control_debilidad_descripcion')}\r\n                ckeditorUploadOptions={{ model: 'riesgo__control_validacion', modelId: riesgo.id }}\r\n                footer='AttachmentList'\r\n              />\r\n\r\n              <br />\r\n              <PasoAssignModal riesgo={riesgo} editable={editable} onSave={this.onSavePaso} />\r\n              <RiesgoControlDimmer riesgo={riesgo} editable={editable} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className='two column  row n1'>\r\n          <div className={cx('column field _a-center', !!riesgo.control_codigo || 'dimmable')}>\r\n            <header>\r\n              <div className='title'>\r\n                Efectividad del Control\r\n                <GenericTooltip text={'@tooltip.riesgos.control_efectividad'} title='Efectividad del Control' />\r\n              </div>\r\n              <div className='bordertopline' />\r\n            </header>\r\n            <RiesgoFieldSlider\r\n              value={riesgo.control_efectividad}\r\n              labels={labels.efectividad}\r\n              onChange={this.onChangeSlider('control_efectividad')}\r\n              editable={editable}\r\n              inverted\r\n            />\r\n            <RiesgoControlDimmer riesgo={riesgo} editable={editable} />\r\n          </div>\r\n          <div className='column field _a-center'>\r\n            <header>\r\n              <div className='title'>\r\n                Riesgo Residual\r\n                <GenericTooltip text={'@tooltip.riesgos.riesgo_residual'} title='Riesgo Residual' />\r\n              </div>\r\n              <div className='bordertopline' />\r\n            </header>\r\n            <BMACheckboxGroup\r\n              value={riesgo.riesgo_residual}\r\n              tooltips={{\r\n                1: <GenericTooltip text='@tooltip.riesgos.riesgo_residual__bajo' title='Riesgo Residual - Bajo' />,\r\n                3: <GenericTooltip text='@tooltip.riesgos.riesgo_residual__moderado' title='Riesgo Residual - Medio' />,\r\n                5: <GenericTooltip text='@tooltip.riesgos.riesgo_residual__alto' title='Riesgo Residual - Alto' />\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className='row'>\r\n          <div className='sixteen wide column'>\r\n            <div className={cx('ui segment', !!riesgo.control_codigo || 'dimmable')}>\r\n              <EditorPreview\r\n                className='control-impacto-descripcion  descripcion-field'\r\n                data={riesgo.control_impacto_descripcion}\r\n                editable={editable}\r\n                prefixPreview='Impacto en la Auditoría según la clasificación del Riesgo Residual: '\r\n                labelTitle='Impacto en la Auditoría según la clasificación del Riesgo Residual:'\r\n                openOnClickPreview={editable}\r\n                onSave={this.onClickEditDescription('control_impacto_descripcion')}\r\n                ckeditorUploadOptions={{ model: 'riesgo__impacto', modelId: riesgo.id }}\r\n                footer='AttachmentList'\r\n              />\r\n              <RiesgoControlDimmer riesgo={riesgo} editable={editable} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Fragment>\r\n    )\r\n\r\n    return <ProyectoRiesgoModalSection header={header} content={content} />\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Modal\r\n        open\r\n        dimmer='inverted'\r\n        closeIcon\r\n        onClose={this.onClose}\r\n        closeOnDimmerClick={false}\r\n        closeOnEscape={false}\r\n        onMount={this.onModalMount}\r\n        className='proyecto-riesgo-modal'\r\n      >\r\n        {this.renderSection1()}\r\n        {this.renderSection2()}\r\n        {this.renderSection3()}\r\n        <Modal.Actions>\r\n          <button className='ui button primary' onClick={this.props.onClose}>\r\n            Aceptar\r\n          </button>\r\n        </Modal.Actions>\r\n      </Modal>\r\n    )\r\n  }\r\n}\r\n\r\ntype ProyectoRiesgoModalSectionProps = {\r\n  header: JSX.Element\r\n  content: JSX.Element\r\n}\r\n\r\nclass ProyectoRiesgoModalSection extends PureComponent<ProyectoRiesgoModalSectionProps, { open: boolean }> {\r\n  state = {\r\n    open: true\r\n  }\r\n  onToggle = () => {\r\n    this.setState((state) => {\r\n      return { open: !state.open }\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <section className={cx('modal-section', open ? 'open' : 'closed')}>\r\n        <header className='modal-section-header'>\r\n          <div className='ui middle aligned grid'>\r\n            <div className='row'>\r\n              <div className='fourteen wide column'>{this.props.header}</div>\r\n              <div className='two wide column center aligned clickable toggle-collapse' onClick={this.onToggle}>\r\n                {this.state.open ? (\r\n                  <Fragment>\r\n                    <i className='angle down large icon' title='Contraer' /> Contraer\r\n                  </Fragment>\r\n                ) : (\r\n                  <Fragment>\r\n                    <i className='angle left large icon' title='Expandir' /> Expandir\r\n                  </Fragment>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </header>\r\n        {this.state.open && <div className='section-body ui top aligned grid'>{this.props.content}</div>}\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\ntype RiesgoFraudeMaterialCheckboxGroupProps = {\r\n  checked: boolean\r\n  editable: boolean\r\n  onChange: (checked: boolean) => void\r\n}\r\n\r\nclass RiesgoFraudeMaterialCheckboxGroup extends PureComponent<RiesgoFraudeMaterialCheckboxGroupProps> {\r\n  onChange = (checked: boolean) => {\r\n    if (!this.props.editable) {\r\n      return\r\n    }\r\n\r\n    return () => {\r\n      this.props.onChange(checked)\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div className={cx('riesgo-fraude-checkboxgroup', !this.props.editable ? 'disabled' : null)}>\r\n        <label htmlFor='riesgofraudechk1' className={this.props.checked ? 'active' : ''} onClick={this.onChange(true)}>\r\n          <span className='lb-title'>SI</span>\r\n          <div className='riesgofraudechk' id='riesgofraudechk1' />\r\n        </label>\r\n        <label htmlFor='riesgofraudechk0' className={this.props.checked ? '' : 'active'} onClick={this.onChange(false)}>\r\n          <span className='lb-title'>NO</span>\r\n          <div className='riesgofraudechk' id='riesgofraudechk0' />\r\n        </label>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\ntype BMACheckboxGroupProps = {\r\n  value: 1 | 3 | 5\r\n  tooltips?: any\r\n}\r\n\r\nclass BMACheckboxGroup extends PureComponent<BMACheckboxGroupProps> {\r\n  render() {\r\n    const { value, tooltips } = this.props\r\n    return (\r\n      <div className={cx('bma-checkboxgroup', 'bma-value-' + this.props.value)}>\r\n        <div className={cx('bma-checkbox-wrap', value == 1 ? 'active' : '', value >= 1 ? 'on' : '')}>\r\n          <div className='bma-checkbox' /> <div className='checkbox-label'>Bajo {tooltips && tooltips[1]}</div>\r\n        </div>\r\n        <div className={cx('bma-checkbox-wrap', value == 3 ? 'active' : '', value >= 3 ? 'on' : '')}>\r\n          <div className='bma-checkbox' />\r\n          <div className='checkbox-label'>Medio {tooltips && tooltips[3]}</div>\r\n        </div>\r\n        <div className={cx('bma-checkbox-wrap', value == 5 ? 'active' : '', value == 5 ? 'on' : '')}>\r\n          <div className='bma-checkbox' />\r\n          <div className='checkbox-label'>Alto {tooltips && tooltips[5]}</div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\ntype RiesgoFieldSliderProps = {\r\n  value: number\r\n  labels: any\r\n  onChange: (value: number) => void\r\n  editable: boolean\r\n  inverted?: boolean\r\n}\r\n\r\nclass RiesgoFieldSlider extends PureComponent<RiesgoFieldSliderProps> {\r\n  static defaultProps = {\r\n    editable: true,\r\n    inverted: false\r\n  }\r\n  onChange = (value: any) => {\r\n    if (!this.props.editable) {\r\n      return\r\n    }\r\n\r\n    if (value == 0) {\r\n      return\r\n    }\r\n\r\n    return this.props.onChange(value)\r\n  }\r\n\r\n  render() {\r\n    let { value } = this.props\r\n    value = !value || value == 0 ? 0 : (+value + 1) / 2\r\n    return (\r\n      <div>\r\n        <Slider\r\n          min={0}\r\n          max={3}\r\n          tooltip={false}\r\n          value={value}\r\n          labels={this.props.labels}\r\n          onChange={this.onChange}\r\n          className={cx(\r\n            `slider-value-${value || '0'}`,\r\n            !this.props.inverted || 'inverted',\r\n            this.props.editable || 'disabled'\r\n          )}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst RiesgoControlDimmer = (props: { riesgo: ProyectoRiesgo; editable: boolean }) => {\r\n  const { riesgo, editable } = props\r\n\r\n  return (\r\n    !riesgo.control_codigo && (\r\n      <div className='ui dimmer active inverted riesgo-control-dimmer'>\r\n        {editable && (\r\n          <div className='content'>\r\n            <div className='ui basic red label'>\r\n              Diligencie el Código del Control para habilitar la edición de este campo.\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n  )\r\n}\r\n\r\nconst RiesgoControlCodigoInput = (props: any) => {\r\n  const { value: defaultValue, onChange } = props\r\n\r\n  const [ value, setValue ] = useState<string>(defaultValue)\r\n\r\n  const onSubmit = () => {\r\n    if (value) {\r\n      onChange(value)\r\n    }\r\n  }\r\n\r\n  if (defaultValue && value != defaultValue) {\r\n    setValue(defaultValue)\r\n  }\r\n\r\n  return defaultValue ? (\r\n    <span>{defaultValue}</span>\r\n  ) : (\r\n    <Fragment>\r\n      <div className='ui action mini input'>\r\n        <input\r\n          type='text'\r\n          placeholder='ID del Control'\r\n          className=''\r\n          style={{ marginBottom: 0, width: 140 }}\r\n          value={value || ''}\r\n          onChange={(ev) => setValue(ev.target.value)}\r\n          onBlur={onSubmit}\r\n        />\r\n        <button type='button' className='ui button compact icon green' onClick={onSubmit}>\r\n          <i className='ui check icon large' />\r\n        </button>\r\n      </div>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\ntype PasoAssignModalProps = {\r\n  riesgo: ProyectoRiesgo\r\n  editable: boolean\r\n  onSave: (selectedIds: string[]) => void\r\n}\r\n\r\ntype PasoAssignModalState = {\r\n  open: boolean\r\n  selectedIds: string[]\r\n}\r\n\r\nclass PasoAssignModal extends PureComponent<PasoAssignModalProps, PasoAssignModalState> {\r\n  state: PasoAssignModalState = {\r\n    open: false,\r\n    selectedIds: []\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ selectedIds: _.pluck(this.props.riesgo.ProyectoRiesgoHasPaso, 'id_master_data_paso') })\r\n  }\r\n\r\n  submit = () => {\r\n    this.props.onSave(this.state.selectedIds)\r\n    this.setState({ open: false })\r\n  }\r\n\r\n  onChange = (selectedIds: string[]) => {\r\n    this.setState({ selectedIds })\r\n  }\r\n\r\n  onClickDeleteItem = (id_paso: string) => {\r\n    bootbox.warningConfirm(\r\n      `¿Desea desvincular el paso \"${app.vars.masterdatapasos[id_paso].descripcion}\" de este riesgo?`,\r\n      'Cancelar',\r\n      'Sí, Desvincular paso',\r\n      (answer) => {\r\n        if (!answer) {\r\n          return\r\n        }\r\n\r\n        this.setState((prevState) => {\r\n          const selectedIds = _.intersection(prevState.selectedIds, [ id_paso ])\r\n          this.props.onSave(selectedIds)\r\n          return { selectedIds }\r\n        })\r\n      }\r\n    )\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={{ borderTop: '1px solid #CCC', marginTop: 5, paddingTop: 5 }}>\r\n        {this.props.riesgo.ProyectoRiesgoHasPaso.length > 0 && (\r\n          <strong className='title-field'>Pasos vinculados: </strong>\r\n        )}\r\n        {this.props.riesgo.ProyectoRiesgoHasPaso.length > 0 && (\r\n          <div className='ui list horizontal' role='list'>\r\n            {_.map(this.props.riesgo.ProyectoRiesgoHasPaso, (paso: any) => {\r\n              return (\r\n                <div className='item' key={`haspaso-${paso.id}`} role='listitem'>\r\n                  <div className='ui label'>\r\n                    <a\r\n                      href={url_for(`proyecto/${app.vars.idproyecto}/master_data/paso/${paso.id_master_data_paso}`)}\r\n                      target='_blank'\r\n                    >\r\n                      {app.vars.masterdatapasos[paso.id_master_data_paso].descripcion}\r\n                    </a>\r\n                    <i\r\n                      aria-hidden='true'\r\n                      className='delete icon'\r\n                      onClick={() => this.onClickDeleteItem(paso.id_master_data_paso)}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )\r\n            })}\r\n          </div>\r\n        )}\r\n\r\n        {this.props.editable && (\r\n          <button\r\n            type='button'\r\n            className='ui button mini compact primary inline'\r\n            onClick={() => this.setState({ open: true })}\r\n          >\r\n            Vincular pasos\r\n          </button>\r\n        )}\r\n        {this.state.open && (\r\n          <Modal className='modal-ab' open onClose={() => this.setState({ open: false })}>\r\n            <Modal.Header content={`Vincular Pasos al Riesgo ${this.props.riesgo.codigo}`} />\r\n            <Modal.Content>\r\n              <p className='description-text'>Seleccione los pasos que desea vincular a este riesgo</p>\r\n              <PasoSelect selectedIds={this.state.selectedIds} onChange={this.onChange} />\r\n            </Modal.Content>\r\n            <Modal.Actions\r\n              actions={[\r\n                { content: 'Cancelar', negative: true, key: 'cancel', onClick: () => this.setState({ open: false }) },\r\n                { content: 'Vincular pasos', primary: true, key: 'ok', onClick: this.submit }\r\n              ]}\r\n            />\r\n          </Modal>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import { PureComponent, SyntheticEvent } from 'react'\r\nimport cx from 'classnames'\r\n\r\nimport Dropdown from 'semantic-ui-react/dist/commonjs/modules/Dropdown/Dropdown'\r\nimport Popup from 'semantic-ui-react/dist/commonjs/modules/Popup'\r\n\r\ndeclare var app: any\r\n\r\nclass NivelesChoices {\r\n  static BMA = { 1: 'Bajo', 3: 'Medio', 5: 'Alto' }\r\n  static BMA2 = { 1: 'Bajo', 3: 'Moderado', 5: 'Alto' }\r\n  static DMF = { 1: 'Débil', 3: 'Moderado', 5: 'Fuerte' }\r\n  static IDE = { 1: 'Inefectivo', 3: 'Con Deficiencias', 5: 'Efectivo' }\r\n}\r\n\r\ntype RiesgoCellBlockProps = {\r\n  style?: any\r\n  className?: string\r\n  loading?: boolean\r\n  onClick?: () => void\r\n}\r\n\r\nexport class RiesgoCellBlock extends PureComponent<RiesgoCellBlockProps> {\r\n  static defaultProps = {\r\n    loading: false\r\n  }\r\n  render() {\r\n    if (this.props.loading) {\r\n      return <div className='ui active centered inline tiny loader' />\r\n    }\r\n\r\n    return (\r\n      <div className={cx('cell-block', this.props.className)} style={this.props.style} onClick={this.props.onClick}>\r\n        {this.props.children}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport function createRiesgoCellBlock(riesgo: ProyectoRiesgo, field: keyof ProyectoRiesgo, attrs?: any) {\r\n  const getLabel = (input: any, cases: any) => {\r\n    if (!input || input == '0') {\r\n      return 'Por Definir'\r\n    }\r\n\r\n    return cases[input]\r\n  }\r\n\r\n  let choices\r\n  switch (field) {\r\n    case 'riesgo_inherente':\r\n      choices = NivelesChoices.BMA\r\n      break\r\n    case 'riesgo_residual':\r\n      choices = NivelesChoices.BMA2\r\n      break\r\n    case 'control_valoracion':\r\n      choices = NivelesChoices.DMF\r\n      break\r\n    case 'control_efectividad':\r\n      choices = NivelesChoices.IDE\r\n      break\r\n  }\r\n\r\n  const value = riesgo[field] ? riesgo[field] : 0\r\n  const className = cx(attrs ? attrs.className : null, `cell-block-value-${value}`, `field-${field}`)\r\n\r\n  return (\r\n    <RiesgoCellBlock className={className} {...attrs}>\r\n      {getLabel(riesgo[field], choices)}\r\n    </RiesgoCellBlock>\r\n  )\r\n}\r\n\r\ntype RiesgoFieldDropdownProps = {\r\n  value: { id: string }[]\r\n  field: string\r\n  choices: any[]\r\n  onChange: (value: any[]) => void\r\n  editable?: boolean\r\n}\r\n\r\nexport class RiesgoFieldDropdown extends PureComponent<RiesgoFieldDropdownProps> {\r\n  choices: { key: string; text: string; value: string; tooltip?: string }[] = []\r\n\r\n  static defaultProps = {\r\n    editable: true\r\n  }\r\n\r\n  constructor(props: RiesgoFieldDropdownProps) {\r\n    super(props)\r\n\r\n    this.choices = _.map(this.props.choices, (item) => {\r\n      return {\r\n        key: item.id,\r\n        text: 'name' in item ? item.name : item.descripcion,\r\n        value: item.id,\r\n        tooltip: item.description\r\n      }\r\n    })\r\n  }\r\n\r\n  parseValue() {\r\n    return _.map(this.props.value, (item: any) => {\r\n      return item[this.props.field]\r\n    })\r\n  }\r\n\r\n  onClickRemoveItem = (key: string) => {\r\n    const value = _.reject(this.props.value, { [this.props.field]: key })\r\n    this.props.onChange(value)\r\n  }\r\n\r\n  onChange = (ev: any, params: any) => {\r\n    let value = _.map(params.value, (item) => {\r\n      return { [this.props.field]: item }\r\n    })\r\n\r\n    this.props.onChange(_.union(this.props.value, value))\r\n  }\r\n\r\n  render() {\r\n    const values = this.parseValue()\r\n    const choices = _.reject(this.choices, (choice) => {\r\n      return _.include(values, choice.key)\r\n    })\r\n\r\n    let placeholder = null,\r\n      dropdownText = null\r\n    switch (this.props.value.length) {\r\n      case 0:\r\n        placeholder = 'Seleccionar'\r\n        break\r\n      case 1:\r\n        dropdownText = '1 Seleccionado'\r\n        break\r\n      default:\r\n        dropdownText = this.props.value.length + ' Seleccionados'\r\n        break\r\n    }\r\n\r\n    return (\r\n      <div className={cx('riesgo-field-dropdown', this.props.editable || 'disabled')}>\r\n        {this.props.editable && (\r\n          <Dropdown\r\n            multiple\r\n            selection\r\n            options={choices}\r\n            placeholder={placeholder}\r\n            text={dropdownText}\r\n            closeOnChange\r\n            value={[]}\r\n            onChange={this.onChange}\r\n          />\r\n        )}\r\n\r\n        <ul className='riesgo-dropdown-selectedlist unstyled'>\r\n          {_.map(this.props.value, (valueItem: any) => {\r\n            const item = _.find(this.choices, { key: valueItem[this.props.field] })\r\n            return (\r\n              <Popup\r\n                key={item.key}\r\n                header={item.text}\r\n                content={item.tooltip}\r\n                disabled={!item.tooltip}\r\n                size='mini'\r\n                trigger={\r\n                  <li className='dropdown-selectedlist-item'>\r\n                    <span>{item.text}</span>\r\n                    {this.props.editable && (\r\n                      <i className='icon delete pull-right' onClick={() => this.onClickRemoveItem(item.key)} />\r\n                    )}\r\n                  </li>\r\n                }\r\n              />\r\n            )\r\n          })}\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\ntype RiesgoCriterioEvaluacionControlTableProps = {\r\n  riesgo: ProyectoRiesgo\r\n  editable?: boolean\r\n  onChange: (field: string, data: any) => void\r\n}\r\n\r\ntype RiesgoCriterioEvaluacion = {\r\n  label: string\r\n  choices: {\r\n    label: string\r\n    value: string\r\n  }[]\r\n}\r\nexport class RiesgoCriterioEvaluacionControlTable extends PureComponent<RiesgoCriterioEvaluacionControlTableProps> {\r\n  static defaultProps = {\r\n    editable: true\r\n  }\r\n\r\n  getChoiceValue(choice: string) {\r\n    const { riesgo }: { riesgo: any } = this.props\r\n    const value = riesgo[choice]\r\n\r\n    if (value === null || value === undefined) {\r\n      return null\r\n    }\r\n\r\n    if (value === true) {\r\n      return 1\r\n    }\r\n\r\n    return +value\r\n  }\r\n\r\n  render() {\r\n    const criterios: RiesgoCriterioEvaluacion[] = app.vars.riesgocontext.criterios_evaluacion\r\n    return (\r\n      <table className='ui striped basic small table table-riesgo-criterios'>\r\n        <thead>\r\n          <tr>\r\n            <th>\r\n              <div className='criterio-name'>Criterio de Evaluación</div>\r\n            </th>\r\n            <th>Valoración</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {_.map(criterios, (criterio, k: string) => {\r\n            const choices = _.map(criterio.choices, (choice, key) => {\r\n              return {\r\n                text: choice.label,\r\n                value: +choice.value,\r\n                key: key\r\n              }\r\n            })\r\n            return (\r\n              <tr key={k}>\r\n                <td>\r\n                  <div className='criterio-name'>{criterio.label}</div>\r\n                </td>\r\n                <td className='criterio-value'>\r\n                  <RiesgoCriterioValoracionDropdown\r\n                    choices={choices}\r\n                    editable={this.props.editable}\r\n                    value={this.getChoiceValue(k)}\r\n                    onChange={(ev: SyntheticEvent, data: any) => this.props.onChange(k, data)}\r\n                  />\r\n                </td>\r\n              </tr>\r\n            )\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    )\r\n  }\r\n}\r\n\r\nconst RiesgoCriterioValoracionDropdown = (props: any) => {\r\n  const { choices, value, onChange, editable } = props\r\n  const selectedChoice: { text: string; value: string } = value == null ? null : _.find(choices, { value })\r\n\r\n  if (!editable) {\r\n    return <div className='text'>{value == null ? '' : selectedChoice.text}</div>\r\n  }\r\n\r\n  const trigger =\r\n    value == null ? <div className='default text'>Seleccione</div> : <div className='text'>{selectedChoice.text}</div>\r\n\r\n  return (\r\n    <Dropdown selectOnBlur={false} closeOnChange scrolling trigger={trigger} onChange={onChange} options={choices} />\r\n  )\r\n}\r\n","declare var app: any\r\n\r\nexport namespace RiesgoModel {\r\n  export function calculateRiesgoInherente(riesgo: ProyectoRiesgo): number {\r\n    if (!riesgo.probabilidad || !riesgo.impacto) {\r\n      return\r\n    }\r\n\r\n    const p_i = +riesgo.probabilidad + riesgo.impacto\r\n    if (p_i == 10 || p_i == 8) {\r\n      return 5\r\n    } else if (p_i == 6) {\r\n      return 3\r\n    } else {\r\n      return 1\r\n    }\r\n  }\r\n\r\n  export function calculateControlValoracion(riesgo: ProyectoRiesgo, criterioNamelist: string[]): 1 | 3 | 5 {\r\n    let control_valoracion: number = 0\r\n\r\n    _.each(criterioNamelist, (criterio) => {\r\n      if (!(criterio in riesgo)) {\r\n        return\r\n      }\r\n\r\n      let valoracion = (riesgo as any)[criterio]\r\n      if (valoracion === true) {\r\n        valoracion = 1\r\n      } else if (valoracion === false) {\r\n        valoracion = 0\r\n      }\r\n\r\n      if (valoracion === '') {\r\n        control_valoracion = 0\r\n        return false\r\n      }\r\n\r\n      valoracion = parseFloat(valoracion)\r\n      if (isNaN(valoracion)) {\r\n        control_valoracion = 0\r\n        return false\r\n      }\r\n\r\n      control_valoracion += valoracion\r\n    })\r\n\r\n    if (control_valoracion == 0) {\r\n      return null\r\n    } else if (control_valoracion <= 5) {\r\n      return 1\r\n    } else if (control_valoracion <= 7) {\r\n      return 3\r\n    } else if (control_valoracion <= 10) {\r\n      return 5\r\n    }\r\n  }\r\n\r\n  export function calculateRiesgoSolidez(riesgo: ProyectoRiesgo): 1 | 3 | 5 {\r\n    if (isNaN(parseInt('' + riesgo.control_efectividad))) {\r\n      return null\r\n    }\r\n\r\n    if (riesgo.control_valoracion === null) {\r\n      return null\r\n    }\r\n\r\n    const valoracion_efectividad = +riesgo.control_valoracion + +riesgo.control_efectividad\r\n    switch (valoracion_efectividad) {\r\n      case 10:\r\n        return 5\r\n      case 8:\r\n        return 3\r\n      default:\r\n        return 1\r\n    }\r\n  }\r\n\r\n  export function calculateRiesgoResidual(riesgo: ProyectoRiesgo): 1 | 3 | 5 {\r\n    if (isNaN(parseInt('' + riesgo.control_efectividad)) && riesgo.control_valoracion === null) {\r\n      return riesgo.riesgo_inherente\r\n    }\r\n\r\n    const solidez = calculateRiesgoSolidez(riesgo)\r\n    if (solidez === null) {\r\n      return null\r\n    }\r\n\r\n    if (riesgo.riesgo_inherente == 1 || solidez == 5) {\r\n      return 1\r\n    } else if (solidez == 3 || (solidez == 1 && riesgo.riesgo_inherente == 3)) {\r\n      return 3\r\n    } else {\r\n      return 5\r\n    }\r\n  }\r\n\r\n  export function create(\r\n    riesgo: Partial<ProyectoRiesgo> | { bibliotecaIds: string[] }\r\n  ): Promise<ProyectoRiesgo | ProyectoRiesgo[]> {\r\n    return new Promise<ProyectoRiesgo>((resolve, reject) => {\r\n      const params = 'bibliotecaIds' in riesgo ? riesgo : { fields: riesgo }\r\n      $.post(url_for(`proyecto/${app.vars.idproyecto}/riesgos/create`), params)\r\n        .done((res) => {\r\n          if (!res.hasErrors) {\r\n            resolve('records' in res.response ? res.response.records : res.response.record)\r\n          }\r\n        })\r\n        .fail(reject)\r\n    })\r\n  }\r\n\r\n  export function setChanges(riesgo: ProyectoRiesgo, changes: any) {\r\n    changes.control_valoracion = calculateControlValoracion(\r\n      Object.assign({}, riesgo, changes),\r\n      _.keys(app.vars.riesgocontext.criterios_evaluacion)\r\n    )\r\n    if (!changes.control_valoracion) {\r\n      changes.control_efectividad = null\r\n    }\r\n    changes.riesgo_residual = calculateRiesgoResidual(Object.assign({}, riesgo, changes))\r\n\r\n    let modified = false\r\n    _.each(changes, (value, key: keyof ProyectoRiesgo) => {\r\n      if (riesgo[key] != value) {\r\n        modified = true\r\n        return false\r\n      }\r\n    })\r\n\r\n    return !modified ? null : changes\r\n  }\r\n\r\n  export function getChangesWhenRemoveControlCodigo(riesgo: ProyectoRiesgo) {\r\n    let changes: any = { control_codigo: null, control_descripcion: null, control_efectividad: null }\r\n    _.each(_.keys(app.vars.riesgocontext.criterios_evaluacion), (criterio) => {\r\n      changes[criterio] = null\r\n    })\r\n\r\n    return changes\r\n  }\r\n\r\n  export function save(riesgo: ProyectoRiesgo, changes: any) {\r\n    return new Promise((resolve, reject) => {\r\n      if (changes === null) {\r\n        resolve()\r\n        return\r\n      }\r\n      $.post(url_for(`/proyecto/${app.vars.idproyecto}/riesgos/${riesgo.id}`), {\r\n        fields: changes\r\n      }).done((res) => {\r\n        if (res.success) {\r\n          resolve()\r\n        } else {\r\n          reject(res.message)\r\n        }\r\n      })\r\n    })\r\n  }\r\n}\r\n","import { PureComponent, SyntheticEvent, Fragment } from 'react'\r\n\r\nimport Table from 'semantic-ui-react/dist/commonjs/collections/Table/Table'\r\nimport Pagination from 'semantic-ui-react/dist/commonjs/addons/Pagination/Pagination'\r\nimport Popup from 'semantic-ui-react/dist/commonjs/modules/Popup/Popup'\r\n\r\nimport EditorPreview from '../global/EditorPreview'\r\nimport { DefaultErrorHandler } from '../global/ErrorHandler'\r\nimport ProyectoRiesgoListContext from './ProyectoRiesgoListContext'\r\n\r\nimport cx from 'classnames'\r\n\r\nimport ProyectoRiesgoModal from './ProyectoRiesgoModal'\r\nimport { ProyectoRiesgoListSidebar } from './ProyectoRiesgoListSidebar'\r\nimport { createRiesgoCellBlock } from './ProyectoRiesgoUtils'\r\nimport { RiesgoModel } from './RiesgoModel'\r\n\r\ndeclare var app: any\r\n\r\ntype TabRiesgosState = {\r\n  riesgos: ProyectoRiesgo[]\r\n}\r\n\r\nexport default class TabRiesgos extends PureComponent<{}, TabRiesgosState> {\r\n  state: TabRiesgosState = {\r\n    riesgos: null\r\n  }\r\n\r\n  componentDidMount() {\r\n    $.getJSON(url_for(`proyecto/${app.vars.idproyecto}/riesgos/list`)).done((res) => {\r\n      this.setState({ riesgos: res.response.riesgos })\r\n    })\r\n\r\n    $.getJSON(url_for('proyecto/' + app.vars.idproyecto + '/master_data_tree'), {\r\n      export_options: { type: 'pasolink' }\r\n    }).done((res) => {\r\n      app.vars.masterdatatree = res.response\r\n\r\n      app.vars.masterdatapasos = {}\r\n      _.each(res.response, (fase) => {\r\n        _.each(fase.Subfases, (subfase) => {\r\n          _.each(subfase.Pasos, (paso) => {\r\n            app.vars.masterdatapasos[paso.id] = paso\r\n          })\r\n        })\r\n      })\r\n    })\r\n  }\r\n\r\n  updateRiesgos = (riesgos: ProyectoRiesgo[]) => {\r\n    this.setState({ riesgos })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <ProyectoRiesgoListContext.Provider value={{ riesgos: this.state.riesgos, updateRiesgos: this.updateRiesgos }}>\r\n        <div id='tablelistriesgo_wrapper'>\r\n          <TableRiesgoList />\r\n        </div>\r\n        <DefaultErrorHandler>\r\n          <ProyectoRiesgoListSidebar />\r\n        </DefaultErrorHandler>\r\n      </ProyectoRiesgoListContext.Provider>\r\n    )\r\n  }\r\n}\r\n\r\ntype TableRiesgoListState = {\r\n  currentPage: number\r\n  filters: TableRowFiltersState\r\n}\r\n\r\nclass TableRiesgoList extends PureComponent<{}, TableRiesgoListState> {\r\n  static contextType = ProyectoRiesgoListContext\r\n\r\n  state: TableRiesgoListState = {\r\n    currentPage: 1,\r\n    filters: null\r\n  }\r\n\r\n  TOTAL_PER_PAGE = 25\r\n\r\n  onPageChange = (ev: SyntheticEvent, data: any) => {\r\n    this.setState({ currentPage: data.activePage })\r\n  }\r\n\r\n  getFilteredList(riesgos: ProyectoRiesgo[]) {\r\n    const filters = this.state.filters\r\n    if (!_.size(filters)) {\r\n      return riesgos\r\n    }\r\n\r\n    const choiceFilterMatches = (filter: string, value: string): boolean => {\r\n      if (typeof filter === 'undefined') {\r\n        return true\r\n      }\r\n\r\n      if (filter == '-1') {\r\n        return value == 'null' || value == ''\r\n      }\r\n\r\n      if (filter.substr(0, 1) == '!') {\r\n        return value !== filter.substr(1)\r\n      }\r\n\r\n      return '' + filter === '' + value\r\n    }\r\n\r\n    const textFilterMatches = (filter: string, value: string): boolean => {\r\n      if (typeof filter === 'undefined') {\r\n        return true\r\n      }\r\n\r\n      return value.toUpperCase().includes(filter.trim().toUpperCase())\r\n    }\r\n\r\n    let filtered: ProyectoRiesgo[] = []\r\n    _.each(riesgos, (riesgo) => {\r\n      if (!choiceFilterMatches(filters.rf, riesgo.fraude_material ? '1' : '0')) {\r\n        return\r\n      }\r\n\r\n      if (!choiceFilterMatches(filters.ri, '' + riesgo.riesgo_inherente)) {\r\n        return\r\n      }\r\n\r\n      if (!choiceFilterMatches(filters.ec, '' + riesgo.control_valoracion)) {\r\n        return\r\n      }\r\n\r\n      if (!choiceFilterMatches(filters.vc, '' + riesgo.control_efectividad)) {\r\n        return\r\n      }\r\n\r\n      if (!choiceFilterMatches(filters.rr, '' + riesgo.riesgo_residual)) {\r\n        return\r\n      }\r\n\r\n      if (!textFilterMatches(filters.desc, riesgo.codigo) && !textFilterMatches(filters.desc, riesgo.description)) {\r\n        return\r\n      }\r\n\r\n      filtered.push(riesgo)\r\n    })\r\n\r\n    return filtered\r\n  }\r\n\r\n  getPagedList(riesgos: ProyectoRiesgo[]) {\r\n    if (riesgos === null) {\r\n      return { riesgos: null, paginationInfo: null }\r\n    }\r\n\r\n    const filteredRiesgos = this.getFilteredList(riesgos)\r\n    const paged = filteredRiesgos.slice(\r\n      (this.state.currentPage - 1) * this.TOTAL_PER_PAGE,\r\n      this.state.currentPage * this.TOTAL_PER_PAGE\r\n    )\r\n\r\n    return {\r\n      riesgos: paged,\r\n      paginationInfo: {\r\n        start: (this.state.currentPage - 1) * this.TOTAL_PER_PAGE + 1,\r\n        end: Math.min(this.state.currentPage * this.TOTAL_PER_PAGE, filteredRiesgos.length),\r\n        total: filteredRiesgos.length\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    $('#tableriesgolist').floatThead()\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    $('#tableriesgolist').floatThead('destroy')\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    setTimeout(function() {\r\n      $('#tableriesgolist').floatThead('reflow')\r\n    }, 100)\r\n  }\r\n\r\n  render() {\r\n    const headers = [\r\n      'Fraude',\r\n      'Riesgo',\r\n      'Riesgo Inherente',\r\n      'Evaluación de Control',\r\n      'Validación de Control',\r\n      'Riesgo Residual',\r\n      ''\r\n    ]\r\n\r\n    const { riesgos } = this.context\r\n    const { riesgos: pagedRiesgos, paginationInfo } = this.getPagedList(riesgos)\r\n\r\n    return (\r\n      <Table id='tableriesgolist' className='tableriesgolist' basic='very' compact>\r\n        <Table.Header>\r\n          <tr>\r\n            {_.map(headers, (header, index) => {\r\n              return <Table.HeaderCell collapsing={index == 0} key={index} className={`th-${index}`} content={header} />\r\n            })}\r\n          </tr>\r\n        </Table.Header>\r\n        <Table.Body>\r\n          {riesgos === null ? (\r\n            <tr>\r\n              <td colSpan={headers.length}>\r\n                <div style={{ height: 300, position: 'relative' }}>\r\n                  <div className='ui active inverted text loader elastic olive'>Cargando Listado de Riesgos</div>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          ) : (\r\n            <Fragment>\r\n              <TableRowFilters onChange={(filters: any) => this.setState({ filters })} />\r\n              {pagedRiesgos.length > 0 ? (\r\n                _.map(pagedRiesgos, (riesgo: ProyectoRiesgo) => {\r\n                  return <TableRowRiesgo riesgo={riesgo} key={riesgo.id} />\r\n                })\r\n              ) : (\r\n                <tr>\r\n                  <td colSpan={headers.length}>\r\n                    <div className='nocontent empty' style={{ margin: '7% auto' }}>\r\n                      0 Riesgos Encontrados\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </Fragment>\r\n          )}\r\n        </Table.Body>\r\n        <Table.Footer>\r\n          <tr>\r\n            <td colSpan={headers.length}>\r\n              {riesgos !== null &&\r\n              paginationInfo.total > this.TOTAL_PER_PAGE && (\r\n                <div className='pull-left pagination-wrapper'>\r\n                  <Pagination\r\n                    activePage={this.state.currentPage}\r\n                    boundaryRange={2}\r\n                    totalPages={Math.ceil(paginationInfo.total / this.TOTAL_PER_PAGE)}\r\n                    size='mini'\r\n                    onPageChange={this.onPageChange}\r\n                  />\r\n                </div>\r\n              )}\r\n              {riesgos !== null && (\r\n                <div className='pull-right pagination-info'>\r\n                  {paginationInfo.start} &mdash; {paginationInfo.end} / {paginationInfo.total} Riesgos\r\n                  {_.size(this.state.filters) > 0 && <span className='filtered-label'> (FILTRADOS)</span>}\r\n                </div>\r\n              )}\r\n            </td>\r\n          </tr>\r\n        </Table.Footer>\r\n      </Table>\r\n    )\r\n  }\r\n}\r\n\r\ntype TableRowFiltersState = {\r\n  desc: string\r\n  rf: string\r\n  ri: string\r\n  ec: string\r\n  vc: string\r\n  rr: string\r\n}\r\n\r\nclass TableRowFilters extends PureComponent<{ onChange: (filters: any) => void }, TableRowFiltersState> {\r\n  state: TableRowFiltersState = {\r\n    desc: '',\r\n    rf: '',\r\n    ri: '',\r\n    ec: '',\r\n    vc: '',\r\n    rr: ''\r\n  }\r\n\r\n  onChange(field: keyof TableRowFiltersState, value: string) {\r\n    const newstate: any = { [field]: value }\r\n    this.setState(newstate, () => {\r\n      this.props.onChange(this.getActiveFilters())\r\n    })\r\n  }\r\n\r\n  getActiveFilters() {\r\n    let filters: any = {}\r\n    _.each(this.state, (value, key) => {\r\n      if (value !== '') {\r\n        filters[key] = value\r\n      }\r\n    })\r\n\r\n    return filters\r\n  }\r\n\r\n  onClickReset = (ev: SyntheticEvent) => {\r\n    ev.preventDefault()\r\n    this.setState(\r\n      {\r\n        desc: '',\r\n        rf: '',\r\n        ri: '',\r\n        ec: '',\r\n        vc: '',\r\n        rr: ''\r\n      },\r\n      () => {\r\n        this.props.onChange(this.getActiveFilters())\r\n      }\r\n    )\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <tr className='filters-row'>\r\n          <td className='collapsing'>\r\n            <select\r\n              className={cx('rawselect rf', this.state.rf !== '' ? 'active' : null)}\r\n              value={this.state.rf}\r\n              onChange={(ev: SyntheticEvent) => this.onChange('rf', (ev.target as any).value)}\r\n            >\r\n              <option value=''>TODOS</option>\r\n              <option value='1'>SI</option>\r\n              <option value='0'>NO</option>\r\n            </select>\r\n          </td>\r\n          <td>\r\n            <input\r\n              type='search'\r\n              spellCheck={false}\r\n              className={cx(this.state.desc !== '' ? 'active' : null)}\r\n              value={this.state.desc}\r\n              onChange={(ev: SyntheticEvent) => this.onChange('desc', (ev.target as any).value)}\r\n            />\r\n          </td>\r\n          <td>\r\n            <select\r\n              className={cx('rawselect', this.state.ri !== '' ? 'active' : null)}\r\n              value={this.state.ri}\r\n              onChange={(ev: SyntheticEvent) => this.onChange('ri', (ev.target as any).value)}\r\n            >\r\n              <option value=''>TODOS</option>\r\n              <option value='5'>Alto</option>\r\n              <option value='3'>Medio</option>\r\n              <option value='1'>Bajo</option>\r\n              <option disabled>-</option>\r\n              <option value='!1'>Alto y Medio</option>\r\n              <option value='!3'>Alto y Bajo</option>\r\n              <option value='!5'>Medio y Bajo</option>\r\n              <option disabled>-</option>\r\n              <option value='-1'>Por Definir</option>\r\n            </select>\r\n          </td>\r\n          <td>\r\n            <select\r\n              className={cx('rawselect', this.state.ec !== '' ? 'active' : null)}\r\n              value={this.state.ec}\r\n              onChange={(ev: SyntheticEvent) => this.onChange('ec', (ev.target as any).value)}\r\n            >\r\n              <option value=''>TODOS</option>\r\n              <option value='5'>Fuerte</option>\r\n              <option value='3'>Moderado</option>\r\n              <option value='1'>Débil</option>\r\n              <option disabled>-</option>\r\n              <option value='!1'>Fuerte y Moderado</option>\r\n              <option value='!3'>Fuerte y Débil</option>\r\n              <option value='!5'>Moderado y Débil</option>\r\n              <option disabled>-</option>\r\n              <option value='-1'>Por Definir</option>\r\n            </select>\r\n          </td>\r\n          <td>\r\n            <select\r\n              className={cx('rawselect', this.state.vc !== '' ? 'active' : null)}\r\n              value={this.state.vc}\r\n              onChange={(ev: SyntheticEvent) => this.onChange('vc', (ev.target as any).value)}\r\n            >\r\n              <option value=''>TODOS</option>\r\n              <option value='5'>Efectivo</option>\r\n              <option value='3'>Con Deficiencias</option>\r\n              <option value='1'>Inefectivo</option>\r\n              <option disabled>-</option>\r\n              <option value='!1'>Efectivo o Con Deficiencias</option>\r\n              <option value='!3'>Efectivo o Inefectivo</option>\r\n              <option value='!5'>Con Deficiencias o Inefectivo</option>\r\n              <option disabled>-</option>\r\n              <option value='-1'>Por Definir</option>\r\n            </select>\r\n          </td>\r\n          <td>\r\n            <select\r\n              className={cx('rawselect', this.state.rr !== '' ? 'active' : null)}\r\n              value={this.state.rr}\r\n              onChange={(ev: SyntheticEvent) => this.onChange('rr', (ev.target as any).value)}\r\n            >\r\n              <option value=''>TODOS</option>\r\n              <option value='5'>Alto</option>\r\n              <option value='3'>Medio</option>\r\n              <option value='1'>Bajo</option>\r\n              <option disabled>-</option>\r\n              <option value='!1'>Alto y Medio</option>\r\n              <option value='!3'>Alto y Bajo</option>\r\n              <option value='!5'>Medio y Bajo</option>\r\n              <option disabled>-</option>\r\n              <option value='-1'>Por Definir</option>\r\n            </select>\r\n          </td>\r\n        </tr>\r\n        {_.size(this.getActiveFilters()) > 0 && (\r\n          <tr>\r\n            <td colSpan={7}>\r\n              <div id='filteralerts' className='alert-2 alert-primary'>\r\n                <span className='icon-info-sign' style={{ marginRight: 3 }} />\r\n                NOTA: La visibilidad de los riesgos está afectada por los filtros aplicados.\r\n                <a href='#' className='resetfilters' style={{ marginLeft: 10 }} onClick={this.onClickReset}>\r\n                  Quitar filtros\r\n                </a>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        )}\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nclass TableRowRiesgo extends PureComponent<{ riesgo: ProyectoRiesgo }, { openModal: boolean; loading: boolean }> {\r\n  static contextType = ProyectoRiesgoListContext\r\n  state = {\r\n    openModal: false,\r\n    loading: false\r\n  }\r\n\r\n  componentDidMount() {\r\n    let changes = RiesgoModel.setChanges(this.props.riesgo, {})\r\n    if (changes) {\r\n      this.setState({ loading: true })\r\n      const { riesgos, updateRiesgos } = this.context\r\n      RiesgoModel.save(this.props.riesgo, changes).then(() => {\r\n        let riesgosCopy = _.map(riesgos, (riesgo: ProyectoRiesgo) => {\r\n          if (riesgo.id == this.props.riesgo.id) {\r\n            return Object.assign({}, riesgo, changes)\r\n          } else {\r\n            return riesgo\r\n          }\r\n        })\r\n        this.setState({ loading: false })\r\n        updateRiesgos(riesgosCopy)\r\n      })\r\n    }\r\n  }\r\n\r\n  onEditDescription = (editor: any) => {\r\n    editor.getData()\r\n  }\r\n\r\n  getLabel(input: number, cases: any) {\r\n    if (!input) {\r\n      return 'Por Definir'\r\n    }\r\n\r\n    return cases[input]\r\n  }\r\n\r\n  onClickEdit = (ev: SyntheticEvent) => {\r\n    ev.preventDefault()\r\n    this.setState({ openModal: true })\r\n  }\r\n\r\n  onCloseModal = () => {\r\n    this.setState({ openModal: false })\r\n  }\r\n\r\n  getRiesgo(): ProyectoRiesgo {\r\n    return _.find(this.context.riesgos, { id: this.props.riesgo.id })\r\n  }\r\n\r\n  render() {\r\n    const { riesgo } = this.props\r\n    const { loading } = this.state\r\n\r\n    const descriptionPreview =\r\n      '<strong class=\"riesgo-code\">' + riesgo.codigo + '</strong> - ' + (riesgo.description || '')\r\n\r\n    const is_editable = app.vars.proyecto.isOpen\r\n\r\n    return (\r\n      <tr className='hoverable-actions'>\r\n        <td className='collapsing center aligned' style={{ padding: '0.5em 0' }}>\r\n          {+riesgo.fraude_material == 1 && (\r\n            <Popup\r\n              trigger={<i className='red exclamation circle large icon' aria-hidden='true' />}\r\n              content='Riesgo de Fraude'\r\n              size='mini'\r\n            />\r\n          )}\r\n        </td>\r\n        <td className='table-cell-riesgo-description'>\r\n          <div className='ui compact segment' onClick={this.onClickEdit}>\r\n            <EditorPreview preview={descriptionPreview} data={riesgo.description} editable={false} />\r\n          </div>\r\n        </td>\r\n        <td>{createRiesgoCellBlock(riesgo, 'riesgo_inherente', { onClick: this.onClickEdit, loading })}</td>\r\n        <td>{createRiesgoCellBlock(riesgo, 'control_valoracion', { onClick: this.onClickEdit, loading })}</td>\r\n        <td>{createRiesgoCellBlock(riesgo, 'control_efectividad', { onClick: this.onClickEdit, loading })}</td>\r\n        <td>{createRiesgoCellBlock(riesgo, 'riesgo_residual', { onClick: this.onClickEdit, loading })}</td>\r\n        <td>\r\n          {is_editable && (\r\n            <div className='btn-group dropdown-modern'>\r\n              <a className='dropdown-toggle' data-toggle='dropdown' href='#'>\r\n                <i className='ellipsis vertical grey icon' />\r\n              </a>\r\n\r\n              <ul className='dropdown-menu pull-right'>\r\n                {user_has_role_permission('riesgo_edit') && (\r\n                  <li>\r\n                    <a href='#' onClick={this.onClickEdit}>\r\n                      Editar Riesgo\r\n                    </a>\r\n                  </li>\r\n                )}\r\n                {user_has_role_permission('riesgo_delete') && <RiesgoDropdownDeleteAction riesgo={riesgo} />}\r\n              </ul>\r\n            </div>\r\n          )}\r\n          {this.state.openModal && (\r\n            <ProyectoRiesgoModal\r\n              riesgo={riesgo}\r\n              onClose={this.onCloseModal}\r\n              editable={is_editable && user_has_role_permission('riesgos_edit')}\r\n            />\r\n          )}\r\n        </td>\r\n      </tr>\r\n    )\r\n  }\r\n}\r\n\r\nclass RiesgoDropdownDeleteAction extends PureComponent<{ riesgo: ProyectoRiesgo }> {\r\n  static contextType = ProyectoRiesgoListContext\r\n\r\n  onClick = (ev: SyntheticEvent) => {\r\n    ev.preventDefault()\r\n\r\n    const { riesgo } = this.props\r\n    const { riesgos, updateRiesgos } = this.context\r\n\r\n    bootbox.warningConfirm(\r\n      `¿Esta seguro de querer eliminar por completo el riesgo \"<strong>${riesgo.codigo}</strong>\"?`,\r\n      'No',\r\n      'Sí, Eliminar Riesgo',\r\n      (answer) => {\r\n        if (!answer) {\r\n          return\r\n        }\r\n\r\n        $.blockUI(create_blockUI_loading_message('Eliminando Riesgo...'))\r\n        $.post(url_for(`proyecto/${app.vars.idproyecto}/riesgos/${riesgo.id}`), { sf_method: 'delete' })\r\n          .done(() => {\r\n            updateRiesgos(_.reject(riesgos, { id: riesgo.id }))\r\n            $.unblockUI()\r\n          })\r\n          .fail(() => $.unblockUI())\r\n      }\r\n    )\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <li>\r\n        <a href='#' onClick={this.onClick}>\r\n          Eliminar Riesgo\r\n        </a>\r\n      </li>\r\n    )\r\n  }\r\n}\r\n","import { render } from 'react-dom'\r\nimport App from './App'\r\n\r\n$.unblockUI()\r\nrender(<App />, document.getElementById('root'))\r\n","export class HallazgoRiesgoModelManager implements MenuElementModelManager<ProyectoHallazgo> {\r\n  private static instance: HallazgoRiesgoModelManager\r\n\r\n  static getInstance() {\r\n    if (!HallazgoRiesgoModelManager.instance) {\r\n      HallazgoRiesgoModelManager.instance = new this()\r\n    }\r\n\r\n    return HallazgoRiesgoModelManager.instance\r\n  }\r\n\r\n  /**\r\n   * Descarga el listado de los hallazgos.\r\n   *\r\n   * @param props\r\n   */\r\n  getJson(props: DefaultMenuElementProps<ProyectoHallazgo>): Promise<ProyectoHallazgo[]> {\r\n    return new Promise((resolve) => {\r\n      $.getJSON(url_for2(`proyecto/:id_proyecto/riesgo_hallazgo/json`)).done((res) => {\r\n        resolve(_.isEmpty(res.response) ? [] : res.response)\r\n      })\r\n    })\r\n  }\r\n\r\n  createItem(props: DefaultMenuElementProps<ProyectoHallazgo>, data: any): Promise<ProyectoHallazgo> {\r\n    const url = url_for2(`proyecto/:id_proyecto/riesgo_hallazgo`)\r\n\r\n    return new Promise<ProyectoHallazgo>((resolve) => {\r\n      $.post(url, { data }).done((res) => {\r\n        resolve(res.response.record)\r\n      })\r\n    })\r\n  }\r\n\r\n  saveItem(props: DefaultMenuElementProps<ProyectoHallazgo>, item: any, data: any): Promise<ProyectoHallazgo> {\r\n    let url: string\r\n    if (_.isEqual(data, { status: 'COMPLETADO' })) {\r\n      url = `proyecto/:id_proyecto/riesgo_hallazgo/:id/c`\r\n    } else if (_.isEqual(data, { status: 'REVISADO' })) {\r\n      url = `proyecto/:id_proyecto/riesgo_hallazgo/:id/r`\r\n    } else {\r\n      url = `proyecto/:id_proyecto/riesgo_hallazgo/:id`\r\n    }\r\n\r\n    return new Promise<ProyectoHallazgo>((resolve) => {\r\n      $.post(url_for2(url, { id: item.id }), { data }).done((res) => {\r\n        resolve(res.response.record)\r\n      })\r\n    })\r\n  }\r\n\r\n  deleteItem(props: DefaultMenuElementProps<ProyectoHallazgo>, item: any): Promise<null> {\r\n    const url = `proyecto/:id_proyecto/riesgo_hallazgo/:item_id`\r\n\r\n    return new Promise<null>((resolve) => {\r\n      $.ajax({ url: url_for2(url, { item_id: item.id }), type: 'DELETE' }).done((res) => {\r\n        if (res.status == 1) {\r\n          resolve()\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  parseItems(items: any): any {\r\n    return items\r\n  }\r\n}\r\n\r\nexport class RevisionRiesgoModelManager implements MenuElementModelManager<ProyectoRevisionTree> {\r\n  private static instance: RevisionRiesgoModelManager\r\n\r\n  static getInstance() {\r\n    if (!RevisionRiesgoModelManager.instance) {\r\n      RevisionRiesgoModelManager.instance = new this()\r\n    }\r\n\r\n    return RevisionRiesgoModelManager.instance\r\n  }\r\n\r\n  /**\r\n   * Descarga el listado de los notas de revision.\r\n   *\r\n   * @param props\r\n   */\r\n  getJson(props: DefaultMenuElementProps<ProyectoRevisionTree>): Promise<ProyectoRevisionTree[]> {\r\n    return new Promise((resolve) => {\r\n      $.getJSON(url_for2(`proyecto/:id_proyecto/riesgo_revision`)).done((res) => {\r\n        resolve(_.isEmpty(res.response.revisiones) ? [] : this.parseItems(res.response.revisiones))\r\n      })\r\n    })\r\n  }\r\n\r\n  createItem(props: DefaultMenuElementProps<ProyectoRevisionTree>, data: any): Promise<ProyectoRevisionTree> {\r\n    const url = url_for2(`proyecto/:id_proyecto/riesgo_revision`)\r\n\r\n    return new Promise<ProyectoRevisionTree>((resolve) => {\r\n      $.post(url, data).done((res) => {\r\n        resolve(res.response.revision)\r\n      })\r\n    })\r\n  }\r\n\r\n  saveItem(props: DefaultMenuElementProps<ProyectoRevisionTree>, item: any, data: any): Promise<ProyectoRevisionTree> {\r\n    const url = url_for2(`proyecto/:id_proyecto/riesgo_revision/${item.id}`)\r\n\r\n    return new Promise<ProyectoRevisionTree>((resolve) => {\r\n      $.post(url, data).done((res) => {\r\n        resolve(res.response.revision)\r\n      })\r\n    })\r\n  }\r\n\r\n  deleteItem(props: DefaultMenuElementProps<ProyectoRevisionTree>, item: any): Promise<null> {\r\n    const url = `proyecto/:id_proyecto/riesgo_revision/:item_id`\r\n\r\n    return new Promise<null>((resolve) => {\r\n      $.ajax({ url: url_for2(url, { item_id: item.id }), type: 'DELETE' }).done((res) => {\r\n        resolve()\r\n      })\r\n    })\r\n  }\r\n\r\n  parseItems(items: any): any {\r\n    return items\r\n  }\r\n}\r\n","module.exports = React;","module.exports = ReactDOM;"],"sourceRoot":""}